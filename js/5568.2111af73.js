"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[5568],{37428:function(t,e,a){a.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{ref:"container"},[t.text?a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("span",t._g({on:{click:function(e){return t.copy(t.val)},mouseleave:function(e){return t.resetCopyText()}}},i),[t._v(" "+t._s(t.val)+" ")])]}}],null,!1,276876146)},[a("span",[t._v(t._s(t.copyText))])]):a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(e){return t.copy(t.val)},mouseleave:function(e){return t.resetCopyText()}}},i),[a("v-icon",{attrs:{small:""}},[t._v("file_copy")])],1)]}}])},[a("span",[t._v(t._s(t.copyText))])])],1)},s=[],r={props:{val:null,text:Boolean},data(){return{copyText:"Copy"}},methods:{copy(t){var e=document.createElement("textarea");this.$refs["container"].appendChild(e),e.setAttribute("id","clipboard"),e.value=t,e.select(),document.execCommand("Copy"),e.parentNode.removeChild(e),this.copyText="Copied"},resetCopyText(){var t=this;setTimeout((()=>t.copyText="Copy"),500)}}},n=r,o=a(1001),l=(0,o.Z)(n,i,s,!1,null,null,null),c=l.exports},65924:function(t,e,a){a.d(e,{Z:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.yesno?a("span",[t._v(" "+t._s(t.val?"Yes":"No")+" ")]):t.password?a("span",[t._v(" "+t._s("******")+" ")]):t.hideText?t._e():a("span",[t._v(" "+t._s(t.val)+" ")]),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(e){return t.edit(t.val)}}},i),[a("v-icon",{attrs:{small:""}},[t._v("create")])],1)]}}])},[a("span",[t._v("Edit")])]),a("v-dialog",{attrs:{app:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{loading:t.fetching}},[a("v-card-title",[t._v(" Edit "+t._s(t.label)+" ")]),a("v-card-text",[t.yesno?a("v-select",{attrs:{items:t.yesnoItems,label:t.label,autofocus:"",error:t.errors.length>0,"error-messages":t.errors},model:{value:t.data.val,callback:function(e){t.$set(t.data,"val",e)},expression:"data.val"}}):a("v-text-field",{attrs:{label:t.label,autofocus:"",type:!t.password||t.showPassword?"text":"password","append-icon":t.password?t.showPassword?"visibility_off":"visibility":"","error-messages":t.errors},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.data.val,callback:function(e){t.$set(t.data,"val",e)},expression:"data.val"}}),a("v-btn",{attrs:{color:"primary"},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1)],1)},s=[],r=a(4296),n={props:{name:null,val:null,label:null,password:Boolean,hideText:Boolean,path:null,yesno:Boolean},data(){return{fetching:!1,dialog:!1,data:{val:null},showPassword:!1,yesnoItems:[{text:"Yes",value:1},{text:"No",value:0}],errors:[]}},watch:{val:function(t){this.data.val=t}},methods:{edit(){this.data.val=this.val,this.dialog=!0},save(){this.fetching=!0,this.errors=[];var t={};t[this.name]=this.data.val;var e=this;r.Z.post(this.path,t).then((t=>{console.log(t),t.data.success?(e.val=e.data.val,e.dialog=!1,e.$emit("save")):e.errors.push(t.data.error)})).catch((t=>console.log(t))).finally((()=>e.fetching=!1))}}},o=n,l=a(1001),c=(0,l.Z)(o,i,s,!1,null,null,null),d=c.exports},60862:function(t,e,a){a.d(e,{Z:function(){return d}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.error?a("v-alert",{attrs:{type:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),a("v-switch",{staticClass:"mx-3",attrs:{label:"IP restrictions"},on:{change:t.toggle},model:{value:t.data.active,callback:function(e){t.$set(t.data,"active",e)},expression:"data.active"}}),t.data.active?a("div",[a("v-list",[a("v-list-item-group",[t._l(t.items,(function(e,i){return[a("v-list-item",{key:"item-"+i,attrs:{value:e},scopedSlots:t._u([{key:"default",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(e.ip)+" ")]),a("v-list-item-subtitle",[t._v(" "+t._s(e.label)+" ")])],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:"",disabled:t.fetching,loading:t.fetching},on:{click:function(a){return t.deleteItem(e.line)}}},[a("v-icon",{attrs:{small:""}},[t._v("delete")])],1)],1)]},proxy:!0}],null,!0)})]}))],2)],1),a("v-card",[a("div",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-btn",{on:{click:function(e){return t.addItem()}}},[t._v(" Add IP ")])],1)],1)])],1):t._e(),a("v-navigation-drawer",{attrs:{app:"",temporary:"",right:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-card",[a("v-form",{ref:"form"},[a("v-card-title",[t._v(" IP ")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Label",required:""},model:{value:t.item.label,callback:function(e){t.$set(t.item,"label",e)},expression:"item.label"}}),a("v-text-field",{attrs:{label:"IP address",required:"",rules:[t.rules.ip]},model:{value:t.item.ip,callback:function(e){t.$set(t.item,"ip",e)},expression:"item.ip"}}),a("v-btn",{attrs:{disabled:t.fetching,loading:t.fetching,color:"success"},on:{click:t.saveItem}},[t._v(" Save ")])],1)],1)],1)],1)],1)},s=[],r=a(4296),n={props:{serverId:null,active:null,items:null,path:null},data(){return{data:{active:null},item:{},fetching:!1,drawer:!1,rules:{required:t=>!!t||"Required.",ip:t=>!t||/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)||"Invalid IP address"},error:null}},watch:{active:function(t){this.data.active=t}},methods:{toggle(){var t=this;this.fetching=!0,this.error="",r.Z.post(this.path,{active:this.data.active}).then((function(e){console.log(e),e.data.success||(t.error=e.data.error)})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1,t.$emit("save")}))},addItem(){this.item={},this.drawer=!0},deleteItem(t){this.$confirm("Delete IP?").then((e=>{if(e){var a=this;this.fetching=!0,this.error="",r.Z.post(this.path,{line:t}).then((function(t){console.log(t),t.data.success||(a.error=t.data.error)})).catch((function(t){console.log(t)})).finally((()=>{this.fetching=!1,a.$emit("save")}))}}))},saveItem(){var t=this;this.error="",this.$refs.form.validate()&&(this.fetching=!0,r.Z.post(this.path,this.item).then((e=>{console.log(e),e.data.error?t.error=e.data.error:(t.drawer=!1,t.$emit("save"))})).catch((t=>console.log(t))).finally((()=>{this.fetching=!1})))}}},o=n,l=a(1001),c=(0,l.Z)(o,i,s,!1,null,null,null),d=c.exports},84285:function(t,e,a){a.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("v-container",{attrs:{"fill-height":""}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[a("v-layout",{attrs:{row:""}},[a("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),a("h2",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.message))])])],1)],1)],1)],1)},s=[],r={name:"Loading",data:()=>({}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},n=r,o=a(1001),l=(0,o.Z)(n,i,s,!1,null,null,null),c=l.exports},75568:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.error?a("v-alert",{attrs:{type:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.enablingSSL?a("v-alert",{staticClass:"ma-0"},[a("strong",[t._v("Enabling SSL")])]):t._e(),t.data.dns&&t.data.dns.updating?a("v-alert",{staticClass:"ma-0"},[a("strong",[t._v("Checking DNS..")])]):t._e(),t.authRequired?a("v-alert",{staticClass:"ma-0"},[a("strong",[t._v("DNS auth required: ")]),a("v-btn",{on:{click:function(e){return t.authPrompt()}}},[t._v("Fix")])],1):t._e(),a("Loading",{attrs:{value:t.loading}}),a("v-card",{staticClass:"pa-3",attrs:{loading:t.fetching}},[a("v-list",[!t.authRequired&&t.data.server&&t.data.dns&&t.data.dns.A!=t.data.server.ip?a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" DNS mismatch ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.data.dns.A)+" != "+t._s(t.data.server.ip)+" "),t.data.dns.not_set?a("v-btn",{on:{click:function(e){return t.fixDomainDns(t.data.domain)}}},[t._v("Fix")]):t._e()],1)],1)],1):t._e(),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Disk Usage ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t._f("prettyBytes")(1024*t.data.disk_usage))+" ")])],1)],1),a("v-divider"),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" FTP Host ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.data.domain)+" "),a("Copy",{attrs:{val:t.data.domain}})],1)],1)],1),a("v-divider"),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Username ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.data.domain)+" "),a("Copy",{attrs:{val:t.data.domain}})],1)],1)],1),a("v-divider"),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Password ")]),a("v-list-item-subtitle",[a("Edit",{attrs:{val:t.data.ftp_password,label:"FTP Password",name:"password",password:"",path:"sites/"+this.siteId+"/update"},on:{save:function(e){return t.fetchData(!0)}}})],1)],1)],1),a("v-divider"),t.data.origin?a("div",[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Password protection ")]),a("v-list-item-subtitle",[a("v-switch",{attrs:{label:"Active"},on:{change:function(e){return t.toggleAuth()}},model:{value:t.data.auth.active,callback:function(e){t.$set(t.data.auth,"active",e)},expression:"data.auth.active"}})],1)],1)],1),a("v-divider"),t.data.auth.active?a("div",[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Username ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.data.auth.username)+" "),a("Copy",{attrs:{val:t.data.auth.username,text:""}})],1)],1)],1),a("v-divider"),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Password ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.data.auth.password)+" "),a("Edit",{attrs:{val:t.data.auth.password,label:"Auth Password",name:"password",password:"",path:"sites/"+this.siteId+"/auth"},on:{save:function(e){return t.fetchData(!0)}}})],1)],1)],1)],1):t._e(),a("v-divider")],1):t._e(),a("IPRestrictions",{attrs:{active:t.data.ip_restrictions.active,items:t.data.ip_restrictions.ips,path:"sites/"+this.siteId+"/iprestrictions"},on:{save:function(e){return t.fetchData(!0)}}})],1)],1)],1)},s=[],r=a(4296),n=a(84285),o=a(37428),l=a(65924),c=a(60862),d={components:{Loading:n.Z,Copy:o.Z,Edit:l.Z,IPRestrictions:c.Z},data(){return{siteId:null,post:null,error:null,data:{disk_usage:0,server:{},app:{},dns:{},auth:{},ip_restrictions:{}},details:"",loading:!1,fetching:!1,enablingSSL:!1,passwordPanel:[!1],passwordFormValid:!0,showPassword:!1,password:"",rules:{required:t=>!!t||"Required.",min:t=>t.length>=8||"Min 8 characters",emailMatch:()=>"The email and password you entered don't match"},alias:{domain:"",dns:!0},copyText:"Copy",timer:null,authRequired:!1}},created(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData(t){var e=this;this.error="",this.siteId=this.$route.params.id,clearTimeout(e.timer),this.fetching=!0,r.Z.get("sites/"+this.siteId+"/summary",{clearCacheEntry:t}).then((function(t){console.log(t),t.data.item&&(e.data=t.data.item),e.data.domain&&(document.title="Summary | "+e.data.domain)})).catch((function(t){console.log(t)})).finally((function(){e.fetching=!1,e.data.dns&&e.data.dns.updating&&(console.log("checking dns"),e.timer=setTimeout((function(){e.fetchData(!0)}),1e4))}))},fixDomainDns(){var t=this;this.error="",this.loading=!0,r.Z.post("sites/"+t.siteId+"/fixdns",{}).then((function(e){console.log(e),t.loading=!1,e.data.success?t.fetchData(!0):"auth"==e.data.error?t.authRequired=!0:t.error=e.data.error})).catch((function(t){console.log(t)}))},authPrompt(){this.authRequired=!1,window.open("https://serverwand.com/account/services/"+this.data.server.dns)},toggleAuth(){var t=this;this.fetching=!0,this.error="",r.Z.post("sites/"+this.siteId+"/auth",{status:this.data.auth.active}).then((function(e){console.log(e),e.data.success?t.fetchData(!0):t.error=e.data.error})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1}))}}},v=d,u=a(1001),h=(0,u.Z)(v,i,s,!1,null,null,null),m=h.exports}}]);
//# sourceMappingURL=5568.2111af73.js.map