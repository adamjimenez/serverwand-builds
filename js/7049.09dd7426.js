"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[7049],{11297:function(e,t,a){a.d(t,{Z:function(){return d}});var l=a(66252);function o(e,t,a,o,s,r){const n=(0,l.up)("v-icon"),d=(0,l.up)("v-alert"),i=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.j4)(i,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",width:"600"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{title:a.message,color:"primary"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(n,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1},8,["title"])])),_:1},8,["modelValue"])}var s={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},r=a(83744);const n=(0,r.Z)(s,[["render",o]]);var d=n},67049:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var l=a(66252),o=a(3577);const s={class:"text-start"},r={class:"text-start"},n=["onClick"],d={class:"text-start"},i={class:"text-start"},u={class:"text-start"};function c(e,t,a,c,h,p){const m=(0,l.up)("v-alert"),g=(0,l.up)("Loading"),f=(0,l.up)("v-checkbox"),v=(0,l.up)("v-list-item"),w=(0,l.up)("v-switch"),_=(0,l.up)("v-data-table"),k=(0,l.up)("v-card-text"),y=(0,l.up)("v-card"),W=(0,l.up)("v-btn"),V=(0,l.up)("v-card-title"),x=(0,l.up)("v-textarea"),b=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[h.error?((0,l.wg)(),(0,l.j4)(m,{key:0,type:"error",text:h.error},null,8,["text"])):(0,l.kq)("",!0),(0,l.Wm)(g,{value:h.loading},null,8,["value"]),(0,l.Wm)(y,{loading:h.fetching},{default:(0,l.w5)((()=>[h.items.length?((0,l.wg)(),(0,l.j4)(_,{key:0,headers:h.headers,items:h.items,class:"results"},{body:(0,l.w5)((e=>[(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.items,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",s,[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)]),(0,l._)("td",r,[(0,l.Wm)(w,{modelValue:e.online,"onUpdate:modelValue":t=>e.online=t,label:"Online",onChange:t=>p.toggle(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),(0,l._)("td",{class:"text-start",onClick:t=>p.view(e)},(0,o.zw)(e.pid),9,n),(0,l._)("td",d,(0,o.zw)(e.name),1),(0,l._)("td",i,(0,o.zw)(e.status),1),(0,l._)("td",u,(0,o.zw)(e.port),1)])))),128))])])),_:1},8,["headers","items"])):((0,l.wg)(),(0,l.j4)(k,{key:1},{default:(0,l.w5)((()=>[(0,l.Uk)(" No apps ")])),_:1}))])),_:1},8,["loading"]),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(V,{"primary-title":""},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{onClick:t[0]||(t[0]=e=>p.deleteApps()),disabled:!h.selected},{default:(0,l.w5)((()=>[(0,l.Uk)(" Delete ")])),_:1},8,["disabled"])])),_:1})])])),_:1}),(0,l.Wm)(b,{app:"",modelValue:h.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>h.dialog=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Output Log: ")])),_:1}),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x,{readonly:"",value:h.output_log,"auto-grow":""},null,8,["value"])])),_:1})])),_:1}),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Error Log: ")])),_:1}),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x,{readonly:"",value:h.error_log,"auto-grow":""},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}a(70560);var h=a(1006),p=a(11297),m={components:{Loading:p.Z},data(){return{error:"",items:[],data:{},loading:!1,fetching:!1,dialog:!1,serverId:0,selected:!1,headers:[{title:"",key:""},{title:"",key:""},{title:"PID",key:"id"},{title:"Name",key:"name"},{title:"Status",key:"status"},{title:"Ports",key:"port"}],error_log:"",output_log:""}},watch:{items:{handler:function(e){for(var t=0;t<e.length;t++)if(e[t].selected)return void(this.selected=!0);this.selected=!1},deep:!0}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){this.error="",this.fetching=!0,h.Z.get("servers/"+this.serverId+"/apps").then((e=>{if(console.log(e),e.data.error)return this.error=e.data.error,!1;this.data=e.data.item,this.items=e.data.apps,document.title="Apps | "+this.data.name})).catch((e=>{console.log(e)})).finally((()=>{this.fetching=!1}))},toggle(e){this.loading=!0,this.error="";var t=e.active?"start":"stop";h.Z.post("servers/"+this.serverId+"/apps",{name:e.name,action:t}).then((e=>{console.log(e),e.data.success?this.fetchData():this.error=e.data.error})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},deleteApps(){this.fetching=!0;let e=[];this.items.forEach((t=>{t.selected&&e.push(t)})),h.Z.post("servers/"+this.serverId+"/apps",{ids:e}).then((()=>{this.fetchData()})).catch((e=>{console.log(e)})).finally((()=>{this.fetching=!1}))},view(e){this.dialog=!0,this.output_log=e.output_log,this.error_log=e.error_log}}},g=a(83744);const f=(0,g.Z)(m,[["render",c]]);var v=f}}]);
//# sourceMappingURL=7049.09dd7426.js.map