(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[4691],{84691:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return h}});var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[e.error?t("v-alert",{attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e(),t("EditFile",{ref:"editFile",attrs:{serverId:e.serverId,action:"files"},on:{complete:function(r){return e.fetchLog()},error:e.handleError,loading:e.handleLoading}}),t("v-card",{attrs:{loading:e.fetching}},[t("v-card-title",{attrs:{"primary-title":""}},[t("v-select",{attrs:{items:e.logs,label:"Log"},on:{change:e.fetchLog}}),t("v-text-field",{attrs:{label:"Filter"},model:{value:e.filter,callback:function(r){e.filter=r},expression:"filter"}}),t("v-btn",{attrs:{disabled:!e.log},on:{click:function(r){return e.fetchLog()}}},[t("i",{staticClass:"fas fa-redo-alt",class:e.fetching?"fa-spin":""})])],1),t("v-card-text",["serverstatus"==e.log?t("div",{staticClass:"serverstatus",domProps:{innerHTML:e._s(e.logContent)}}):t("div",{staticClass:"pre",domProps:{innerHTML:e._s(e.filteredLog)}})])],1)],1)},a=[],o=t(77673),i=t(16198),s=(t(74916),t(77601),t(23123),t(15306),t(69600),t(57327),t(41539),t(26699),t(32023),t(68309),t(4296)),c=t(32724),u={components:{EditFile:c.Z},data:function(){return{error:"",data:{users:{}},system_user:{user:"",password:""},cronjob:{name:"",user:"",command:"",minute:"",hour:"",dom:"",mon:"",dow:""},cronjobs:[],rules:{required:function(e){return!!e||"Required."},alpha:function(e){return/^[a-zA-Z]+$/g.test(e)||"Must contain a-z characters only"},minute:function(e){return"*"==e||e>=0&&e<60||"0-59 or *"},hour:function(e){return"*"==e||e>=0&&e<24||"0-23 or *"},dom:function(e){return"*"==e||e>=1&&e<=31||"1-31 or *"},mon:function(e){return"*"==e||e>=1&&e<12||"1-12 or *"},dow:function(e){return"*"==e||e>=1&&e<7||"1-7 or *"}},details:"",fetching:!0,userDrawer:!1,cronjobDrawer:!1,serverId:0,logs:[{value:"journal",text:"Journal"},{value:"auth",text:"Auth"},{value:"apache_access",text:"Apache Access"},{value:"apache_error",text:"Apache Error"},{value:"mail",text:"Mail"},{value:"mysql",text:"MySQL"},{value:"fail2ban",text:"Fail2ban"},{value:"letsencrypt",text:"Letsencrypt"},{value:"serverstatus",text:"Server Status"}],log:"",logContent:"",filter:""}},created:function(){this.serverId=this.$route.params.id,this.fetchData();var e=this;window.onhashchange=(0,i.Z)((0,o.Z)().mark((function r(){var t,n,a,i;return(0,o.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t=location.hash.substr(1),t){r.next=3;break}return r.abrupt("return");case 3:return n=t,a=1,-1!==n.indexOf(":")&&(i=n.split(":"),n=i[0],a=i[1]),e.fecthing=!0,r.next=9,e.$refs.editFile.open({id:n,name:n});case 9:e.$refs.editFile.goToLine(a),location.hash="";case 11:case"end":return r.stop()}}),r)})))},computed:{filteredLog:function(){var e=this,r=/(\/(var|etc)[^\s:\\']+( on line [0-9]+))/g,t=this.logContent.split("\n");return t.filter((function(r){return r.toLowerCase().includes(e.filter.toLowerCase())})).join("\n").replace(r,'<a href="'+location.pathname+'#$1">$1</a>').replace(/( on line )([0-9]+)/g,":$2").replace(/(PHP Fatal error)/g,'<span class="error">$1</span>').replace(/(PHP Parse error)/g,'<span class="error">$1</span>').replace(/(PHP Warning)/g,'<span class="warning">$1</span>')}},methods:{fetchData:function(){var e=this;this.error="",this.fetching=!0,s.Z.get("servers/"+this.serverId).then((function(r){if(console.log(r),r.data.error)return e.error=r.data.error,!1;e.data=r.data.item,document.title="Logs | "+e.data.name})).catch((function(e){console.log(e)})).finally((function(){e.fetching=!1}))},fetchLog:function(e){var r=this;if(this.fetching=!0,e)r.log=e;else if(!r.log)return;this.logContent="loading..",s.Z.post("servers/"+this.serverId+"/fetchlog",{log:r.log}).then((function(e){console.log(e),r.logContent=e.data.content})).finally((function(){r.fetching=!1}))},handleError:function(e){this.error=e},handleLoading:function(e){this.fetching=e}}},l=u,f=t(1001),d=(0,f.Z)(l,n,a,!1,null,null,null),h=d.exports},84964:function(e,r,t){var n=t(5112),a=n("match");e.exports=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[a]=!1,"/./"[e](r)}catch(n){}}return!1}},10647:function(e,r,t){var n=t(1702),a=t(47908),o=Math.floor,i=n("".charAt),s=n("".replace),c=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,r,t,n,f,d){var h=t+e.length,v=n.length,g=l;return void 0!==f&&(f=a(f),g=u),s(d,g,(function(a,s){var u;switch(i(s,0)){case"$":return"$";case"&":return e;case"`":return c(r,0,t);case"'":return c(r,h);case"<":u=f[c(s,1,-1)];break;default:var l=+s;if(0===l)return a;if(l>v){var d=o(l/10);return 0===d?a:d<=v?void 0===n[d-1]?i(s,1):n[d-1]+i(s,1):a}u=n[l-1]}return void 0===u?"":u}))}},3929:function(e,r,t){var n=t(17854),a=t(47850),o=n.TypeError;e.exports=function(e){if(a(e))throw o("The method doesn't accept regular expressions");return e}},26699:function(e,r,t){"use strict";var n=t(82109),a=t(41318).includes,o=t(47293),i=t(51223),s=o((function(){return!Array(1).includes()}));n({target:"Array",proto:!0,forced:s},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},69600:function(e,r,t){"use strict";var n=t(82109),a=t(1702),o=t(68361),i=t(45656),s=t(9341),c=a([].join),u=o!=Object,l=s("join",",");n({target:"Array",proto:!0,forced:u||!l},{join:function(e){return c(i(this),void 0===e?",":e)}})},77601:function(e,r,t){"use strict";t(74916);var n=t(82109),a=t(17854),o=t(46916),i=t(1702),s=t(60614),c=t(70111),u=function(){var e=!1,r=/[ac]/;return r.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===r.test("abc")&&e}(),l=a.Error,f=i(/./.test);n({target:"RegExp",proto:!0,forced:!u},{test:function(e){var r=this.exec;if(!s(r))return f(this,e);var t=o(r,this,e);if(null!==t&&!c(t))throw new l("RegExp exec method returned something other than an Object or null");return!!t}})},32023:function(e,r,t){"use strict";var n=t(82109),a=t(1702),o=t(3929),i=t(84488),s=t(41340),c=t(84964),u=a("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(s(i(this)),s(o(e)),arguments.length>1?arguments[1]:void 0)}})},15306:function(e,r,t){"use strict";var n=t(22104),a=t(46916),o=t(1702),i=t(27007),s=t(47293),c=t(19670),u=t(60614),l=t(19303),f=t(17466),d=t(41340),h=t(84488),v=t(31530),g=t(58173),p=t(10647),m=t(97651),x=t(5112),$=x("replace"),b=Math.max,w=Math.min,y=o([].concat),L=o([].push),C=o("".indexOf),k=o("".slice),j=function(e){return void 0===e?e:String(e)},E=function(){return"$0"==="a".replace(/./,"$0")}(),_=function(){return!!/./[$]&&""===/./[$]("a","$0")}(),A=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));i("replace",(function(e,r,t){var o=_?"$":"$0";return[function(e,t){var n=h(this),o=void 0==e?void 0:g(e,$);return o?a(o,e,n,t):a(r,d(n),e,t)},function(e,a){var i=c(this),s=d(e);if("string"==typeof a&&-1===C(a,o)&&-1===C(a,"$<")){var h=t(r,i,s,a);if(h.done)return h.value}var g=u(a);g||(a=d(a));var x=i.global;if(x){var $=i.unicode;i.lastIndex=0}var E=[];while(1){var _=m(i,s);if(null===_)break;if(L(E,_),!x)break;var A=d(_[0]);""===A&&(i.lastIndex=v(s,f(i.lastIndex),$))}for(var I="",P=0,F=0;F<E.length;F++){_=E[F];for(var M=d(_[0]),Z=b(w(l(_.index),s.length),0),S=[],H=1;H<_.length;H++)L(S,j(_[H]));var O=_.groups;if(g){var T=y([M],S,Z,s);void 0!==O&&L(T,O);var D=d(n(a,void 0,T))}else D=p(M,s,Z,S,O,a);Z>=P&&(I+=k(s,P,Z)+D,P=Z+M.length)}return I+k(s,P)}]}),!A||!E||_)}}]);
//# sourceMappingURL=4691-legacy.95a54a6c.js.map