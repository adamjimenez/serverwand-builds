"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[7240],{84285:function(t,e,i){i.d(e,{Z:function(){return r}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[i("v-container",{attrs:{"fill-height":""}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[i("v-layout",{attrs:{row:""}},[i("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),i("h2",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.message))])])],1)],1)],1)],1)},n=[],o={name:"Loading",data:()=>({}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},s=o,c=i(1001),l=(0,c.Z)(s,a,n,!1,null,null,null),r=l.exports},67240:function(t,e,i){i.r(e),i.d(e,{default:function(){return v}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Loading",{attrs:{value:t.loading}}),i("v-card",{staticClass:"pa-3",attrs:{loading:t.fetching}},[i("v-data-table",{staticClass:"results",attrs:{headers:t.headers,items:t.invoices,"mobile-breakpoint":"0"},on:{"click:row":t.view},scopedSlots:t._u([{key:"item.created",fn:function(e){var i=e.item;return[t._v(" "+t._s(t._f("formatDate")(i.created))+" ")]}},{key:"item.actions",fn:function(e){var a=e.item;return[i("v-btn",{attrs:{icon:"",disabled:t.fetching,loading:t.fetching},on:{click:function(e){return t.deleteItem(a.id)}}},[i("v-icon",{attrs:{small:""}},[t._v("delete")])],1)]}}])})],1),i("v-card",[i("div",[i("v-card-title",{attrs:{"primary-title":""}},[i("v-btn",{on:{click:function(e){return t.addItem()}}},[t._v(" Add invoice ")])],1)],1)]),i("v-dialog",{attrs:{app:"",temporary:"",right:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[t._v(" Invoice ")]),i("v-card-text",[i("v-form",[i("v-container",t._l(t.data.items,(function(e,a){return i("v-row",{key:a},[i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"Domain",required:""},model:{value:e.domain,callback:function(i){t.$set(e,"domain",i)},expression:"item.domain"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"Description",required:""},model:{value:e.description,callback:function(i){t.$set(e,"description",i)},expression:"item.description"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"Amount",required:""},model:{value:e.amount,callback:function(i){t.$set(e,"amount",i)},expression:"item.amount"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[a>0?i("v-btn",{on:{click:function(e){return t.removeRow(a)}}},[i("v-icon",[t._v("fas fa-minus")])],1):t._e(),a+1===t.data.items.length?i("v-btn",{on:{click:function(e){return t.addRow()}}},[i("v-icon",[t._v("fas fa-plus")])],1):t._e()],1)],1)})),1)],1),i("div",{staticClass:"mt-5"},[i("v-btn",{attrs:{loading:t.loading,color:"success"},on:{click:t.saveItem}},[t._v(" Save ")])],1)],1)],1)],1),i("v-dialog",{attrs:{app:"",temporary:"",right:""},model:{value:t.dialogInvoice,callback:function(e){t.dialogInvoice=e},expression:"dialogInvoice"}},[i("v-card",[i("v-card-title",[t._v(" Invoice "+t._s(t.invoice_id)+" ")]),i("v-card-text",[i("v-form",[i("v-container",[i("div",[t._v(" "+t._s(t.invoice.company)),i("br"),t._v(" "+t._s(t.invoice.name)+" "+t._s(t.invoice.surnname)),i("br"),t._v(" "+t._s(t.invoice.address)),i("br"),t._v(" "+t._s(t.invoice.city)),i("br"),t._v(" "+t._s(t.invoice.postcode)+" ")]),t._l(t.invoice.items,(function(e,a){return i("v-row",{key:a},[i("v-col",{attrs:{cols:"12",md:"3"}},[t._v(" "+t._s(e.domain)+" ")]),i("v-col",{attrs:{cols:"12",md:"3"}},[t._v(" "+t._s(e.description)+" ")]),i("v-col",{attrs:{cols:"12",md:"3"}},[t._v(" £"+t._s(e.amount)+" ")])],1)})),i("v-row",[i("v-col",{attrs:{cols:"12",md:"3"}}),i("v-col",{attrs:{cols:"12",md:"3"}},[t._v(" Total: ")]),i("v-col",{attrs:{cols:"12",md:"3"}},[t._v(" £"+t._s(t.invoice.total)+" ")])],1)],2)],1)],1)],1)],1)],1)},n=[],o=i(4296),s=i(84285),c={components:{Loading:s.Z},data(){return{fetching:!1,loading:!1,id:null,error:null,data:{items:[{}]},invoice:{},invoices:[],dialog:!1,dialogInvoice:!1,invoice_id:null,details:"",rules:{required:t=>!!t||"Required.",min:t=>t.length>=8||"Min 8 characters"},domain:{name:""},headers:[{text:"Invoice ",value:"id"},{text:"Date ",value:"created"},{text:"Total ",value:"total"},{text:"Status ",value:"payment_status",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{text:" ",value:"actions"}]}},created(){this.id=this.$route.params.id,this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData(){var t=this;this.error="",this.fetching=!0,o.Z.get("users/"+this.id+"/invoices").then((function(e){console.log(e),t.invoices=e.data.invoices,document.title="Invoices"})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1}))},addItem(){this.domain.name="",this.dialog=!0},saveItem(){var t=this;this.data.items.length&&(this.details="",this.dialog=!0,this.error="",o.Z.post("users/"+this.id+"/invoices",this.data).then((function(e){console.log(e),e.data.success?(t.data.invoice="",t.dialog=!1,t.fetchData()):t.error=e.data.error})).catch((function(t){console.log(t)})))},deleteItem(t){this.$confirm("Delete invoice?").then((e=>{if(e){var i=this;this.error="",this.dialog=!0,this.loading=!0,o.Z.post("users/"+this.id+"/invoices",{delete:1,domain:t}).then((function(t){console.log(t),t.data.error?i.error=t.data.error:i.fetchData()})).catch((function(t){console.log(t)})).finally((function(){i.dialog=!1,i.loading=!1}))}}))},addRow(){this.data.items.push({})},removeRow(t){this.data.items.splice(t,1)},view(t){this.invoice_id=t.id;var e=this;e.fetching=!0,o.Z.get("users/"+this.id+"/invoices/"+this.invoice_id).then((function(t){e.invoice=t.data.invoice,e.dialogInvoice=!0})).catch((function(t){console.log(t)})).finally((function(){e.fetching=!1}))}}},l=c,r=i(1001),d=(0,r.Z)(l,a,n,!1,null,null,null),v=d.exports}}]);
//# sourceMappingURL=7240.c7036829.js.map