"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[6322],{66322:function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var i=n(20641),r=n(90033);function o(e,t,n,o,a,l){var u=(0,i.g2)("v-alert"),c=(0,i.g2)("v-icon"),s=(0,i.g2)("v-btn"),d=(0,i.g2)("v-spacer"),f=(0,i.g2)("v-switch"),h=(0,i.g2)("v-card-actions"),v=(0,i.g2)("v-tooltip"),g=(0,i.g2)("v-data-table"),p=(0,i.g2)("v-card-text"),m=(0,i.g2)("v-card");return(0,i.uX)(),(0,i.CE)("div",null,[a.error?((0,i.uX)(),(0,i.Wv)(u,{key:0,type:"error",text:a.error},null,8,["text"])):(0,i.Q3)("",!0),(0,i.bF)(m,{loading:a.fetching},{default:(0,i.k6)((function(){return[(0,i.bF)(h,null,{default:(0,i.k6)((function(){return[(0,i.bF)(s,{onClick:l.fetchData,loading:a.fetching},{default:(0,i.k6)((function(){return[(0,i.bF)(c,{size:"small"},{default:(0,i.k6)((function(){return t[4]||(t[4]=[(0,i.eW)("mdi:mdi-reload")])})),_:1})]})),_:1},8,["onClick","loading"]),a.selected.length?((0,i.uX)(),(0,i.Wv)(s,{key:0,onClick:t[0]||(t[0]=function(e){return l.unban()}),loading:"unban"===a.loading},{default:(0,i.k6)((function(){return[(0,i.bF)(c,{size:"small"},{default:(0,i.k6)((function(){return t[5]||(t[5]=[(0,i.eW)("mdi:mdi-delete")])})),_:1})]})),_:1},8,["loading"])):(0,i.Q3)("",!0),(0,i.bF)(d),(0,i.bF)(f,{modelValue:a.active,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.active=e}),label:"Active",onChange:t[2]||(t[2]=function(e){return l.toggle()}),"hide-details":"",color:"primary",loading:"toggle"===a.loading},null,8,["modelValue","loading"])]})),_:1}),a.items.length?((0,i.uX)(),(0,i.Wv)(g,{key:0,modelValue:a.selected,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.selected=e}),headers:a.headers,items:a.items,"items-per-page":100,"item-value":"ip","show-select":e.display.smAndUp,"mobile-breakpoint":"0",hover:"","row-props":l.rowProps,"items-per-page-text":"","fixed-header":"","hide-default-header":!e.display.smAndUp,style:{height:"calc(100vh - 280px)",overflow:"auto"},"onContextmenu:row":l.select},{"item.ip":(0,i.k6)((function(e){var t,n,o,a=e.item;return[(0,i.Lk)("span",null,[(0,i.bF)(v,{text:(null===(t=a.ip_data)||void 0===t?void 0:t.org)+", "+(null===(n=a.ip_data)||void 0===n?void 0:n.city)+", "+(null===(o=a.ip_data)||void 0===o?void 0:o.country)},{activator:(0,i.k6)((function(e){var t,n=e.props;return[(0,i.bF)(s,(0,i.v6)(n,{class:"fi fi-"+(null===a||void 0===a||null===(t=a.ip_data)||void 0===t||null===(t=t.country)||void 0===t?void 0:t.toLowerCase())+" fis",size:"x-small"}),null,16,["class"])]})),_:2},1032,["text"]),(0,i.eW)(" "+(0,r.v_)(a.ip),1)])]})),_:1},8,["modelValue","headers","items","show-select","row-props","hide-default-header","onContextmenu:row"])):((0,i.uX)(),(0,i.Wv)(p,{key:1},{default:(0,i.k6)((function(){return t[6]||(t[6]=[(0,i.eW)(" Empty ")])})),_:1}))]})),_:1},8,["loading"])])}n(50113),n(44114),n(54554),n(62010),n(26099),n(98992),n(72577),n(3949),n(23500);var a=n(74300),l={data:function(){return{error:"",items:[],data:{},loading:null,fetching:!1,serverId:0,selected:[],headers:[{title:"IP",key:"ip"},{title:"Jail",key:"jail"}],active:!1}},created:function(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData:function(){var e=this;this.error="",this.fetching=!0,a.A.get("servers/"+this.serverId+"/banned").then((function(t){console.log(t),e.active=t.data.active,e.items=t.data.items,document.title="Banned | "+t.data.item.name})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))},toggle:function(){var e=this;this.loading="toggle",this.error="",a.A.post("servers/"+this.serverId+"/services",{name:"fail2ban",start:this.active}).then((function(t){console.log(t),t.data.success?e.fetchData():e.error=t.data.error})).catch((function(e){console.log(e)})).finally((function(){e.loading=null}))},unban:function(){var e=this,t=[];this.selected.forEach((function(e){t.push(e)})),this.loading="unban",a.A.post("servers/"+this.serverId+"/banned",{items:t}).then((function(){return e.fetchData()})).catch((function(e){return console.log(e)})).finally((function(){return e.loading=null}))},handleComplete:function(e){this.error=e,this.fetchData()},rowProps:function(e){if(this.selected.find((function(t){return t===e.item.ip})))return{class:"bg-primary"}},select:function(e,t){e.preventDefault();var n=-1;this.selected.forEach((function(e,i){t.item.ip==e&&(n=i)})),n>-1?this.selected.splice(n,1):this.selected.push(t.item.ip)}}},u=n(66262);const c=(0,u.A)(l,[["render",o]]);var s=c},84606:function(e,t,n){var i=n(16823),r=TypeError;e.exports=function(e,t){if(!delete e[t])throw new r("Cannot delete property "+i(t)+" of "+i(e))}},50113:function(e,t,n){var i=n(46518),r=n(59213).find,o=n(6469),a="find",l=!0;a in[]&&Array(1)[a]((function(){l=!1})),i({target:"Array",proto:!0,forced:l},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},54554:function(e,t,n){var i=n(46518),r=n(48981),o=n(35610),a=n(91291),l=n(26198),u=n(34527),c=n(96837),s=n(1469),d=n(97040),f=n(84606),h=n(70597),v=h("splice"),g=Math.max,p=Math.min;i({target:"Array",proto:!0,forced:!v},{splice:function(e,t){var n,i,h,v,m,b,k=r(this),y=l(k),w=o(e,y),_=arguments.length;for(0===_?n=i=0:1===_?(n=0,i=y-w):(n=_-2,i=p(g(a(t),0),y-w)),c(y+n-i),h=s(k,i),v=0;v<i;v++)m=w+v,m in k&&d(h,v,k[m]);if(h.length=i,n<i){for(v=w;v<y-i;v++)m=v+i,b=v+n,m in k?k[b]=k[m]:f(k,b);for(v=y;v>y-i+n;v--)f(k,v-1)}else if(n>i)for(v=y-i;v>w;v--)m=v+i-1,b=v+n-1,m in k?k[b]=k[m]:f(k,b);for(v=0;v<n;v++)k[v+w]=arguments[v+2];return u(k,y-i+n),h}})},20116:function(e,t,n){var i=n(46518),r=n(72652),o=n(79306),a=n(28551),l=n(1767);i({target:"Iterator",proto:!0,real:!0},{find:function(e){a(this),o(e);var t=l(this),n=0;return r(t,(function(t,i){if(e(t,n++))return i(t)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},72577:function(e,t,n){n(20116)}}]);
//# sourceMappingURL=6322-legacy.53e3657e.js.map