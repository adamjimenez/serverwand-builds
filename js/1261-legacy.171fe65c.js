"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[1261],{61261:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var a=n(20641),i=n(90033);function r(e,t,n,r,l,o){var u=(0,a.g2)("v-alert"),s=(0,a.g2)("v-btn"),c=(0,a.g2)("v-tooltip"),d=(0,a.g2)("v-data-table"),f=(0,a.g2)("v-card-text"),v=(0,a.g2)("v-card"),h=(0,a.g2)("v-spacer"),g=(0,a.g2)("v-switch"),m=(0,a.g2)("v-card-actions");return(0,a.uX)(),(0,a.CE)("div",null,[l.error?((0,a.uX)(),(0,a.Wv)(u,{key:0,type:"error",text:l.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(v,{loading:l.fetching},{default:(0,a.k6)((function(){return[l.items.length?((0,a.uX)(),(0,a.Wv)(d,{key:0,modelValue:l.selected,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.selected=e}),headers:l.headers,items:l.items,"item-value":"ip","show-select":"",class:"results","mobile-breakpoint":"0"},{"item.ip":(0,a.k6)((function(e){var t,n,r,l=e.item;return[(0,a.Lk)("span",null,[(0,a.bF)(c,{text:(null===(t=l.ip_data)||void 0===t?void 0:t.org)+", "+(null===(n=l.ip_data)||void 0===n?void 0:n.city)+", "+(null===(r=l.ip_data)||void 0===r?void 0:r.country)},{activator:(0,a.k6)((function(e){var t,n=e.props;return[(0,a.bF)(s,(0,a.v6)(n,{class:["fi fi-"+(null===l||void 0===l||null===(t=l.ip_data)||void 0===t||null===(t=t.country)||void 0===t?void 0:t.toLowerCase())+" fis","ml-1"],size:"x-small"}),null,16,["class"])]})),_:2},1032,["text"]),(0,a.eW)(" "+(0,i.v_)(l.ip),1)])]})),_:1},8,["modelValue","headers","items"])):((0,a.uX)(),(0,a.Wv)(f,{key:1},{default:(0,a.k6)((function(){return[(0,a.eW)(" Empty ")]})),_:1}))]})),_:1},8,["loading"]),(0,a.bF)(v,null,{default:(0,a.k6)((function(){return[(0,a.bF)(m,null,{default:(0,a.k6)((function(){return[(0,a.bF)(s,{onClick:t[1]||(t[1]=function(e){return o.unban()}),disabled:0===l.selected.length,loading:"unban"===l.loading},{default:(0,a.k6)((function(){return[(0,a.eW)(" Unban ")]})),_:1},8,["disabled","loading"]),(0,a.bF)(h),(0,a.bF)(g,{modelValue:l.active,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.active=e}),label:"Active",onChange:t[3]||(t[3]=function(e){return o.toggle()}),"hide-details":"",color:"primary",loading:"toggle"===l.loading},null,8,["modelValue","loading"])]})),_:1})]})),_:1})])}n(44114),n(62010),n(26099),n(23500);var l=n(74300),o={data:function(){return{error:"",items:[],data:{},loading:null,fetching:!1,serverId:0,selected:[],headers:[{title:"",key:""},{title:"IP",key:"ip"},{title:"Jail",key:"jail"}],active:!1}},created:function(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData:function(){var e=this;this.error="",this.fetching=!0,l.A.get("servers/"+this.serverId+"/banned").then((function(t){console.log(t),e.active=t.data.active,e.items=t.data.items,document.title="Banned | "+t.data.item.name})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))},toggle:function(){var e=this;this.loading="toggle",this.error="",l.A.post("servers/"+this.serverId+"/services",{name:"fail2ban",start:this.active}).then((function(t){console.log(t),t.data.success?e.fetchData():e.error=t.data.error})).catch((function(e){console.log(e)})).finally((function(){e.loading=null}))},unban:function(){var e=this,t=[];this.selected.forEach((function(e){t.push(e)})),this.loading="unban",l.A.post("servers/"+this.serverId+"/banned",{items:t}).then((function(){return e.fetchData()})).catch((function(e){return console.log(e)})).finally((function(){return e.loading=null}))},handleComplete:function(e){this.error=e,this.fetchData()}}},u=n(66262);const s=(0,u.A)(o,[["render",r]]);var c=s}}]);
//# sourceMappingURL=1261-legacy.171fe65c.js.map