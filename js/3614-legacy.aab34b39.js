"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[3614],{83614:function(e,r,t){t.r(r),t.d(r,{default:function(){return g}});t(57327),t(41539);var n=t(66252),a=t(3577),o=["innerHTML"],i=["innerHTML"];function u(e,r,t,u,l,c){var s=(0,n.up)("v-alert"),f=(0,n.up)("EditFile"),d=(0,n.up)("v-select"),h=(0,n.up)("v-col"),v=(0,n.up)("v-text-field"),g=(0,n.up)("v-btn"),p=(0,n.up)("v-row"),m=(0,n.up)("v-card-title"),w=(0,n.up)("v-card-text"),x=(0,n.up)("v-card");return(0,n.wg)(),(0,n.iD)("div",null,[l.error?((0,n.wg)(),(0,n.j4)(s,{key:0,type:"error",text:l.error},null,8,["text"])):(0,n.kq)("",!0),(0,n.Wm)(f,{ref:"editFile",serverId:l.serverId,action:"files",onComplete:r[0]||(r[0]=function(e){return c.fetchLog()}),onError:c.handleError,onLoading:c.handleLoading},null,8,["serverId","onError","onLoading"]),(0,n.Wm)(x,{loading:l.fetching},{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{"primary-title":""},{default:(0,n.w5)((function(){return[(0,n.Wm)(p,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(h,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(d,{items:l.logs,label:"Log","onUpdate:modelValue":c.fetchLog,"hide-details":""},null,8,["items","onUpdate:modelValue"])]})),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(v,{label:"Filter",modelValue:l.filter,"onUpdate:modelValue":r[1]||(r[1]=function(e){return l.filter=e}),"hide-details":""},null,8,["modelValue"])]})),_:1}),(0,n.Wm)(h,{cols:"1"},{default:(0,n.w5)((function(){return[(0,n.Wm)(g,{onClick:r[2]||(r[2]=function(e){return c.fetchLog()}),disabled:!l.log,icon:""},{default:(0,n.w5)((function(){return[(0,n._)("i",{class:(0,a.C_)(["fas fa-redo-alt",l.fetching?"fa-spin":""])},null,2)]})),_:1},8,["disabled"])]})),_:1})]})),_:1})]})),_:1}),(0,n.Wm)(w,null,{default:(0,n.w5)((function(){return["serverstatus"==l.log?((0,n.wg)(),(0,n.iD)("div",{key:0,innerHTML:l.logContent,class:"serverstatus"},null,8,o)):((0,n.wg)(),(0,n.iD)("div",{key:1,class:"pre",innerHTML:c.filteredLog},null,8,i))]})),_:1})]})),_:1},8,["loading"])])}var l=t(50124),c=t(48534),s=(t(74916),t(77601),t(15306),t(69600),t(26699),t(32023),t(68309),t(1006)),f=t(51027),d={components:{EditFile:f.Z},data:function(){return{error:"",data:{users:{}},system_user:{user:"",password:""},cronjob:{name:"",user:"",command:"",minute:"",hour:"",dom:"",mon:"",dow:""},cronjobs:[],rules:{required:function(e){return!!e||"Required."},alpha:function(e){return/^[a-zA-Z]+$/g.test(e)||"Must contain a-z characters only"},minute:function(e){return"*"==e||e>=0&&e<60||"0-59 or *"},hour:function(e){return"*"==e||e>=0&&e<24||"0-23 or *"},dom:function(e){return"*"==e||e>=1&&e<=31||"1-31 or *"},mon:function(e){return"*"==e||e>=1&&e<12||"1-12 or *"},dow:function(e){return"*"==e||e>=1&&e<7||"1-7 or *"}},details:"",fetching:!0,userDrawer:!1,cronjobDrawer:!1,serverId:0,logs:[{value:"journal",title:"Journal"},{value:"auth",title:"Auth"},{value:"apache_access",title:"Apache Access"},{value:"other_vhosts",title:"Other Vhosts"},{value:"apache_error",title:"Apache Error"},{value:"mail",title:"Mail"},{value:"mysql",title:"MySQL"},{value:"fail2ban",title:"Fail2ban"},{value:"letsencrypt",title:"Let's Encrypt"},{value:"serverstatus",title:"Server Status"}],log:"",logContent:"",filter:""}},created:function(){this.serverId=this.$route.params.id,this.fetchData();var e=this;window.onhashchange=(0,c.Z)((0,l.Z)().mark((function r(){var t,n,a,o;return(0,l.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t=location.hash.substr(1),t){r.next=3;break}return r.abrupt("return");case 3:return n=t,a=1,-1!==n.indexOf(":")&&(o=n.split(":"),n=o[0],a=o[1]),e.fecthing=!0,r.next=9,e.$refs.editFile.open({id:n,name:n});case 9:e.$refs.editFile.goToLine(a),location.hash="";case 11:case"end":return r.stop()}}),r)})))},computed:{filteredLog:function(){var e=this,r=/(\/(var|etc)[^\s:\\']+( on line [0-9]+))/g,t=this.logContent.split("\n");return t.filter((function(r){return r.toLowerCase().includes(e.filter.toLowerCase())})).join("\n").replace(r,'<a href="'+location.pathname+'#$1">$1</a>').replace(/( on line )([0-9]+)/g,":$2").replace(/(PHP Fatal error)/g,'<span class="error">$1</span>').replace(/(PHP Parse error)/g,'<span class="error">$1</span>').replace(/(PHP Warning)/g,'<span class="warning">$1</span>')}},methods:{fetchData:function(){var e=this;this.error="",this.fetching=!0,s.Z.get("servers/"+this.serverId).then((function(r){if(console.log(r),r.data.error)return e.error=r.data.error,!1;e.data=r.data.item,document.title="Logs | "+e.data.name})).catch((function(e){console.log(e)})).finally((function(){e.fetching=!1}))},fetchLog:function(e){var r=this;if(this.fetching=!0,e)r.log=e;else if(!r.log)return;this.logContent="loading..",s.Z.post("servers/"+this.serverId+"/fetchlog",{log:r.log}).then((function(e){console.log(e),r.logContent=e.data.content})).finally((function(){r.fetching=!1}))},handleError:function(e){this.error=e},handleLoading:function(e){this.fetching=e}}},h=t(48118);const v=(0,h.Z)(d,[["render",u]]);var g=v},84964:function(e,r,t){var n=t(5112),a=n("match");e.exports=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[a]=!1,"/./"[e](r)}catch(n){}}return!1}},10647:function(e,r,t){var n=t(1702),a=t(47908),o=Math.floor,i=n("".charAt),u=n("".replace),l=n("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,r,t,n,f,d){var h=t+e.length,v=n.length,g=s;return void 0!==f&&(f=a(f),g=c),u(d,g,(function(a,u){var c;switch(i(u,0)){case"$":return"$";case"&":return e;case"`":return l(r,0,t);case"'":return l(r,h);case"<":c=f[l(u,1,-1)];break;default:var s=+u;if(0===s)return a;if(s>v){var d=o(s/10);return 0===d?a:d<=v?void 0===n[d-1]?i(u,1):n[d-1]+i(u,1):a}c=n[s-1]}return void 0===c?"":c}))}},3929:function(e,r,t){var n=t(47850),a=TypeError;e.exports=function(e){if(n(e))throw a("The method doesn't accept regular expressions");return e}},26699:function(e,r,t){var n=t(82109),a=t(41318).includes,o=t(47293),i=t(51223),u=o((function(){return!Array(1).includes()}));n({target:"Array",proto:!0,forced:u},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},69600:function(e,r,t){var n=t(82109),a=t(1702),o=t(68361),i=t(45656),u=t(9341),l=a([].join),c=o!==Object,s=c||!u("join",",");n({target:"Array",proto:!0,forced:s},{join:function(e){return l(i(this),void 0===e?",":e)}})},77601:function(e,r,t){t(74916);var n=t(82109),a=t(46916),o=t(60614),i=t(19670),u=t(41340),l=function(){var e=!1,r=/[ac]/;return r.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===r.test("abc")&&e}(),c=/./.test;n({target:"RegExp",proto:!0,forced:!l},{test:function(e){var r=i(this),t=u(e),n=r.exec;if(!o(n))return a(c,r,t);var l=a(n,r,t);return null!==l&&(i(l),!0)}})},32023:function(e,r,t){var n=t(82109),a=t(1702),o=t(3929),i=t(84488),u=t(41340),l=t(84964),c=a("".indexOf);n({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~c(u(i(this)),u(o(e)),arguments.length>1?arguments[1]:void 0)}})},15306:function(e,r,t){var n=t(22104),a=t(46916),o=t(1702),i=t(27007),u=t(47293),l=t(19670),c=t(60614),s=t(68554),f=t(19303),d=t(17466),h=t(41340),v=t(84488),g=t(31530),p=t(58173),m=t(10647),w=t(97651),x=t(5112),$=x("replace"),b=Math.max,y=Math.min,L=o([].concat),k=o([].push),W=o("".indexOf),_=o("".slice),C=function(e){return void 0===e?e:String(e)},j=function(){return"$0"==="a".replace(/./,"$0")}(),E=function(){return!!/./[$]&&""===/./[$]("a","$0")}(),I=!u((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));i("replace",(function(e,r,t){var o=E?"$":"$0";return[function(e,t){var n=v(this),o=s(e)?void 0:p(e,$);return o?a(o,e,n,t):a(r,h(n),e,t)},function(e,a){var i=l(this),u=h(e);if("string"==typeof a&&-1===W(a,o)&&-1===W(a,"$<")){var s=t(r,i,u,a);if(s.done)return s.value}var v=c(a);v||(a=h(a));var p,x=i.global;x&&(p=i.unicode,i.lastIndex=0);var $,j=[];while(1){if($=w(i,u),null===$)break;if(k(j,$),!x)break;var E=h($[0]);""===E&&(i.lastIndex=g(u,d(i.lastIndex),p))}for(var I="",M=0,A=0;A<j.length;A++){$=j[A];for(var F,Z=h($[0]),D=b(y(f($.index),u.length),0),H=[],P=1;P<$.length;P++)k(H,C($[P]));var S=$.groups;if(v){var T=L([Z],H,D,u);void 0!==S&&k(T,S),F=h(n(a,void 0,T))}else F=m(Z,u,D,H,S,a);D>=M&&(I+=_(u,M,D)+F,M=D+Z.length)}return I+_(u,M)}]}),!I||!j||E)}}]);
//# sourceMappingURL=3614-legacy.aab34b39.js.map