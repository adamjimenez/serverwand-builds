"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[4746],{84285:function(t,e,a){a.d(e,{Z:function(){return l}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("v-container",{attrs:{"fill-height":""}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[a("v-layout",{attrs:{row:""}},[a("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),a("h2",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.message))])])],1)],1)],1)],1)},i=[],r={name:"Loading",data:function(){return{}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},o=r,s=a(1001),c=(0,s.Z)(o,n,i,!1,null,null,null),l=c.exports},74746:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Loading",{attrs:{value:t.loading}}),a("v-card",{staticClass:"pa-3",attrs:{loading:t.fetching}},[a("v-data-table",{staticClass:"results",attrs:{headers:t.headers,items:t.subscriptions,"mobile-breakpoint":"0"},on:{"click:row":t.editItem},scopedSlots:t._u([{key:"item.created",fn:function(e){var a=e.item;return[t._v(" "+t._s(t._f("formatDate")(a.created))+" ")]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-btn",{attrs:{icon:"",disabled:t.fetching,loading:t.fetching},on:{click:function(e){return t.deleteItem(n.id)}}},[a("v-icon",{attrs:{small:""}},[t._v("delete")])],1)]}}])})],1),a("v-card",[a("div",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-btn",{on:{click:function(e){return t.addItem()}}},[t._v(" Add subscription ")])],1)],1)]),a("v-navigation-drawer",{attrs:{app:"",temporary:"",right:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-card",[a("v-card-title",[t._v(" Subscription ")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Domain",required:""},model:{value:t.data.domain,callback:function(e){t.$set(t.data,"domain",e)},expression:"data.domain"}}),a("v-select",{attrs:{items:t.products,label:"Product"},model:{value:t.data.product,callback:function(e){t.$set(t.data,"product",e)},expression:"data.product"}}),a("v-btn",{attrs:{disabled:t.dialog,loading:t.loading,color:"success"},on:{click:t.saveItem}},[t._v(" Save ")])],1)],1)],1)],1)},i=[],r=(a(41539),a(54747),a(68309),a(38862),a(4296)),o=a(84285),s={components:{Loading:o.Z},data:function(){return{fetching:!1,loading:!1,id:null,error:null,data:{},subscriptions:[],dialog:!1,details:"",rules:{required:function(t){return!!t||"Required."},min:function(t){return t.length>=8||"Min 8 characters"}},domain:{name:""},drawer:!1,products:[],headers:[{text:"Domain",value:"domain"},{text:"Name",value:"name"},{text:"Created",value:"created",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"}]}},created:function(){this.id=this.$route.params.id,this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;this.error="",this.fetching=!0,r.Z.get("users/"+this.id+"/subscriptions").then((function(e){console.log(e),t.subscriptions=e.data.subscriptions,document.title="Subscriptions"})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1})),r.Z.get("settings/products").then((function(e){console.log(e),e.data.products.forEach((function(e){t.products.push({text:e.name,value:e.id})}))})).catch((function(e){t.error=e})).finally((function(){t.fetching=!1}))},addItem:function(){this.data={},this.drawer=!0},editItem:function(t){this.data=JSON.parse(JSON.stringify(t)),this.drawer=!0},saveItem:function(){var t=this;if(this.data.product){this.details="",this.dialog=!0,this.error="";var e="users/"+this.id+"/subscriptions";this.data.id&&(e+="/"+this.data.id),r.Z.post(e,this.data).then((function(e){console.log(e),e.data.success?(t.data.subscription="",t.drawer=!1,t.fetchData()):t.error=e.data.error})).catch((function(e){console.log(e),t.dialog=!1})).finally((function(){t.dialog=!1}))}},deleteItem:function(t){var e=this;this.$confirm("Delete subscription?").then((function(a){if(a){var n=e;e.error="",e.dialog=!0,e.loading=!0,r.Z.post("users/"+e.id+"/subscriptions/"+t,{delete:1}).then((function(t){console.log(t),t.data.error?n.error=t.data.error:n.fetchData()})).catch((function(t){console.log(t)})).finally((function(){n.dialog=!1,n.loading=!1}))}}))}}},c=s,l=a(1001),d=(0,l.Z)(c,n,i,!1,null,null,null),u=d.exports}}]);
//# sourceMappingURL=4746-legacy.26185f88.js.map