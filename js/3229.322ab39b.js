"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[3229],{84285:function(e,t,a){a.d(t,{Z:function(){return c}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("v-container",{attrs:{"fill-height":""}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[a("v-layout",{attrs:{row:""}},[a("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),a("h2",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.message))])])],1)],1)],1)],1)},s=[],l={name:"Loading",data:()=>({}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},n=l,i=a(1001),o=(0,i.Z)(n,r,s,!1,null,null,null),c=o.exports},63229:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:""}},[a("v-flex",[e.error?a("v-alert",{attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e(),a("Loading",{attrs:{value:e.loading}}),a("v-card",{attrs:{flat:"",loading:e.fetching}},[a("v-card-title",{attrs:{"primary-title":""}},[a("div",{staticClass:"headline"},[e._v("Sites")])]),a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-select",{attrs:{items:e.server_opts,label:"Server"},model:{value:e.server,callback:function(t){e.server=t},expression:"server"}})],1)],1),a("v-data-table",{staticClass:"results",attrs:{headers:e.headers,items:e.filtered,"mobile-breakpoint":"0"},scopedSlots:e._u([{key:"item.domain",fn:function(t){var r=t.item;return[a("v-list-item",[a("SiteIcon",{attrs:{app:r.app}}),a("router-link",{staticClass:"ml-3",attrs:{to:"/sites/"+r.id+"/summary"}},[a("v-list-item-title",{domProps:{innerHTML:e._s(r.domain)}}),a("v-list-item-subtitle",[e._v(" "+e._s(e.servers[r.server])+" ")])],1)],1)]}},{key:"item.usage",fn:function(t){var r=t.item;return[r.usage>0?a("div",[e._v(" "+e._s(e._f("prettyBytes")(1024*r.usage))+" ")]):e._e()]}}])})],1)],1)],1)},s=[],l=a(4296),n=a(84285),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"wordpress"===e.app?a("v-icon",[e._v("fab fa-wordpress")]):"git"===e.app?a("v-icon",[e._v("fab fa-git")]):"node"===e.app?a("v-icon",[e._v("fab fa-node-js")]):"joomla"===e.app?a("v-icon",[e._v("fab fa-joomla")]):"drupal"===e.app?a("v-icon",[e._v("fab fa-drupal")]):"magento"===e.app?a("v-icon",[e._v("fab fa-magento")]):"roundcube"===e.app?a("v-icon",[e._v("fas fa-envelope")]):"shiftlib"===e.app?a("v-icon",[e._v("fas fa-user-edit")]):a("v-icon",[e._v("fas fa-sitemap")])},o=[],c={props:{app:null}},v=c,d=a(1001),u=(0,d.Z)(v,i,o,!1,null,null,null),f=u.exports,p={components:{Loading:n.Z,SiteIcon:f},data(){return{fetching:!1,loading:!1,error:"",filtered:[],items:[],servers:{},server:"*",server_opts:[{text:"All",value:"*"}],searchPanel:[!1],search:"",selected:[],headers:[{text:"Domain ",value:"domain"},{text:"IP ",value:"ip",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{text:"MX ",value:"mx",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{text:"Usage ",value:"usage",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"}]}},created(){document.title="Sites",this.fetchData()},watch:{server:function(){this.filtered=[],this.items.forEach((e=>{"*"!==this.server&&e.server!=this.server||this.filtered.push(e)})),localStorage.server=this.server}},methods:{fetchData(){var e=this;this.error="",this.fetching=!0,l.Z.get("sites/").then((function(t){if(console.log(t),t.data.error)return e.error=t.data.error,!1;e.items=t.data.items,t.data.items.forEach((t=>{e.filtered.push(t)})),l.Z.get("servers/").then((function(t){t.data.items.forEach((t=>{e.$set(e.servers,t.id,t.name),e.server_opts.push({text:t.name,value:t.id})}))}))})).catch((function(e){console.log(e)})).finally((function(){e.fetching=!1,localStorage.server&&(e.server=localStorage.server)}))}}},m=p,h=(0,d.Z)(m,r,s,!1,null,null,null),g=h.exports}}]);
//# sourceMappingURL=3229.322ab39b.js.map