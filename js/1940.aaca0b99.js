"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[1940],{81815:function(e,t,a){a.d(t,{A:function(){return o}});var r=a(20641);function s(e,t,a,s,i,l){const n=(0,r.g2)("v-icon"),o=(0,r.g2)("v-alert"),d=(0,r.g2)("v-dialog");return(0,r.uX)(),(0,r.Wv)(d,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",width:"600"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{title:a.message,color:"primary"},{prepend:(0,r.k6)((()=>[(0,r.bF)(n,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1},8,["title"])])),_:1},8,["modelValue"])}var i={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},l=a(66262);const n=(0,l.A)(i,[["render",s]]);var o=n},50246:function(e,t,a){a.d(t,{A:function(){return d}});var r=a(20641),s=a(53751);function i(e,t,a,i,l,n){const o=(0,r.g2)("v-icon");return"wordpress"===a.app?((0,r.uX)(),(0,r.Wv)(o,{key:0,onClick:(0,s.D$)(n.openLink,["stop"])},{default:(0,r.k6)((()=>[(0,r.eW)("fab fa-wordpress")])),_:1},8,["onClick"])):"git"===a.app?((0,r.uX)(),(0,r.Wv)(o,{key:1},{default:(0,r.k6)((()=>[(0,r.eW)("fab fa-git")])),_:1})):"node"===a.app?((0,r.uX)(),(0,r.Wv)(o,{key:2},{default:(0,r.k6)((()=>[(0,r.eW)("fab fa-node-js")])),_:1})):"joomla"===a.app?((0,r.uX)(),(0,r.Wv)(o,{key:3},{default:(0,r.k6)((()=>[(0,r.eW)("fab fa-joomla")])),_:1})):"drupal"===a.app?((0,r.uX)(),(0,r.Wv)(o,{key:4},{default:(0,r.k6)((()=>[(0,r.eW)("fab fa-drupal")])),_:1})):"magento"===a.app?((0,r.uX)(),(0,r.Wv)(o,{key:5},{default:(0,r.k6)((()=>[(0,r.eW)("fab fa-magento")])),_:1})):"roundcube"===a.app?((0,r.uX)(),(0,r.Wv)(o,{key:6},{default:(0,r.k6)((()=>[(0,r.eW)("fas fa-envelope")])),_:1})):"shiftlib"===a.app?((0,r.uX)(),(0,r.Wv)(o,{key:7},{default:(0,r.k6)((()=>[(0,r.eW)("fas fa-user-edit")])),_:1})):((0,r.uX)(),(0,r.Wv)(o,{key:8},{default:(0,r.k6)((()=>[(0,r.eW)("fas fa-sitemap")])),_:1}))}var l={props:{app:null,to:null},methods:{openLink(){this.to&&window.open(this.to)}}},n=a(66262);const o=(0,n.A)(l,[["render",i]]);var d=o},21940:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var r=a(20641),s=a(90033);const i={key:0},l={key:0};function n(e,t,a,n,o,d){const u=(0,r.g2)("v-alert"),f=(0,r.g2)("Loading"),p=(0,r.g2)("v-select"),v=(0,r.g2)("v-card-text"),c=(0,r.g2)("v-card"),h=(0,r.g2)("SiteIcon"),m=(0,r.g2)("v-list-item"),g=(0,r.g2)("v-data-table"),k=(0,r.g2)("v-col"),y=(0,r.g2)("v-row"),b=(0,r.g2)("v-layout");return(0,r.uX)(),(0,r.Wv)(b,{row:""},{default:(0,r.k6)((()=>[(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.bF)(k,{cols:"12"},{default:(0,r.k6)((()=>[o.error?((0,r.uX)(),(0,r.Wv)(u,{key:0,type:"error",text:o.error},null,8,["text"])):(0,r.Q3)("",!0),(0,r.bF)(f,{value:o.loading},null,8,["value"]),(0,r.bF)(c,{flat:"",loading:o.fetching},{default:(0,r.k6)((()=>[(0,r.bF)(c,{flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(v,null,{default:(0,r.k6)((()=>[(0,r.bF)(p,{modelValue:o.server,"onUpdate:modelValue":t[0]||(t[0]=e=>o.server=e),items:o.server_opts,label:"Server","hide-details":"",clearable:""},null,8,["modelValue","items"])])),_:1})])),_:1}),(0,r.bF)(g,{headers:d.headers,items:o.filtered},{"item.domain":(0,r.k6)((({item:e})=>[(0,r.bF)(m,{to:"/sites/"+e.id+"/summary",title:e.domain,subtitle:o.servers[e.server],class:"px-0"},(0,r.eX)({_:2},[o.display.smAndUp?{name:"prepend",fn:(0,r.k6)((()=>[(0,r.bF)(h,{app:e.app},null,8,["app"])])),key:"0"}:void 0]),1032,["to","title","subtitle"])])),"item.usage":(0,r.k6)((({item:e})=>[e.usage>0?((0,r.uX)(),(0,r.CE)("div",i,(0,s.v_)(d.prettyBytes(1024*e.usage)),1)):(0,r.Q3)("",!0)])),"item.transfer":(0,r.k6)((({item:e})=>[e.transfer>0?((0,r.uX)(),(0,r.CE)("div",l,(0,s.v_)(d.prettyBytes(1024*e.transfer)),1)):(0,r.Q3)("",!0)])),_:1},8,["headers","items"])])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})}a(44114);var o=a(74300),d=a(27274),u=a(81815),f=a(50246),p={components:{Loading:u.A,SiteIcon:f.A},data(){return{fetching:!1,loading:!1,error:"",filtered:[],items:[],servers:{},server:null,server_opts:[],searchPanel:[!1],search:"",selected:[],display:{}}},computed:{headers:function(){var e=[{title:"Site",key:"domain"}];return this.display.smAndUp&&e.push({title:"IP",key:"ip"}),this.display.mdAndUp&&e.push({title:"MX",key:"mx"},{title:"MX",key:"mx"}),this.display.lgAndUp&&e.push({title:"Size",key:"usage"},{title:"Transfer",key:"transfer"}),e}},created(){this.display=this.$vuetify.display,document.title="Sites",this.fetchData()},watch:{server:function(){this.filtered=[],this.items.forEach((e=>{this.server&&e.server!=this.server||this.filtered.push(e)})),this.server?localStorage.server=this.server:delete localStorage.server}},methods:{fetchData(){this.error="",this.fetching=!0,o.A.get("sites/").then((e=>{if(console.log(e),e.data.error)return this.error=e.data.error,!1;this.items=e.data.items,e.data.items.forEach((e=>{this.filtered.push(e)})),o.A.get("servers/").then((e=>{e.data.items.forEach((e=>{this.server_opts.push({title:e.name,value:e.id}),this.servers[e.id]=e.name}))}))})).catch((e=>{console.log(e)})).finally((()=>{this.fetching=!1,localStorage.server&&(this.server=localStorage.server)}))},prettyBytes(e){return d.A.prettyBytes(e)}}},v=a(66262);const c=(0,v.A)(p,[["render",n]]);var h=c}}]);
//# sourceMappingURL=1940.aaca0b99.js.map