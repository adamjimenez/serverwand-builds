"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[7240],{84285:function(t,e,i){i.d(e,{Z:function(){return l}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[i("v-container",{attrs:{"fill-height":""}},[i("v-card",{attrs:{color:"primary",dark:""}},[i("v-card-text",[i("v-layout",{attrs:{row:""}},[i("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),i("h2",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.message))])])],1)],1)],1)],1)},a=[],o={name:"Loading",data:function(){return{}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},c=o,r=i(1001),s=(0,r.Z)(c,n,a,!1,null,null,null),l=s.exports},67240:function(t,e,i){i.r(e),i.d(e,{default:function(){return v}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Loading",{attrs:{value:t.loading}}),i("v-card",{staticClass:"pa-3",attrs:{loading:t.fetching}},[i("v-data-table",{staticClass:"results",attrs:{headers:t.headers,items:t.invoices,"mobile-breakpoint":"0"},on:{"click:row":t.view},scopedSlots:t._u([{key:"item.created",fn:function(e){var i=e.item;return[t._v(" "+t._s(t._f("formatDate")(i.created))+" ")]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-btn",{attrs:{icon:"",disabled:t.fetching,loading:t.fetching},on:{click:function(e){return t.deleteItem(n.id)}}},[i("v-icon",{attrs:{small:""}},[t._v("delete")])],1)]}}])})],1),i("v-card",[i("div",[i("v-card-title",{attrs:{"primary-title":""}},[i("v-btn",{on:{click:function(e){return t.addItem()}}},[t._v(" Add invoice ")])],1)],1)]),i("v-dialog",{attrs:{app:"",temporary:"",right:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[t._v(" Invoice ")]),i("v-card-text",[i("v-form",[i("v-container",t._l(t.data.items,(function(e,n){return i("v-row",{key:n},[i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"Domain",required:""},model:{value:e.domain,callback:function(i){t.$set(e,"domain",i)},expression:"item.domain"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"Description",required:""},model:{value:e.description,callback:function(i){t.$set(e,"description",i)},expression:"item.description"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{label:"Amount",required:""},model:{value:e.amount,callback:function(i){t.$set(e,"amount",i)},expression:"item.amount"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[n>0?i("v-btn",{on:{click:function(e){return t.removeRow(n)}}},[i("v-icon",[t._v("fas fa-minus")])],1):t._e(),n+1===t.data.items.length?i("v-btn",{on:{click:function(e){return t.addRow()}}},[i("v-icon",[t._v("fas fa-plus")])],1):t._e()],1)],1)})),1)],1),i("div",{staticClass:"mt-5"},[i("v-btn",{attrs:{loading:t.loading,color:"success"},on:{click:t.saveItem}},[t._v(" Save ")])],1)],1)],1)],1),i("v-dialog",{attrs:{app:"",temporary:"",right:""},model:{value:t.dialogInvoice,callback:function(e){t.dialogInvoice=e},expression:"dialogInvoice"}},[i("v-card",[i("v-card-title",[t._v(" Invoice "+t._s(t.invoice_id)+" ")]),i("v-card-text",[i("v-form",[i("v-container",[i("div",[t._v(" "+t._s(t.invoice.company)),i("br"),t._v(" "+t._s(t.invoice.name)+" "+t._s(t.invoice.surnname)),i("br"),t._v(" "+t._s(t.invoice.address)),i("br"),t._v(" "+t._s(t.invoice.city)),i("br"),t._v(" "+t._s(t.invoice.postcode)+" ")]),t._l(t.invoice.items,(function(e,n){return i("v-row",{key:n},[i("v-col",{attrs:{cols:"12",md:"3"}},[t._v(" "+t._s(e.domain)+" ")]),i("v-col",{attrs:{cols:"12",md:"3"}},[t._v(" "+t._s(e.description)+" ")]),i("v-col",{attrs:{cols:"12",md:"3"}},[t._v(" £"+t._s(e.amount)+" ")])],1)})),i("v-row",[i("v-col",{attrs:{cols:"12",md:"3"}}),i("v-col",{attrs:{cols:"12",md:"3"}},[t._v(" Total: ")]),i("v-col",{attrs:{cols:"12",md:"3"}},[t._v(" £"+t._s(t.invoice.total)+" ")])],1)],2)],1)],1)],1)],1)],1)},a=[],o=(i(41539),i(68309),i(40561),i(4296)),c=i(84285),r={components:{Loading:c.Z},data:function(){return{fetching:!1,loading:!1,id:null,error:null,data:{items:[{}]},invoice:{},invoices:[],dialog:!1,dialogInvoice:!1,invoice_id:null,details:"",rules:{required:function(t){return!!t||"Required."},min:function(t){return t.length>=8||"Min 8 characters"}},domain:{name:""},headers:[{text:"Invoice ",value:"id"},{text:"Date ",value:"created"},{text:"Total ",value:"total"},{text:"Status ",value:"payment_status",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{text:" ",value:"actions"}]}},created:function(){this.id=this.$route.params.id,this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;this.error="",this.fetching=!0,o.Z.get("users/"+this.id+"/invoices").then((function(e){console.log(e),t.invoices=e.data.invoices,document.title="Invoices"})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1}))},addItem:function(){this.domain.name="",this.dialog=!0},saveItem:function(){var t=this;this.data.items.length&&(this.details="",this.dialog=!0,this.error="",o.Z.post("users/"+this.id+"/invoices",this.data).then((function(e){console.log(e),e.data.success?(t.data.invoice="",t.dialog=!1,t.fetchData()):t.error=e.data.error})).catch((function(t){console.log(t)})))},deleteItem:function(t){var e=this;this.$confirm("Delete invoice?").then((function(i){if(i){var n=e;e.error="",e.dialog=!0,e.loading=!0,o.Z.post("users/"+e.id+"/invoices",{delete:1,domain:t}).then((function(t){console.log(t),t.data.error?n.error=t.data.error:n.fetchData()})).catch((function(t){console.log(t)})).finally((function(){n.dialog=!1,n.loading=!1}))}}))},addRow:function(){this.data.items.push({})},removeRow:function(t){this.data.items.splice(t,1)},view:function(t){this.invoice_id=t.id;var e=this;e.fetching=!0,o.Z.get("users/"+this.id+"/invoices/"+this.invoice_id).then((function(t){e.invoice=t.data.invoice,e.dialogInvoice=!0})).catch((function(t){console.log(t)})).finally((function(){e.fetching=!1}))}}},s=r,l=i(1001),d=(0,l.Z)(s,n,a,!1,null,null,null),v=d.exports},40561:function(t,e,i){var n=i(82109),a=i(17854),o=i(51400),c=i(19303),r=i(26244),s=i(47908),l=i(65417),d=i(86135),v=i(81194),u=v("splice"),f=a.TypeError,m=Math.max,h=Math.min,g=9007199254740991,p="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var i,n,a,v,u,_,b=s(this),x=r(b),k=o(t,x),y=arguments.length;if(0===y?i=n=0:1===y?(i=0,n=x-k):(i=y-2,n=h(m(c(e),0),x-k)),x+i-n>g)throw f(p);for(a=l(b,n),v=0;v<n;v++)u=k+v,u in b&&d(a,v,b[u]);if(a.length=n,i<n){for(v=k;v<x-n;v++)u=v+n,_=v+i,u in b?b[_]=b[u]:delete b[_];for(v=x;v>x-n+i;v--)delete b[v-1]}else if(i>n)for(v=x-n;v>k;v--)u=v+n-1,_=v+i-1,u in b?b[_]=b[u]:delete b[_];for(v=0;v<i;v++)b[v+k]=arguments[v+2];return b.length=x-n+i,a}})}}]);
//# sourceMappingURL=7240-legacy.635a9d1e.js.map