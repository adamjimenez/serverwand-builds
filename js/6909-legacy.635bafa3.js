"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[6909],{46865:function(t,e,n){n.d(e,{A:function(){return d}});var a=n(20641),r=n(90033),o={ref:"container"};function i(t,e,n,i,l,u){var s=(0,a.g2)("v-tooltip"),d=(0,a.g2)("v-icon"),c=(0,a.g2)("v-btn");return(0,a.uX)(),(0,a.CE)("span",o,[n.text?((0,a.uX)(),(0,a.Wv)(s,{key:0,text:l.copyText,top:""},{activator:(0,a.k6)((function(t){var o=t.props;return[(0,a.Lk)("span",(0,a.v6)(o,{onClick:e[0]||(e[0]=function(t){return u.copy(n.val)}),onMouseleave:e[1]||(e[1]=function(){return u.resetCopyText&&u.resetCopyText.apply(u,arguments)})}),(0,r.v_)(n.label?n.label:n.val),17)]})),_:1},8,["text"])):((0,a.uX)(),(0,a.Wv)(s,{key:1,text:l.copyText,top:""},{activator:(0,a.k6)((function(t){var r=t.props;return[(0,a.bF)(c,(0,a.v6)(r,{icon:"",onClick:e[2]||(e[2]=function(t){return u.copy(n.val)}),onMouseleave:u.resetCopyText}),{default:(0,a.k6)((function(){return[(0,a.bF)(d,{size:"small"},{default:(0,a.k6)((function(){return e[3]||(e[3]=[(0,a.eW)("mdi:mdi-content-copy")])})),_:1})]})),_:2},1040,["onMouseleave"])]})),_:1},8,["text"]))],512)}var l={props:{title:null,label:null,val:null,text:Boolean},data:function(){return{defaultText:"Copy",copyText:""}},methods:{copy:function(t){var e=document.createElement("textarea");this.$refs["container"].appendChild(e),e.setAttribute("id","clipboard"),e.value=t,e.select(),document.execCommand("Copy"),e.parentNode.removeChild(e),this.copyText="Copied"},resetCopyText:function(){var t=this;setTimeout((function(){return t.copyText=t.defaultText}),500)}},mounted:function(){this.title&&(this.defaultText=this.title),this.copyText=this.defaultText}},u=n(66262);const s=(0,u.A)(l,[["render",i]]);var d=s},92649:function(t,e,n){n.d(e,{A:function(){return p}});var a=n(20641),r=n(90033),o={key:0},i={key:0},l={key:1},u={key:2};function s(t,e,n,s,d,c){var f=(0,a.g2)("v-icon"),h=(0,a.g2)("v-btn"),v=(0,a.g2)("v-card-title"),p=(0,a.g2)("v-alert"),m=(0,a.g2)("v-select"),g=(0,a.g2)("PasswordField"),b=(0,a.g2)("v-text-field"),k=(0,a.g2)("v-card-text"),y=(0,a.g2)("v-card"),w=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.CE)("span",null,[n.hideText?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",o,[n.yesno?((0,a.uX)(),(0,a.CE)("span",i,(0,r.v_)(n.val?"Yes":"No"),1)):n.password?((0,a.uX)(),(0,a.CE)("span",l,(0,r.v_)("******"))):((0,a.uX)(),(0,a.CE)("span",u,(0,r.v_)(n.val),1))])),(0,a.bF)(h,{icon:"",onClick:e[0]||(e[0]=function(t){return c.edit(n.val)})},{default:(0,a.k6)((function(){return[(0,a.bF)(f,{size:"small"},{default:(0,a.k6)((function(){return e[5]||(e[5]=[(0,a.eW)("mdi:mdi-pencil")])})),_:1})]})),_:1}),(0,a.bF)(w,{app:"",modelValue:d.dialog,"onUpdate:modelValue":e[4]||(e[4]=function(t){return d.dialog=t}),"max-width":"600"},{default:(0,a.k6)((function(){return[(0,a.bF)(y,{loading:d.fetching},{default:(0,a.k6)((function(){return[(0,a.bF)(v,null,{default:(0,a.k6)((function(){return[(0,a.eW)(" Edit "+(0,r.v_)(n.label),1)]})),_:1}),(0,a.bF)(k,null,{default:(0,a.k6)((function(){return[d.error?((0,a.uX)(),(0,a.Wv)(p,{key:0,type:"error",text:d.error},null,8,["text"])):(0,a.Q3)("",!0),n.yesno?((0,a.uX)(),(0,a.Wv)(m,{key:1,modelValue:d.data.val,"onUpdate:modelValue":e[1]||(e[1]=function(t){return d.data.val=t}),items:d.yesnoItems,label:n.label,autofocus:"",error:d.errors.length>0,"error-messages":d.errors},null,8,["modelValue","items","label","error","error-messages"])):n.password?((0,a.uX)(),(0,a.Wv)(g,{key:2,modelValue:d.data.val,"onUpdate:modelValue":e[2]||(e[2]=function(t){return d.data.val=t}),bind:"$attrs"},null,8,["modelValue"])):((0,a.uX)(),(0,a.Wv)(b,{key:3,modelValue:d.data.val,"onUpdate:modelValue":e[3]||(e[3]=function(t){return d.data.val=t}),label:n.label,autofocus:"","error-messages":d.errors},null,8,["modelValue","label","error-messages"])),(0,a.bF)(h,{color:"primary",onClick:c.save},{default:(0,a.k6)((function(){return e[6]||(e[6]=[(0,a.eW)(" Save ")])})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])}n(62010),n(26099);var d=n(74300),c=n(61912),f={components:{PasswordField:c.A},props:{name:null,val:null,label:null,password:Boolean,hideText:Boolean,path:null,yesno:Boolean},data:function(){return{error:"",fetching:!1,dialog:!1,data:{val:null},showPassword:!1,yesnoItems:[{title:"Yes",value:1},{title:"No",value:0}],errors:[]}},watch:{val:function(t){this.data.val=t}},methods:{edit:function(){this.data.val=this.val,this.dialog=!0},save:function(){var t=this;this.fetching=!0,this.error="";var e={};e[this.name]=this.data.val,d.A.post(this.path,e).then((function(e){console.log(e),e.data.success?(t.dialog=!1,t.$emit("save")):t.error=e.data.error})).catch((function(t){return console.log(t)})).finally((function(){return t.fetching=!1}))}}},h=n(66262);const v=(0,h.A)(f,[["render",s]]);var p=v},9427:function(t,e,n){n.d(e,{A:function(){return d}});var a=n(20641),r=n(90033),o=n(53751);function i(t,e,n,i,l,u){var s=(0,a.g2)("v-toolbar-title"),d=(0,a.g2)("v-toolbar"),c=(0,a.g2)("v-card-text"),f=(0,a.g2)("v-spacer"),h=(0,a.g2)("v-btn"),v=(0,a.g2)("v-card-actions"),p=(0,a.g2)("v-card"),m=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.Wv)(m,{modelValue:t.dialog,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.dialog=e}),"max-width":t.options.width,style:(0,r.Tr)({zIndex:t.options.zIndex}),onKeydown:(0,o.jR)(u.cancel,["esc"]),persistent:""},{default:(0,a.k6)((function(){return[(0,a.bF)(p,null,{default:(0,a.k6)((function(){return[(0,a.bF)(d,{dark:"",color:t.options.color,dense:"",flat:""},{default:(0,a.k6)((function(){return[(0,a.bF)(s,{class:"text-body-2 font-weight-bold grey--text"},{default:(0,a.k6)((function(){return e[1]||(e[1]=[(0,a.eW)(" Permission Required ")])})),_:1})]})),_:1},8,["color"]),(0,a.bo)((0,a.bF)(c,{class:"pa-4 black--text",innerHTML:t.message},null,8,["innerHTML"]),[[o.aG,!!t.message]]),(0,a.bF)(v,{class:"pt-3"},{default:(0,a.k6)((function(){return[(0,a.bF)(f),t.options.noconfirm?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(h,{key:0,color:"grey",text:"",class:"body-2 font-weight-bold",onClick:u.cancel},{default:(0,a.k6)((function(){return e[2]||(e[2]=[(0,a.eW)("Cancel")])})),_:1},8,["onClick"])),(0,a.bF)(h,{color:"primary",class:"body-2 font-weight-bold",outlined:"",onClick:u.open},{default:(0,a.k6)((function(){return e[3]||(e[3]=[(0,a.eW)("Review Permissions")])})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue","max-width","style","onKeydown"])}n(26099);var l={data:function(){return{provider:null,dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"grey lighten-3",width:400,zIndex:10008,noconfirm:!1},window:null,timeout:null,popup:null}},methods:{check:function(t){var e=this;if("auth"===t.error)return this.provider=t.provider,this.dialog=!0,new Promise((function(t,n){e.resolve=t,e.reject=n}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.resolve(!1),this.dialog=!1},open:function(){this.popup=window.open("https://serverwand.com/account/services/"+this.provider),this.checkIfPopupWindowClosed()},checkIfPopupWindowClosed:function(){if(clearTimeout(this.timer),this.popup.closed)return this.agree();this.timer=setTimeout(this.checkIfPopupWindowClosed,1e3)}}},u=n(66262);const s=(0,u.A)(l,[["render",i]]);var d=s},61912:function(t,e,n){n.d(e,{A:function(){return u}});var a=n(20641);function r(t,e,n,r,o,i){var l=(0,a.g2)("v-text-field");return(0,a.uX)(),(0,a.Wv)(l,(0,a.v6)(t.$attrs,{type:o.showPassword?"text":"password","append-icon":o.showPassword?"mdi:mdi-eye-off":"mdi:mdi-eye","onClick:append":e[0]||(e[0]=function(t){return o.showPassword=!o.showPassword})}),null,16,["type","append-icon"])}var o={data:function(){return{showPassword:!1}}},i=n(66262);const l=(0,i.A)(o,[["render",r]]);var u=l},79202:function(t,e,n){n.r(e),n.d(e,{default:function(){return _}});var a=n(20641),r=n(90033),o={key:0},i={key:0};function l(t,e,n,l,u,s){var d=this,c=(0,a.g2)("v-alert"),f=(0,a.g2)("Loading"),h=(0,a.g2)("DNS"),v=(0,a.g2)("v-list-item"),p=(0,a.g2)("Copy"),m=(0,a.g2)("Edit"),g=(0,a.g2)("v-list-item-subtitle"),b=(0,a.g2)("v-btn"),k=(0,a.g2)("v-list-item-title"),y=(0,a.g2)("v-switch"),w=(0,a.g2)("v-divider"),x=(0,a.g2)("IPRestrictions"),F=(0,a.g2)("v-list"),_=(0,a.g2)("v-card");return(0,a.uX)(),(0,a.CE)("div",null,[u.error?((0,a.uX)(),(0,a.Wv)(c,{key:0,type:"error",text:u.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(f,{value:u.loading},null,8,["value"]),(0,a.bF)(_,null,{default:(0,a.k6)((function(){return[(0,a.bF)(_,{"max-width":"400"},{default:(0,a.k6)((function(){return[(0,a.bF)(F,{lines:"two"},{default:(0,a.k6)((function(){return[(0,a.bF)(h,{server:u.data.server},null,8,["server"]),(0,a.bF)(v,{title:"Disk Usage",subtitle:s.prettyBytes(1024*u.data.disk_usage)},null,8,["subtitle"]),(0,a.bF)(v,{title:"Data Transfer",subtitle:s.prettyBytes(1024*u.data.transfer)},null,8,["subtitle"]),(0,a.bF)(v,{title:"FTP Host",subtitle:u.data.domain},{subtitle:(0,a.k6)((function(){return[(0,a.bF)(p,{val:u.data.domain,text:""},null,8,["val"])]})),_:1},8,["subtitle"]),(0,a.bF)(v,{title:"Username",subtitle:u.data.domain},{subtitle:(0,a.k6)((function(){return[(0,a.bF)(p,{val:u.data.domain,text:""},null,8,["val"])]})),_:1},8,["subtitle"]),(0,a.bF)(v,{title:"Password",subtitle:"******"},{subtitle:(0,a.k6)((function(){return[(0,a.bF)(p,{val:u.data.ftp_password,label:"******",text:""},null,8,["val"])]})),append:(0,a.k6)((function(){return[(0,a.bF)(m,{val:u.data.ftp_password,label:"FTP Password",name:"password",password:"",path:"sites/"+d.siteId+"/update",onSave:e[0]||(e[0]=function(t){return s.fetchData(!0)}),hideText:""},null,8,["val","path"])]})),_:1}),(0,a.bF)(v,{title:"Path"},{append:(0,a.k6)((function(){var t;return[(0,a.bF)(b,{icon:"fas fa-folder-open",to:"/servers/"+(null===(t=u.data.server)||void 0===t?void 0:t.id)+"/Files#"+s.path,size:"small"},null,8,["to"])]})),default:(0,a.k6)((function(){return[(0,a.bF)(g,null,{default:(0,a.k6)((function(){return[(0,a.bF)(p,{val:s.path,text:""},null,8,["val"])]})),_:1})]})),_:1}),u.data.origin?((0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(v,null,{default:(0,a.k6)((function(){return[(0,a.bF)(k,null,{default:(0,a.k6)((function(){return e[5]||(e[5]=[(0,a.eW)(" Password protection ")])})),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((function(){return[(0,a.bF)(y,{modelValue:u.data.auth.active,"onUpdate:modelValue":e[1]||(e[1]=function(t){return u.data.auth.active=t}),label:"Active",onChange:e[2]||(e[2]=function(t){return s.toggleAuth()})},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,a.bF)(w),u.data.auth.active?((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(v,null,{default:(0,a.k6)((function(){return[(0,a.bF)(k,null,{default:(0,a.k6)((function(){return e[6]||(e[6]=[(0,a.eW)(" Username ")])})),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(u.data.auth.username)+" ",1),(0,a.bF)(p,{val:u.data.auth.username,text:""},null,8,["val"])]})),_:1})]})),_:1}),(0,a.bF)(v,null,{default:(0,a.k6)((function(){return[(0,a.bF)(k,null,{default:(0,a.k6)((function(){return e[7]||(e[7]=[(0,a.eW)(" Password ")])})),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,r.v_)(u.data.auth.password)+" ",1),(0,a.bF)(m,{val:u.data.auth.password,label:"Auth Password",name:"password",password:"",path:"sites/"+d.siteId+"/auth",onSave:e[3]||(e[3]=function(t){return s.fetchData(!0)})},null,8,["val","path"])]})),_:1})]})),_:1})])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.bF)(x,{active:u.data.ip_restrictions.active,items:u.data.ip_restrictions.ips,path:"sites/"+d.siteId+"/iprestrictions",onSave:e[4]||(e[4]=function(t){return s.fetchData(!0)}),remoteAddr:u.data.remote_addr},null,8,["active","items","path","remoteAddr"])]})),_:1})]})),_:1})]})),_:1})])}var u=n(14048),s=n(30388),d=(n(26099),n(74300)),c=n(27274),f=n(81815),h=n(46865),v=n(92649),p=n(44788);function m(t,e,n,r,o,i){var l,u,s,d,c=(0,a.g2)("v-list-item"),f=(0,a.g2)("v-btn"),h=(0,a.g2)("OAuth");return(0,a.uX)(),(0,a.CE)("div",null,[!o.data.dns||null!==(l=o.data.dns)&&void 0!==l&&l.updating?((0,a.uX)(),(0,a.Wv)(c,{key:0,class:"mb-3"},{default:(0,a.k6)((function(){return e[1]||(e[1]=[(0,a.Lk)("strong",null,"Checking DNS..",-1)])})),_:1})):(null===(u=o.data.dns)||void 0===u?void 0:u.A)!=n.server.ip?((0,a.uX)(),(0,a.Wv)(c,{key:1,title:"DNS mismatch",subtitle:(null!==(s=o.data.dns)&&void 0!==s&&s.A?null===(d=o.data.dns)||void 0===d?void 0:d.A:"blank")+" != "+n.server.ip},{append:(0,a.k6)((function(){var t;return[null!==(t=o.data.dns)&&void 0!==t&&t.not_set?((0,a.uX)(),(0,a.Wv)(f,{key:0,onClick:e[0]||(e[0]=function(t){return i.fixDomainDns(o.data.domain)}),title:"Fix",icon:"fas fa-hammer",size:"small"})):(0,a.Q3)("",!0)]})),_:1},8,["subtitle"])):(0,a.Q3)("",!0),(0,a.bF)(h,{ref:"oauth"},null,512)])}var g=n(9427),b={components:{OAuth:g.A},props:{server:null},data:function(){return{data:{},fetching:!1}},created:function(){this.fetchData()},methods:{fetchData:function(t){var e=this;this.error="",this.siteId=this.$route.params.id,clearTimeout(this.timer),this.fetching=!0,d.A.get("sites/"+this.siteId+"/dns",{clearCacheEntry:t}).then((function(t){console.log(t),e.data=t.data})).catch((function(t){console.log(t)})).finally((function(){e.fetching=!1}))},fixDomainDns:function(){var t=this;this.error="",this.loading=!0,d.A.post("sites/"+this.siteId+"/fixdns",{}).then(function(){var e=(0,s.A)((0,u.A)().mark((function e(n){return(0,u.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(n),t.loading=!1,e.next=4,t.$refs.oauth.check(n.data);case 4:e.t0=e.sent,e.next=!0===e.t0?7:!1===e.t0?8:9;break;case 7:return e.abrupt("return",t.fixDomainDns());case 8:return e.abrupt("return");case 9:n.data.success?t.fetchData(!0):t.error=n.data.error;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){console.log(t)}))}}},k=n(66262);const y=(0,k.A)(b,[["render",m]]);var w=y,x={components:{Loading:f.A,Copy:h.A,Edit:v.A,IPRestrictions:p.A,DNS:w,OAuth:g.A},data:function(){return{siteId:null,post:null,error:null,data:{disk_usage:0,transfer:0,server:{},app:{},dns:{},auth:{},ip_restrictions:{}},details:"",loading:!1,fetching:!1,passwordPanel:[!1],passwordFormValid:!0,showPassword:!1,password:"",rules:{required:function(t){return!!t||"Required."},min:function(t){return t.length>=8||"Min 8 characters"},emailMatch:function(){return"The email and password you entered don't match"}},alias:{domain:"",dns:!0},copyText:"Copy",timer:null}},created:function(){this.fetchData()},watch:{$route:"fetchData"},computed:{path:function(){return"/var/www/vhosts/"+this.data.domain+"/"}},methods:{fetchData:function(t){var e=this;this.error="",this.siteId=this.$route.params.id,clearTimeout(this.timer),this.fetching=!0,d.A.get("sites/"+this.siteId+"/summary",{clearCacheEntry:t}).then((function(t){console.log(t),t.data.item&&(e.data=t.data.item),e.data.domain&&(document.title="Summary | "+e.data.domain)})).catch((function(t){console.log(t)})).finally((function(){e.fetching=!1,e.data.dns&&e.data.dns.updating&&(console.log("checking dns"),e.timer=setTimeout((function(){this.fetchData(!0)}),1e4))}))},fixDomainDns:function(){var t=this;this.error="",this.loading=!0,d.A.post("sites/"+this.siteId+"/fixdns",{}).then(function(){var e=(0,s.A)((0,u.A)().mark((function e(n){return(0,u.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(n),t.loading=!1,e.next=4,t.$refs.oauth.check(n.data);case 4:e.t0=e.sent,e.next=!0===e.t0?7:!1===e.t0?8:9;break;case 7:return e.abrupt("return",t.fixDomainDns());case 8:return e.abrupt("return");case 9:n.data.success?t.fetchData(!0):t.error=n.data.error;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){console.log(t)}))},toggleAuth:function(){var t=this;this.fetching=!0,this.error="",d.A.post("sites/"+this.siteId+"/auth",{status:this.data.auth.active}).then((function(e){console.log(e),e.data.success?t.fetchData(!0):t.error=e.data.error})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1}))},prettyBytes:function(t){return c.A.prettyBytes(t)}},beforeUnmount:function(){clearTimeout(this.timer)}};const F=(0,k.A)(x,[["render",l]]);var _=F}}]);
//# sourceMappingURL=6909-legacy.635bafa3.js.map