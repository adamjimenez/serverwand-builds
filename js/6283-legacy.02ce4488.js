(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[6283],{79277:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ce}});n(74916),n(64765);var r=n(66252),a=n(3577),l=n(49963);function o(e,t,n,o,u,i){var d=(0,r.up)("v-alert"),c=(0,r.up)("Loading"),s=(0,r.up)("EditFile"),f=(0,r.up)("NewFile"),h=(0,r.up)("v-col"),m=(0,r.up)("NewFolder"),p=(0,r.up)("Upload"),v=(0,r.up)("Rename"),w=(0,r.up)("DeleteFiles"),g=(0,r.up)("Chmod"),W=(0,r.up)("Chown"),k=(0,r.up)("Extract"),_=(0,r.up)("Download"),b=(0,r.up)("Clipboard"),C=(0,r.up)("v-row"),V=(0,r.up)("v-container"),y=(0,r.up)("v-icon"),I=(0,r.up)("v-btn"),E=(0,r.up)("v-text-field"),x=(0,r.up)("v-data-table"),U=(0,r.up)("v-card");return(0,r.wg)(),(0,r.iD)("div",null,[u.error?((0,r.wg)(),(0,r.j4)(d,{key:0,type:"error"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,a.zw)(u.error),1)]})),_:1})):(0,r.kq)("",!0),(0,r.Wm)(c,{value:u.loading},null,8,["value"]),(0,r.Wm)(s,{ref:"editFile",serverId:u.serverId,action:"files",onComplete:t[0]||(t[0]=function(e){return i.fetchData()}),onError:i.handleError,onLoading:i.handleLoading},null,8,["serverId","onError","onLoading"]),(0,r.Wm)(U,{loading:u.fetching},{default:(0,r.w5)((function(){return[(0,r.Wm)(V,{fluid:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(C,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(f,{serverId:u.serverId,path:u.path,onComplete:t[1]||(t[1]=function(e){return i.fetchData()}),onError:i.handleError},null,8,["serverId","path","onError"])]})),_:1}),(0,r.Wm)(h,{class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{serverId:u.serverId,path:u.path,onComplete:t[2]||(t[2]=function(e){return i.fetchData()}),onError:i.handleError},null,8,["serverId","path","onError"])]})),_:1}),(0,r.Wm)(p,{serverId:u.serverId,path:u.path,dropZone:e.$refs.results,onComplete:t[3]||(t[3]=function(e){return i.fetchData()}),onError:i.handleError,folder:"folder"},null,8,["serverId","path","dropZone","onError"]),1===i.selected.length?((0,r.wg)(),(0,r.j4)(h,{key:0,class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(v,{serverId:u.serverId,path:u.path,selected:i.selected,onComplete:t[4]||(t[4]=function(e){return i.fetchData()}),onError:i.handleError},null,8,["serverId","path","selected","onError"])]})),_:1})):(0,r.kq)("",!0),i.selected.length?((0,r.wg)(),(0,r.j4)(h,{key:1,class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(w,{serverId:u.serverId,path:u.path,selected:i.selected,onComplete:t[5]||(t[5]=function(e){return i.fetchData()}),onError:i.handleError},null,8,["serverId","path","selected","onError"])]})),_:1})):(0,r.kq)("",!0),(0,r.Wm)(h,{class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(g,{serverId:u.serverId,path:u.path,selected:i.selected,folderSelected:u.folderSelected,onComplete:t[6]||(t[6]=function(e){return i.fetchData()}),onError:i.handleError},null,8,["serverId","path","selected","folderSelected","onError"])]})),_:1}),(0,r.Wm)(h,{class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(W,{serverId:u.serverId,path:u.path,selected:i.selected,folderSelected:u.folderSelected,onComplete:t[7]||(t[7]=function(e){return i.fetchData()}),onError:i.handleError},null,8,["serverId","path","selected","folderSelected","onError"])]})),_:1}),(0,r.Wm)(k,{serverId:u.serverId,path:u.path,selected:i.selected,onComplete:i.fetchData,onError:i.handleError,onLoading:i.handleLoading},null,8,["serverId","path","selected","onComplete","onError","onLoading"]),1===i.selected.length&&"file"===i.selected[0].type?((0,r.wg)(),(0,r.j4)(h,{key:2,class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{serverId:u.serverId,path:u.path,selected:i.selected},null,8,["serverId","path","selected"])]})),_:1})):(0,r.kq)("",!0),(0,r.Wm)(b,{serverId:u.serverId,path:u.path,selected:i.selected,onComplete:t[8]||(t[8]=function(e){return i.fetchData()}),onError:i.handleError},null,8,["serverId","path","selected","onError"])]})),_:1})]})),_:1}),(0,r.Wm)(V,{fluid:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(C,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(I,{icon:"",onClick:t[9]||(t[9]=function(e){return i.upLevel()}),disabled:"/"===u.path,title:"Up one level"},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{small:""},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-arrow-up")]})),_:1})]})),_:1},8,["disabled"])]})),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(E,{modelValue:u.path,"onUpdate:modelValue":t[10]||(t[10]=function(e){return u.path=e}),class:"ma-0 pa-0",onChange:i.fetchData,onKeydown:(0,l.D2)(i.fetchData,["enter"])},null,8,["modelValue","onChange","onKeydown"])]})),_:1}),(0,r.Wm)(h,{cols:"2"},{default:(0,r.w5)((function(){return[(0,r.Wm)(E,{placeholder:"Search","prepend-inner-icon":"search",modelValue:u.search,"onUpdate:modelValue":t[11]||(t[11]=function(e){return u.search=e}),class:"ma-0 pa-0",onChange:i.fetchData,onKeydown:(0,l.D2)(i.fetchData,["enter"])},null,8,["modelValue","onChange","onKeydown"])]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(x,{modelValue:u.selectedIds,"onUpdate:modelValue":t[12]||(t[12]=function(e){return u.selectedIds=e}),headers:u.headers,items:u.items,class:"results",ref:"results","show-select":"","mobile-breakpoint":"0","onClick:row":t[13]||(t[13]=function(e,t){i.open(t.item.raw)})},{"item.size":(0,r.w5)((function(e){var t=e.item;return[(0,r.Uk)((0,a.zw)(i.prettyBytes(t.raw.size)),1)]})),"item.modified":(0,r.w5)((function(e){var t=e.item;return[(0,r.Uk)((0,a.zw)(i.formatDate(t.raw.modified)),1)]})),"item.owner":(0,r.w5)((function(e){var t=e.item;return[(0,r.Uk)((0,a.zw)(t.raw.owner)+" "+(0,a.zw)(t.raw.group),1)]})),_:1},8,["modelValue","headers","items"])]})),_:1},8,["loading"])])}var u=n(6835),i=n(48534),d=(n(27852),n(41539),n(54747),n(69826),n(23123),n(68309),n(1006)),c=n(72564),s=n(48236);function f(e,t,n,a,l,o){var u=(0,r.up)("v-icon"),i=(0,r.up)("v-btn"),d=(0,r.up)("v-card-title"),c=(0,r.up)("v-text-field"),s=(0,r.up)("v-card-text"),f=(0,r.up)("v-card"),h=(0,r.up)("v-dialog");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(i,{onClick:t[0]||(t[0]=function(e){return o.open()}),title:"New file"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-file-outline")]})),_:1})]})),_:1}),(0,r.Wm)(h,{app:"",modelValue:l.dialog,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.dialog=e})},{default:(0,r.w5)((function(){return[(0,r.Wm)(f,{loading:l.fetching},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,null,{default:(0,r.w5)((function(){return[(0,r.Uk)(" New file ")]})),_:1}),(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.data.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.data.value=e}),label:"name",autofocus:""},null,8,["modelValue"]),(0,r.Wm)(i,{color:"primary",onClick:o.save,disabled:""===l.data.value},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Save ")]})),_:1},8,["onClick","disabled"])]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])}var h={props:{serverId:null,path:null},watch:{path:function(e){this&&(this.data.path=e)}},data:function(){return{fetching:!1,dialog:!1,data:{value:""}}},created:function(){this.data.path=this.path},methods:{open:function(){this.data.value="",this.dialog=!0},save:function(){var e=this;this.error="",this.fetching=!0,this.loading=!0,d.Z.post("servers/"+this.serverId+"/files",{cmd:"new_file",new_file:this.data.value,path:this.data.path}).then((function(t){if(console.log(t),t.data.success)e.dialog=!1,e.$emit("complete");else{var n=t.data.error?t.data.error:t.data;e.$emit("error",n)}})).catch((function(e){return console.log(e)})).finally((function(){e.fetching=!1,e.loading=!1}))}}},m=n(48118);const p=(0,m.Z)(h,[["render",f]]);var v=p;function w(e,t,n,a,l,o){var u=(0,r.up)("v-icon"),i=(0,r.up)("v-btn"),d=(0,r.up)("v-card-title"),c=(0,r.up)("v-text-field"),s=(0,r.up)("v-card-text"),f=(0,r.up)("v-card"),h=(0,r.up)("v-dialog");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(i,{onClick:t[0]||(t[0]=function(e){return o.open()}),title:"New folder"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-folder-outline")]})),_:1})]})),_:1}),(0,r.Wm)(h,{app:"",modelValue:l.dialog,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.dialog=e})},{default:(0,r.w5)((function(){return[(0,r.Wm)(f,{loading:l.fetching},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,null,{default:(0,r.w5)((function(){return[(0,r.Uk)(" New folder ")]})),_:1}),(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.data.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.data.value=e}),label:"name",autofocus:""},null,8,["modelValue"]),(0,r.Wm)(i,{color:"primary",onClick:o.save,disabled:""===l.data.value},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Save ")]})),_:1},8,["onClick","disabled"])]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])}var g={props:{serverId:null,path:null},watch:{path:function(e){this&&(this.data.path=e)}},data:function(){return{fetching:!1,dialog:!1,data:{value:""}}},created:function(){this.data.path=this.path},methods:{open:function(){this.data.value="",this.dialog=!0},save:function(){var e=this;this.error="",this.fetching=!0,this.loading=!0,d.Z.post("servers/"+this.serverId+"/files",{cmd:"new_folder",new_folder:this.data.value,path:this.data.path}).then((function(t){if(console.log(t),t.data.success)e.dialog=!1,e.$emit("complete");else{var n=t.data.error?t.data.error:t.data;e.$emit("error",n)}})).catch((function(e){return console.log(e)})).finally((function(){e.fetching=!1,e.loading=!1}))}}};const W=(0,m.Z)(g,[["render",w]]);var k=W,_={key:0},b=(0,r._)("div",null,"Owner",-1),C=(0,r._)("div",{class:"mt-5"},"Group",-1),V=(0,r._)("div",{class:"mt-5"},"Public",-1);function y(e,t,n,a,l,o){var u=(0,r.up)("v-icon"),i=(0,r.up)("v-btn"),d=(0,r.up)("v-card-title"),c=(0,r.up)("v-checkbox"),s=(0,r.up)("v-col"),f=(0,r.up)("v-row"),h=(0,r.up)("v-container"),m=(0,r.up)("v-text-field"),p=(0,r.up)("v-card-text"),v=(0,r.up)("v-card"),w=(0,r.up)("v-dialog");return n.selected.length?((0,r.wg)(),(0,r.iD)("div",_,[(0,r.Wm)(i,{onClick:t[0]||(t[0]=function(e){return o.chmod()}),disabled:!n.selected,title:"Change Permissions"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-file-key-outline")]})),_:1})]})),_:1},8,["disabled"]),(0,r.Wm)(w,{app:"",modelValue:l.dialog,"onUpdate:modelValue":t[23]||(t[23]=function(e){return l.dialog=e}),width:"unset"},{default:(0,r.w5)((function(){return[(0,r.Wm)(v,{loading:l.fetching,flat:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,null,{default:(0,r.w5)((function(){return[(0,r.Uk)(" File permissions ")]})),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{fluid:""},{default:(0,r.w5)((function(){return[b,(0,r.Wm)(f,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.ownerR,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.ownerR=e}),label:"Read",onChange:t[2]||(t[2]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.ownerW,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.ownerW=e}),label:"Write",onChange:t[4]||(t[4]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.ownerE,"onUpdate:modelValue":t[5]||(t[5]=function(e){return l.ownerE=e}),label:"Execute",onChange:t[6]||(t[6]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1})]})),_:1}),C,(0,r.Wm)(f,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.groupR,"onUpdate:modelValue":t[7]||(t[7]=function(e){return l.groupR=e}),label:"Read",onChange:t[8]||(t[8]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.groupW,"onUpdate:modelValue":t[9]||(t[9]=function(e){return l.groupW=e}),label:"Write",onChange:t[10]||(t[10]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.groupE,"onUpdate:modelValue":t[11]||(t[11]=function(e){return l.groupE=e}),label:"Execute",onChange:t[12]||(t[12]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1})]})),_:1}),V,(0,r.Wm)(f,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.publicR,"onUpdate:modelValue":t[13]||(t[13]=function(e){return l.publicR=e}),label:"Read",onChange:t[14]||(t[14]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.publicW,"onUpdate:modelValue":t[15]||(t[15]=function(e){return l.publicW=e}),label:"Write",onChange:t[16]||(t[16]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.publicE,"onUpdate:modelValue":t[17]||(t[17]=function(e){return l.publicE=e}),label:"Execute",onChange:t[18]||(t[18]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(m,{modelValue:l.data.mode,"onUpdate:modelValue":t[19]||(t[19]=function(e){return l.data.mode=e}),label:"mode",autofocus:"",onKeyup:t[20]||(t[20]=function(e){return o.modeToCheckboxes()})},null,8,["modelValue"]),n.folderSelected?((0,r.wg)(),(0,r.j4)(c,{key:0,modelValue:l.data.recursive,"onUpdate:modelValue":t[21]||(t[21]=function(e){return l.data.recursive=e}),label:"Replace child permissions"},null,8,["modelValue"])):(0,r.kq)("",!0),(0,r.Wm)(i,{color:"primary",onClick:t[22]||(t[22]=function(e){return o.doChmod()})},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Save ")]})),_:1})]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])):(0,r.kq)("",!0)}var I={props:{serverId:null,path:null,selected:null,folderSelected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{fetching:!1,data:{recursive:!1},error:"",dialog:!1,ownerR:!1,ownerW:!1,ownerE:!1,groupR:!1,groupW:!1,groupE:!1,publicR:!1,publicW:!1,publicE:!1}},methods:{calcMode:function(){var e=0,t=0,n=0;this.ownerR&&(e+=4),this.ownerW&&(e+=2),this.ownerE&&(e+=1),this.groupR&&(n+=4),this.groupW&&(n+=2),this.groupE&&(n+=1),this.publicR&&(t+=4),this.publicW&&(t+=2),this.publicE&&(t+=1),this.data.mode=""+e+n+t},modeToCheckboxes:function(){var e=this.data.mode,t=e.substr(0,1),n=e.substr(1,1),r=e.substr(2,1);this.ownerR=t>=4&&t<=7,this.ownerW=2==t||3==t||6==t||7==t,this.ownerE=1==t||3==t||5==t||7==t,this.groupR=n>=4&&n<=7,this.groupW=2==n||3==n||6==n||7==n,this.groupE=1==n||3==n||5==n||7==n,this.publicR=r>=4&&r<=7,this.publicW=2==r||3==r||6==r||7==r,this.publicE=1==r||3==r||5==r||7==r},chmod:function(){this.dialog=!0,1===this.selected.length?this.data.mode=this.selected[0].permsn:this.data.mode="000",this.modeToCheckboxes()},doChmod:function(){var e=this;this.fetching=!0;var t=[];this.selected.forEach((function(e){return t.push(e.id)})),d.Z.post("servers/"+this.serverId+"/files",{cmd:"chmod",mode:this.data.mode,recursive:this.data.recursive,files:t}).then((function(t){if(console.log(t),t.data.success)e.dialog=!1,e.$emit("complete");else{var n=t.data.error?t.data.error:t.data;e.$emit("error",n)}})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))}}};const E=(0,m.Z)(I,[["render",y]]);var x=E,U={key:0};function D(e,t,n,a,l,o){var u=(0,r.up)("v-icon"),i=(0,r.up)("v-btn"),d=(0,r.up)("v-card-title"),c=(0,r.up)("v-text-field"),s=(0,r.up)("v-checkbox"),f=(0,r.up)("v-card-text"),h=(0,r.up)("v-card"),m=(0,r.up)("v-dialog");return n.selected.length?((0,r.wg)(),(0,r.iD)("div",U,[(0,r.Wm)(i,{onClick:t[0]||(t[0]=function(e){return o.chown()}),disabled:!n.selected,title:"Change owner"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-account")]})),_:1})]})),_:1},8,["disabled"]),(0,r.Wm)(m,{app:"",modelValue:l.dialog,"onUpdate:modelValue":t[5]||(t[5]=function(e){return l.dialog=e}),width:"unset"},{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{loading:l.fetching,flat:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,null,{default:(0,r.w5)((function(){return[(0,r.Uk)(" File ownership ")]})),_:1}),(0,r.Wm)(f,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.data.owner,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.data.owner=e}),label:"Owner",autofocus:""},null,8,["modelValue"]),(0,r.Wm)(c,{modelValue:l.data.group,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.data.group=e}),label:"Group"},null,8,["modelValue"]),n.folderSelected?((0,r.wg)(),(0,r.j4)(s,{key:0,modelValue:l.data.recursive,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.data.recursive=e}),label:"Replace child permissions"},null,8,["modelValue"])):(0,r.kq)("",!0),(0,r.Wm)(i,{color:"primary",onClick:t[4]||(t[4]=function(e){return o.doChown()})},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Save ")]})),_:1})]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])):(0,r.kq)("",!0)}var Z={props:{serverId:null,path:null,selected:null,folderSelected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{fetching:!1,data:{recursive:!1},error:"",dialog:!1}},methods:{chown:function(){this.dialog=!0,1===this.selected.length?(this.data.owner=this.selected[0].owner,this.data.group=this.selected[0].group):(this.data.owner="",this.data.group="")},doChown:function(){var e=this;this.fetching=!0;var t=[];this.selected.forEach((function(e){return t.push(e.id)})),d.Z.post("servers/"+this.serverId+"/files",{cmd:"chown",owner:this.data.owner,group:this.data.group,recursive:this.data.recursive,files:t}).then((function(t){if(console.log(t),t.data.success)e.dialog=!1,e.$emit("complete");else{var n=t.data.error?t.data.error:t.data;e.$emit("error",n)}})).catch((function(e){console.log(e)})).finally((function(){e.fetching=!1}))}}};const R=(0,m.Z)(Z,[["render",D]]);var $=R,S={key:0};function q(e,t,n,a,l,o){var u=(0,r.up)("v-icon"),i=(0,r.up)("v-btn"),d=(0,r.up)("v-card-title"),c=(0,r.up)("v-text-field"),s=(0,r.up)("v-card-text"),f=(0,r.up)("v-card"),h=(0,r.up)("v-dialog");return 1===n.selected.length?((0,r.wg)(),(0,r.iD)("div",S,[(0,r.Wm)(i,{onClick:t[0]||(t[0]=function(e){return o.rename()}),disabled:!n.selected,title:"Rename"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-rename-box")]})),_:1})]})),_:1},8,["disabled"]),(0,r.Wm)(h,{app:"",modelValue:l.dialog,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.dialog=e})},{default:(0,r.w5)((function(){return[(0,r.Wm)(f,{loading:l.fetching},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,null,{default:(0,r.w5)((function(){return[(0,r.Uk)(" Rename ")]})),_:1}),(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{modelValue:l.data.newName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.data.newName=e}),label:"name",autofocus:""},null,8,["modelValue"]),(0,r.Wm)(i,{color:"primary",onClick:o.doRename},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Save ")]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])):(0,r.kq)("",!0)}var z=void 0,F={props:{serverId:null,path:null,selected:null},watch:{path:function(e){return z.data.path=e},selected:function(e){return z.data.selected=e}},data:function(){return{fetching:!1,data:{path:"",selected:[]},error:"",dialog:!1}},methods:{rename:function(){console.log(this.selected),this.dialog=!0,this.data.oldName=this.selected[0].name,this.data.newName=this.selected[0].name},doRename:function(){var e=this;this.fetching=!0,d.Z.post("servers/"+this.serverId+"/files",{cmd:"rename",path:this.path,old_name:this.data.oldName,new_name:this.data.newName}).then((function(t){if(console.log(t),t.data.success)e.dialog=!1,e.$emit("complete");else{var n=t.data.error?t.data.error:t.data;e.$emit("error",n)}})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))}}};const L=(0,m.Z)(F,[["render",q]]);var N=L,O=n(72888),j={key:0};function M(e,t,n,a,l,o){var u=(0,r.up)("v-icon"),i=(0,r.up)("v-btn"),d=(0,r.up)("Confirm");return n.selected.length?((0,r.wg)(),(0,r.iD)("div",j,[(0,r.Wm)(i,{onClick:t[0]||(t[0]=function(e){return o.deleteItem()}),title:"Delete"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-delete")]})),_:1})]})),_:1}),(0,r.Wm)(d,{ref:"confirm"},null,512)])):(0,r.kq)("",!0)}var T=n(90947),K={components:{Confirm:T.Z},props:{serverId:null,path:null,selected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{fetching:!1,error:"",data:{}}},methods:{deleteItem:function(){var e=(0,i.Z)((0,u.Z)().mark((function e(){var t,n;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.confirm.open("Confirm","Delete selected files?");case 2:if(!e.sent){e.next=8;break}t=this,this.fetching=!0,n=[],this.selected.forEach((function(e){return n.push(e.id)})),d.Z.post("servers/"+this.serverId+"/files",{cmd:"delete",files:n}).then((function(e){if(console.log(e),e.data.success)t.$emit("complete");else{var n=e.data.error?e.data.error:e.data;t.$emit("error",n)}})).catch((function(e){console.log(e)})).finally((function(){return t.fetching=!1}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}};const H=(0,m.Z)(K,[["render",M]]);var P=H,B={key:0};function A(e,t,n,a,l,o){var u=(0,r.up)("v-icon"),i=(0,r.up)("v-btn");return 1===n.selected.length&&"file"===n.selected[0].type?((0,r.wg)(),(0,r.iD)("div",B,[(0,r.Wm)(i,{onClick:t[0]||(t[0]=function(e){return o.download()}),title:"Download"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-download")]})),_:1})]})),_:1})])):(0,r.kq)("",!0)}var G=void 0,J={props:{serverId:null,path:null,selected:null},watch:{path:function(e){return G.data.path=e},selected:function(e){return G.data.selected=e}},data:function(){return{fetching:!1,data:{},error:"",dialog:!1}},methods:{download:function(){window.open("https://serverwand.com/api/servers/"+this.serverId+"/files?d="+encodeURIComponent(this.selected[0].id))}}};const Q=(0,m.Z)(J,[["render",A]]);var X=Q;function Y(e,t,n,a,l,o){var u=(0,r.up)("v-icon"),i=(0,r.up)("v-btn"),d=(0,r.up)("v-col"),c=(0,r.up)("v-row");return(0,r.wg)(),(0,r.j4)(d,{class:"flex-grow-0",style:{"min-width":"264px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,null,{default:(0,r.w5)((function(){return[n.selected.length?((0,r.wg)(),(0,r.j4)(d,{key:0,class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(i,{onClick:t[0]||(t[0]=function(e){return o.cut()}),title:"Cut"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-content-cut")]})),_:1})]})),_:1})]})),_:1})):(0,r.kq)("",!0),n.selected.length?((0,r.wg)(),(0,r.j4)(d,{key:1,class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(i,{onClick:t[1]||(t[1]=function(e){return o.copy()}),title:"Copy"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-content-copy")]})),_:1})]})),_:1})]})),_:1})):(0,r.kq)("",!0),l.data.items.length&&n.path!=l.data.src?((0,r.wg)(),(0,r.j4)(d,{key:2,class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(i,{onClick:t[2]||(t[2]=function(e){return o.paste()}),title:"Paste"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-content-paste")]})),_:1})]})),_:1})]})),_:1})):(0,r.kq)("",!0)]})),_:1})]})),_:1})}var ee={props:{serverId:null,path:null,selected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{fetching:!1,data:{items:[],cut:!1,src:""},error:"",dialog:!1}},methods:{cut:function(){this.copy(!0)},copy:function(e){var t=this;this.data.cut=!!e,this.data.src=this.path,this.data.items=[],this.selected.forEach((function(e){return t.data.items.push(e.name)}))},paste:function(){var e=this;console.log(this.data);var t=this.data.cut?"Move":"Copy";this.$confirm(t+" "+this.data.items.length+" items?").then((function(n){if(n){var r=e;e.fetching=!0,d.Z.post("servers/"+e.serverId+"/files",{cmd:t.toLowerCase(),path:e.path,src:e.data.src,files:e.data.items}).then((function(e){if(console.log(e),"move"===t.toLowerCase()&&(r.data.items=[]),e.data.success)r.$emit("complete");else{var n=e.data.error?e.data.error:e.data;r.$emit("error",n)}})).catch((function(e){return console.log(e)})).finally((function(){return r.fetching=!1}))}}))}}};const te=(0,m.Z)(ee,[["render",Y]]);var ne=te,re=n(98686);function ae(e,t,n,l,o,u){var i,d=(0,r.up)("v-alert"),c=(0,r.up)("v-icon"),s=(0,r.up)("v-btn"),f=(0,r.up)("v-col");return(0,r.wg)(),(0,r.iD)("div",null,[o.msg?((0,r.wg)(),(0,r.j4)(d,{key:0,dark:"",style:{position:"fixed",width:"100%","z-index":"10",left:"0",bottom:"0",margin:"0 auto"},type:"info"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,a.zw)(o.msg),1)]})),_:1})):(0,r.kq)("",!0),1===(null===(i=n.selected)||void 0===i?void 0:i.length)&&-1!==["zip","gz","tar"].indexOf(u.fileExtension(n.selected[0]))?((0,r.wg)(),(0,r.j4)(f,{key:1,class:"flex-grow-0"},{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{onClick:t[0]||(t[0]=function(e){return u.extract()}),disabled:!n.selected,title:"Extract"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi:mdi-folder-zip-outline")]})),_:1})]})),_:1},8,["disabled"])]})),_:1})):(0,r.kq)("",!0)])}var le={props:{serverId:null,path:null,selected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{data:{recursive:!1},error:"",dialog:!1,msg:""}},methods:{fileExtension:function(e){var t=e.name.lastIndexOf(".");return-1===t?"":e.name.substr(t+1,e.name.length)},extract:function(){var e=this;this.$emit("loading",!0),d.Z.event("servers/"+this.serverId+"/files?cmd=extract&id="+encodeURIComponent(this.selected[0].id),(function(t){e.msg=t.msg}),(function(t){return e.$emit("error",t)}),(function(){e.msg="",e.$emit("complete")}))}}};const oe=(0,m.Z)(le,[["render",ae]]);var ue=oe,ie={components:{Loading:s.Z,NewFile:v,NewFolder:k,Chmod:x,Chown:$,Rename:N,EditFile:O.Z,DeleteFiles:P,Download:X,Clipboard:ne,Upload:re.Z,Extract:ue},data:function(){return{path:"/",search:"",error:"",items:[],server:{},data:{},loading:!1,fetching:!1,userHashChange:!0,serverId:0,selectedIds:[],folderSelected:!1,headers:[{title:"",key:""},{title:"Name ",key:"name"},{title:"Size ",key:"size",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Last modified ",key:"modified",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Permissions ",key:"perms",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Owner ",key:"owner",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"}],fileToOpen:""}},computed:{dir:function(){var e=this.path;if(!e.endsWith("/")){var t=e.lastIndexOf("/");-1!==t&&(e=e.substr(0,t))}return e},selected:function(){var e=[],t=this;return this.selectedIds.forEach((function(n){e.push(t.items.find((function(e){return e.id===n})))})),e}},watch:{path:{handler:function(e){window.ssh_path=e,this.userHashChange=!1,location.hash=e}},selected:function(e){var t=!1;e.forEach((function(e){"folder"===e.type&&(t=!0)})),this.folderSelected=t}},created:function(){this.serverId=this.$route.params.id;var e=this;if(window.onhashchange=function(){e.userHashChange?(e.path=location.hash.substr(1),e.fetchData()):e.userHashChange=!0},location.hash){this.path=location.hash.substr(1);var t=this.basename(this.path);-1!==t.indexOf(".")&&(this.fileToOpen=t)}this.fetchData()},methods:{basename:function(e){return e.split(/[\\/]/).pop()},fetchData:function(){var e=this;this.error="",this.fetching=!0,this.search?(this.items=[],d.Z.event("servers/"+this.serverId+"/files?path="+encodeURIComponent(this.dir)+"&search="+encodeURIComponent(this.search),(function(t){var n=t.msg.split("\n");n.forEach((function(t){var n=!1;e.items.forEach((function(e){e.id===t&&(n=!0)})),n||e.items.push({id:t,name:e.basename(t),type:"file"})}))}),(function(t){return e.error=t}),(function(){return e.fetching=!1}))):d.Z.post("servers/"+this.serverId+"/files",{path:this.dir}).then((function(t){console.log(t),t.data.error?e.error=t.data.error:(e.server=t.data.item,e.items=[],t.data.files.forEach((function(t){e.items.push({id:t.id,name:t.name,size:t.size,type:t.type,modified:t.modified,perms:t.perms,permsn:t.permsn,owner:t.owner,group:t.group,selected:!1})})),document.title="Files | "+e.server.name)})).catch((function(e){console.log(e)})).finally((function(){if(e.fetching=!1,e.selectedIds=[],e.fileToOpen){var t=e.fileToOpen,n=1;if(-1!==t.indexOf(":")){var r=t.split(":");t=r[0],n=r[1]}e.items.forEach(function(){var r=(0,i.Z)((0,u.Z)().mark((function r(a){return(0,u.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a.name!==t){r.next=5;break}return e.fileToOpen="",r.next=4,e.$refs.editFile.open(a);case 4:e.$refs.editFile.goToLine(n);case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}}))},open:function(e){this.error="","folder"===e.type||"link"===e.type?(this.path=e.id,this.fetchData()):"file"===e.type&&this.$refs.editFile.open(e)},upLevel:function(){console.log(this.path),this.search="";var e=this.path.substr(0,this.path.length-1).lastIndexOf("/");-1!==e&&(this.path=this.path.substr(0,e+1),this.dir||(this.path="/")),this.fetchData()},handleError:function(e){this.error=e},handleLoading:function(e){this.fetching=e},prettyBytes:function(e){return c.Z.prettyBytes(e)},formatDate:function(e){return c.Z.formatDate(e)}}};const de=(0,m.Z)(ie,[["render",o]]);var ce=de},84964:function(e,t,n){var r=n(5112),a=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(r){}}return!1}},3929:function(e,t,n){var r=n(17854),a=n(47850),l=r.TypeError;e.exports=function(e){if(a(e))throw l("The method doesn't accept regular expressions");return e}},81150:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},69826:function(e,t,n){"use strict";var r=n(82109),a=n(42092).find,l=n(51223),o="find",u=!0;o in[]&&Array(1)[o]((function(){u=!1})),r({target:"Array",proto:!0,forced:u},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),l(o)},27852:function(e,t,n){"use strict";var r=n(82109),a=n(1702),l=n(31236).f,o=n(17466),u=n(41340),i=n(3929),d=n(84488),c=n(84964),s=n(31913),f=a("".endsWith),h=a("".slice),m=Math.min,p=c("endsWith"),v=!s&&!p&&!!function(){var e=l(String.prototype,"endsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!v&&!p},{endsWith:function(e){var t=u(d(this));i(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,a=void 0===n?r:m(o(n),r),l=u(e);return f?f(t,l,a):h(t,a-l.length,a)===l}})},64765:function(e,t,n){"use strict";var r=n(46916),a=n(27007),l=n(19670),o=n(84488),u=n(81150),i=n(41340),d=n(58173),c=n(97651);a("search",(function(e,t,n){return[function(t){var n=o(this),a=void 0==t?void 0:d(t,e);return a?r(a,t,n):new RegExp(t)[e](i(n))},function(e){var r=l(this),a=i(e),o=n(t,r,a);if(o.done)return o.value;var d=r.lastIndex;u(d,0)||(r.lastIndex=0);var s=c(r,a);return u(r.lastIndex,d)||(r.lastIndex=d),null===s?-1:s.index}]}))}}]);
//# sourceMappingURL=6283-legacy.02ce4488.js.map