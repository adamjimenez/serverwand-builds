"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[6025],{26301:function(e,t,r){r.d(t,{A:function(){return u}});var n=r(20641),o=r(90033),i=r(53751);function a(e,t,r,a,s,l){const c=(0,n.g2)("v-toolbar-title"),u=(0,n.g2)("v-toolbar"),d=(0,n.g2)("v-card-text"),f=(0,n.g2)("v-spacer"),h=(0,n.g2)("v-btn"),p=(0,n.g2)("v-card-actions"),m=(0,n.g2)("v-card"),v=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.Wv)(v,{modelValue:e.dialog,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dialog=t),"max-width":e.options.width,style:(0,o.Tr)({zIndex:e.options.zIndex}),onKeydown:(0,i.jR)(l.cancel,["esc"]),persistent:""},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(u,{dark:"",color:e.options.color,dense:"",flat:""},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"text-body-2 font-weight-bold grey--text"},{default:(0,n.k6)((()=>[(0,n.eW)((0,o.v_)(e.title),1)])),_:1})])),_:1},8,["color"]),(0,n.bo)((0,n.bF)(d,{class:"pa-4 black--text",innerHTML:e.message},null,8,["innerHTML"]),[[i.aG,!!e.message]]),(0,n.bF)(p,{class:"pt-3"},{default:(0,n.k6)((()=>[(0,n.bF)(f),e.options.noconfirm?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(h,{key:0,color:"grey",text:"",class:"body-2 font-weight-bold",onClick:l.cancel},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("Cancel")]))),_:1},8,["onClick"])),(0,n.bF)(h,{color:"primary",class:"body-2 font-weight-bold",outlined:"",onClick:l.agree},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("OK")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","max-width","style","onKeydown"])}var s={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"grey lighten-3",width:400,zIndex:10008,noconfirm:!1}}},methods:{open(e,t,r){return t||(t=e,e="Confirm"),this.dialog=!0,this.title=e,this.message=t,this.options=Object.assign(this.options,r),new Promise(((e,t)=>{this.resolve=e,this.reject=t}))},agree(){this.resolve(!0),this.dialog=!1},cancel(){this.resolve(!1),this.dialog=!1}}},l=r(66262);const c=(0,l.A)(s,[["render",a]]);var u=c},81815:function(e,t,r){r.d(t,{A:function(){return l}});var n=r(20641);function o(e,t,r,o,i,a){const s=(0,n.g2)("v-icon"),l=(0,n.g2)("v-alert"),c=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.Wv)(c,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",width:"600"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{title:r.message,color:"primary"},{prepend:(0,n.k6)((()=>[(0,n.bF)(s,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1},8,["title"])])),_:1},8,["modelValue"])}var i={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},a=r(66262);const s=(0,a.A)(i,[["render",o]]);var l=s},26025:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(20641),o=r(90033);const i={class:"text-truncate mr-4",style:{"max-width":"50%"}},a={class:"text-truncate",title:"From: {{ message.sender }}"},s={class:"text-truncate",title:"To: {{ message.recipient }}"},l={class:"text-right"},c=["src"];function u(e,t,r,u,d,f){const h=(0,n.g2)("v-alert"),p=(0,n.g2)("Loading"),m=(0,n.g2)("v-icon"),v=(0,n.g2)("v-btn"),g=(0,n.g2)("ClearMailQueue"),y=(0,n.g2)("v-card-actions"),b=(0,n.g2)("v-data-table"),w=(0,n.g2)("v-card-text"),k=(0,n.g2)("v-card"),x=(0,n.g2)("v-spacer"),_=(0,n.g2)("v-card-title"),C=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.CE)("div",null,[d.error?((0,n.uX)(),(0,n.Wv)(h,{key:0,type:"error",text:d.error},null,8,["text"])):(0,n.Q3)("",!0),(0,n.bF)(p,{value:d.loading},null,8,["value"]),(0,n.bF)(k,{loading:d.fetching},{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(v,{onClick:f.fetchData,loading:d.fetching},{default:(0,n.k6)((()=>[(0,n.bF)(m,{size:"small"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("mdi:mdi-reload")]))),_:1})])),_:1},8,["onClick","loading"]),d.selected.length?((0,n.uX)(),(0,n.Wv)(v,{key:0,onClick:t[0]||(t[0]=e=>f.deleteMail()),disabled:d.selected.length,loading:d.fetching},{default:(0,n.k6)((()=>[(0,n.bF)(m,{size:"small"},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)("mdi:mdi-delete")]))),_:1})])),_:1},8,["disabled","loading"])):(0,n.Q3)("",!0),d.data.server?.queue?((0,n.uX)(),(0,n.Wv)(g,{key:1,serverId:"serverId",server:d.data,class:"mx-3",onComplete:f.handleComplete},null,8,["server","onComplete"])):(0,n.Q3)("",!0)])),_:1}),d.items.length?((0,n.uX)(),(0,n.Wv)(b,{key:0,modelValue:d.selected,"onUpdate:modelValue":t[1]||(t[1]=e=>d.selected=e),headers:d.headers,items:d.items,"items-per-page":100,"show-select":e.display.smAndUp,"mobile-breakpoint":"0",hover:"","row-props":f.rowProps,"fixed-header":"",style:{height:"calc(100vh - 260px)",overflow:"auto"},"onClick:row":f.view,"onContextmenu:row":f.select},{"item.date":(0,n.k6)((({item:e})=>[(0,n.Lk)("span",null,(0,o.v_)(f.formatDate(e.date)),1)])),"item.size":(0,n.k6)((({item:e})=>[(0,n.Lk)("span",null,(0,o.v_)(f.prettyBytes(e.size)),1)])),_:1},8,["modelValue","headers","items","show-select","row-props","onClick:row","onContextmenu:row"])):((0,n.uX)(),(0,n.Wv)(w,{key:1},{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)(" Queue empty ")]))),_:1}))])),_:1},8,["loading"]),(0,n.bF)(C,{app:"",modelValue:d.emailDrawer,"onUpdate:modelValue":t[2]||(t[2]=e=>d.emailDrawer=e)},{default:(0,n.k6)((()=>[(0,n.bF)(k,null,{default:(0,n.k6)((()=>[(0,n.bF)(_,{class:"d-flex"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",i,[(0,n.Lk)("div",a," From: "+(0,o.v_)(d.message.sender),1),(0,n.Lk)("div",s," To: "+(0,o.v_)(d.message.recipient),1)]),(0,n.bF)(x),(0,n.Lk)("div",l,[(0,n.eW)((0,o.v_)(f.formatDate(d.message.date)),1),t[6]||(t[6]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" "+(0,o.v_)(f.prettyBytes(d.message.size)),1)])])),_:1}),(0,n.bF)(w,null,{default:(0,n.k6)((()=>[(0,n.Lk)("iframe",{width:"100%",height:"315",src:d.messageUrl,frameborder:"0"},null,8,c)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}r(44114),r(98992),r(72577),r(3949);var d=r(74300),f=r(27274),h=r(81815);function p(e,t,r,i,a,s){const l=(0,n.g2)("v-btn"),c=(0,n.g2)("Confirm");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(l,(0,n.v6)({loading:a.fetching,onClick:s.deleteServer},e.$attrs),{default:(0,n.k6)((()=>[(0,n.eW)(" Clear Queue ("+(0,o.v_)(r.server?.queue?r.server.queue:0)+") ",1)])),_:1},16,["loading","onClick"]),(0,n.bF)(c,{ref:"confirm"},null,512)])}var m=r(26301),v={components:{Confirm:m.A},props:{server:null},data(){return{fetching:!1}},methods:{deleteServer:async function(){await this.$refs.confirm.open("Delete "+this.server?.queue+" items from the mail queue?")&&(this.fetching=!0,d.A.get("servers/"+this.$route.params.id+"/clearmailqueue").then((e=>{console.log(e.data.result),this.$emit("complete",e.data.result)})).catch((e=>console.log(e))).finally((()=>this.fetching=!1)))}}},g=r(66262);const y=(0,g.A)(v,[["render",p]]);var b=y,w={components:{Loading:h.A,ClearMailQueue:b},data(){return{error:"",items:[],data:{},details:"",message:"",messageUrl:"",loading:!1,fetching:!1,emailDrawer:!1,serverId:0,selected:[],headers:[{title:"Date",key:"date",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"From",key:"sender",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"To",key:"recipient",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Size",key:"size",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"}]}},created(){this.display=this.$vuetify.display,this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){this.error="",this.fetching=!0,d.A.get("servers/"+this.serverId+"/messages").then((e=>{console.log(e),this.data=e.data.item,this.items=e.data.messages,this.items=[],e.data.messages?.forEach((e=>{this.items.push({id:e.id,size:e.size,sender:e.sender,recipient:e.recipient,date:e.date})})),document.title="Mail | "+this.data?.name})).catch((e=>console.log(e))).finally((()=>this.fetching=!1))},deleteMail(){var e=[];this.selected.forEach((t=>{e.push(t)})),this.fetching=!0,d.A.post("servers/"+this.serverId+"/messages",{ids:e}).then((()=>this.fetchData())).catch((e=>console.log(e))).finally((()=>this.fetching=!1))},view(e,t){this.message=t.item,this.messageUrl="https://serverwand.com/api/servers/"+this.serverId+"/messages/"+this.message.id,this.emailDrawer=!0},select(e,t){e.preventDefault(),this.selected.includes(t.item.id)||this.selected.push(t.item.id)},prettyBytes(e){return f.A.prettyBytes(e)},handleComplete:function(e){this.error=e,this.fetchData()},rowProps(e){if(this.selected.find((t=>t===e.item.id)))return{class:"bg-primary"}},formatDate(e){return f.A.formatDate(e)}}};const k=(0,g.A)(w,[["render",u]]);var x=k},34527:function(e,t,r){var n=r(43724),o=r(34376),i=TypeError,a=Object.getOwnPropertyDescriptor,s=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=s?function(e,t){if(o(e)&&!a(e,"length").writable)throw new i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},97040:function(e,t,r){var n=r(43724),o=r(24913),i=r(6980);e.exports=function(e,t,r){n?o.f(e,t,i(0,r)):e[t]=r}},96837:function(e){var t=TypeError,r=9007199254740991;e.exports=function(e){if(e>r)throw t("Maximum allowed index exceeded");return e}},76080:function(e,t,r){var n=r(27476),o=r(79306),i=r(40616),a=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?a(e,t):function(){return e.apply(t,arguments)}}},27476:function(e,t,r){var n=r(22195),o=r(79504);e.exports=function(e){if("Function"===n(e))return o(e)}},1767:function(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},50851:function(e,t,r){var n=r(36955),o=r(55966),i=r(64117),a=r(26269),s=r(78227),l=s("iterator");e.exports=function(e){if(!i(e))return o(e,l)||o(e,"@@iterator")||a[n(e)]}},70081:function(e,t,r){var n=r(69565),o=r(79306),i=r(28551),a=r(16823),s=r(50851),l=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(o(r))return i(n(r,e));throw new l(a(e)+" is not iterable")}},20397:function(e,t,r){var n=r(97751);e.exports=n("document","documentElement")},44209:function(e,t,r){var n=r(78227),o=r(26269),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},34376:function(e,t,r){var n=r(22195);e.exports=Array.isArray||function(e){return"Array"===n(e)}},72652:function(e,t,r){var n=r(76080),o=r(69565),i=r(28551),a=r(16823),s=r(44209),l=r(26198),c=r(1625),u=r(70081),d=r(50851),f=r(9539),h=TypeError,p=function(e,t){this.stopped=e,this.result=t},m=p.prototype;e.exports=function(e,t,r){var v,g,y,b,w,k,x,_=r&&r.that,C=!(!r||!r.AS_ENTRIES),F=!(!r||!r.IS_RECORD),I=!(!r||!r.IS_ITERATOR),A=!(!r||!r.INTERRUPTED),E=n(t,_),T=function(e){return v&&f(v,"normal",e),new p(!0,e)},D=function(e){return C?(i(e),A?E(e[0],e[1],T):E(e[0],e[1])):A?E(e,T):E(e)};if(F)v=e.iterator;else if(I)v=e;else{if(g=d(e),!g)throw new h(a(e)+" is not iterable");if(s(g)){for(y=0,b=l(e);b>y;y++)if(w=D(e[y]),w&&c(m,w))return w;return new p(!1)}v=u(e,g)}k=F?e.next:v.next;while(!(x=o(k,v)).done){try{w=D(x.value)}catch(O){f(v,"throw",O)}if("object"==typeof w&&w&&c(m,w))return w}return new p(!1)}},9539:function(e,t,r){var n=r(69565),o=r(28551),i=r(55966);e.exports=function(e,t,r){var a,s;o(e);try{if(a=i(e,"return"),!a){if("throw"===t)throw r;return r}a=n(a,e)}catch(l){s=!0,a=l}if("throw"===t)throw r;if(s)throw a;return o(a),r}},57657:function(e,t,r){var n,o,i,a=r(79039),s=r(94901),l=r(20034),c=r(2360),u=r(42787),d=r(36840),f=r(78227),h=r(96395),p=f("iterator"),m=!1;[].keys&&(i=[].keys(),"next"in i?(o=u(u(i)),o!==Object.prototype&&(n=o)):m=!0);var v=!l(n)||a((function(){var e={};return n[p].call(e)!==e}));v?n={}:h&&(n=c(n)),s(n[p])||d(n,p,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:m}},26269:function(e){e.exports={}},2360:function(e,t,r){var n,o=r(28551),i=r(96801),a=r(88727),s=r(30421),l=r(20397),c=r(4055),u=r(66119),d=">",f="<",h="prototype",p="script",m=u("IE_PROTO"),v=function(){},g=function(e){return f+p+d+e+f+"/"+p+d},y=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=c("iframe"),r="java"+p+":";return t.style.display="none",l.appendChild(t),t.src=String(r),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},w=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}w="undefined"!=typeof document?document.domain&&n?y(n):b():y(n);var e=a.length;while(e--)delete w[h][a[e]];return w()};s[m]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(v[h]=o(e),r=new v,v[h]=null,r[m]=e):r=w(),void 0===t?r:i.f(r,t)}},96801:function(e,t,r){var n=r(43724),o=r(48686),i=r(24913),a=r(28551),s=r(25397),l=r(71072);t.f=n&&!o?Object.defineProperties:function(e,t){a(e);var r,n=s(t),o=l(t),c=o.length,u=0;while(c>u)i.f(e,r=o[u++],n[r]);return e}},71072:function(e,t,r){var n=r(61828),o=r(88727);e.exports=Object.keys||function(e){return n(e,o)}},44114:function(e,t,r){var n=r(46518),o=r(48981),i=r(26198),a=r(34527),s=r(96837),l=r(79039),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=c||!u();n({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=o(this),r=i(t),n=arguments.length;s(r+n);for(var l=0;l<n;l++)t[r]=arguments[l],r++;return a(t,r),r}})},18111:function(e,t,r){var n=r(46518),o=r(44576),i=r(90679),a=r(28551),s=r(94901),l=r(42787),c=r(62106),u=r(97040),d=r(79039),f=r(39297),h=r(78227),p=r(57657).IteratorPrototype,m=r(43724),v=r(96395),g="constructor",y="Iterator",b=h("toStringTag"),w=TypeError,k=o[y],x=v||!s(k)||k.prototype!==p||!d((function(){k({})})),_=function(){if(i(this,p),l(this)===p)throw new w("Abstract class Iterator not directly constructable")},C=function(e,t){m?c(p,e,{configurable:!0,get:function(){return t},set:function(t){if(a(this),this===p)throw new w("You can't redefine this property");f(this,e)?this[e]=t:u(this,e,t)}}):p[e]=t};f(p,b)||C(b,y),!x&&f(p,g)&&p[g]!==Object||C(g,_),_.prototype=p,n({global:!0,constructor:!0,forced:x},{Iterator:_})},20116:function(e,t,r){var n=r(46518),o=r(72652),i=r(79306),a=r(28551),s=r(1767);n({target:"Iterator",proto:!0,real:!0},{find:function(e){a(this),i(e);var t=s(this),r=0;return o(t,(function(t,n){if(e(t,r++))return n(t)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},7588:function(e,t,r){var n=r(46518),o=r(72652),i=r(79306),a=r(28551),s=r(1767);n({target:"Iterator",proto:!0,real:!0},{forEach:function(e){a(this),i(e);var t=s(this),r=0;o(t,(function(t){e(t,r++)}),{IS_RECORD:!0})}})},98992:function(e,t,r){r(18111)},72577:function(e,t,r){r(20116)},3949:function(e,t,r){r(7588)}}]);
//# sourceMappingURL=6025.f90043b1.js.map