"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[9537],{59537:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var a=r(20641),o=r(53751),n=r(90033);function i(e,t,r,i,s,l){const u=(0,a.g2)("v-app-bar-nav-icon"),c=(0,a.g2)("v-icon"),d=(0,a.g2)("v-list-item"),f=(0,a.g2)("router-link"),p=(0,a.g2)("Search"),h=(0,a.g2)("UserMenu"),v=(0,a.g2)("v-app-bar"),m=(0,a.g2)("v-list"),g=(0,a.g2)("v-navigation-drawer"),b=(0,a.g2)("router-view"),k=(0,a.g2)("v-container"),w=(0,a.g2)("v-main"),y=(0,a.g2)("v-footer"),x=(0,a.g2)("v-card-title"),F=(0,a.g2)("v-text-field"),_=(0,a.g2)("v-card-text"),I=(0,a.g2)("v-spacer"),S=(0,a.g2)("v-btn"),O=(0,a.g2)("v-card-actions"),P=(0,a.g2)("v-card"),V=(0,a.g2)("v-dialog"),A=(0,a.g2)("v-app");return(0,a.uX)(),(0,a.Wv)(A,null,{default:(0,a.k6)((()=>[(0,a.bF)(v,{app:"",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{onClick:t[0]||(t[0]=(0,o.D$)((e=>{s.mobile?s.drawer=!s.drawer:s.rail=!s.rail}),["stop"])),size:"small"}),s.display.mobile?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(f,{key:0,to:"/servers",class:"text-decoration-none text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(d,null,{prepend:(0,a.k6)((()=>[(0,a.bF)(c,{class:"mr-0 pl-3",size:"large",color:"primary"},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.eW)("fas fa-magic")]))),_:1})])),title:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.Lk)("h2",null,"ServerWand",-1)]))),_:1})])),_:1})),(0,a.bF)(p),(0,a.bF)(h)])),_:1}),(0,a.bF)(g,{modelValue:s.drawer,"onUpdate:modelValue":t[1]||(t[1]=e=>s.drawer=e),"expand-on-hover":!s.mobile,rail:s.rail,permanent:!s.mobile},{default:(0,a.k6)((()=>[(0,a.bF)(m,{nav:""},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"base-color":"primary",variant:"flat",to:s.createLink,class:"text-no-wrap"},{prepend:(0,a.k6)((()=>[(0,a.bF)(c,{size:"small",style:{width:"24px","text-align":"center"}},{default:(0,a.k6)((()=>t[13]||(t[13]=[(0,a.eW)("mdi:mdi-plus")]))),_:1})])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,n.v_)(s.createLabel),1)])),_:1},8,["to"]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.filtered,(e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.title,to:e.to,active:l.isActive(e.to),title:e.title},{prepend:(0,a.k6)((()=>[(0,a.bF)(c,{size:"small",style:{width:"24px","text-align":"center"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.icon),1)])),_:2},1024)])),_:2},1032,["to","active","title"])))),128))])),_:1})])),_:1},8,["modelValue","expand-on-hover","rail","permanent"]),(0,a.bF)(w,null,{default:(0,a.k6)((()=>[(0,a.bF)(k,{fluid:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{restricted:s.restricted},null,8,["restricted"])])),_:1})])),_:1}),(0,a.bF)(y,{app:""}),(0,a.bF)(V,{modelValue:s.masterPasswordDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>s.masterPasswordDialog=e),persistent:"","max-width":"600px"},{default:(0,a.k6)((()=>[(0,a.bF)(P,null,{default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>t[14]||(t[14]=[(0,a.Lk)("span",{class:"headline"},"Master password required",-1)]))),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:s.masterPassword,"onUpdate:modelValue":t[2]||(t[2]=e=>s.masterPassword=e),type:"password",label:"Master password",required:"","browser-autocomplete":"new-password"},null,8,["modelValue"])])),_:1}),(0,a.bF)(O,null,{default:(0,a.k6)((()=>[(0,a.bF)(I),(0,a.bF)(S,{color:"blue darken-1",flat:"",onClick:t[3]||(t[3]=e=>s.masterPasswordDialog=!1)},{default:(0,a.k6)((()=>t[15]||(t[15]=[(0,a.eW)("Close")]))),_:1}),(0,a.bF)(S,{color:"blue darken-1",flat:"",onClick:t[4]||(t[4]=e=>l.submitMasterPassword())},{default:(0,a.k6)((()=>t[16]||(t[16]=[(0,a.eW)("OK")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(V,{modelValue:s.resetKeyDialog,"onUpdate:modelValue":t[10]||(t[10]=e=>s.resetKeyDialog=e),persistent:"","max-width":"600px"},{default:(0,a.k6)((()=>[(0,a.bF)(P,null,{default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>t[17]||(t[17]=[(0,a.Lk)("span",{class:"headline"},"Reset key",-1)]))),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:s.data.user,"onUpdate:modelValue":t[6]||(t[6]=e=>s.data.user=e),label:"Username",required:""},null,8,["modelValue"]),(0,a.bF)(F,{type:"password",modelValue:s.data.pass,"onUpdate:modelValue":t[7]||(t[7]=e=>s.data.pass=e),label:"Password",required:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(O,null,{default:(0,a.k6)((()=>[(0,a.bF)(I),(0,a.bF)(S,{color:"blue darken-1",flat:"",onClick:t[8]||(t[8]=e=>s.resetKeyDialog=!1)},{default:(0,a.k6)((()=>t[18]||(t[18]=[(0,a.eW)("Close")]))),_:1}),(0,a.bF)(S,{color:"blue darken-1",flat:"",onClick:t[9]||(t[9]=t=>e.submitResetKey())},{default:(0,a.k6)((()=>t[19]||(t[19]=[(0,a.eW)("OK")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}r(98992),r(54520);const s={class:"flex-1-1 mx-2"};function l(e,t,r,o,n,i){const l=(0,a.g2)("v-list-item"),u=(0,a.g2)("v-autocomplete");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(u,{modelValue:e.model,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.model=t),i.afterselection],items:e.items,label:"Search",placeholder:"Search",ref:"autocomplete","hide-details":"","prepend-inner-icon":"mdi:mdi-magnify","single-line":"",rounded:"",variant:"solo-filled"},{item:(0,a.k6)((({props:e,item:t})=>[(0,a.bF)(l,(0,a.v6)(e,{"prepend-icon":t?.raw?.avatar,title:t?.raw?.title,subtitle:t?.raw?.subtitle}),null,16,["prepend-icon","title","subtitle"])])),_:1},8,["modelValue","items","onUpdate:modelValue"])])}r(44114),r(3949);var u=r(74300),c={data:()=>({model:null,items:[],servers:[]}),created(){this.fetchData()},methods:{fetchData(){this.error=this.post=null,this.loading=!0,u.A.get("servers/").then((e=>{console.log(e),e.data.items.forEach((e=>{let t="fas fa-server";switch(e.provider){case"linode":t="fab fa-linode";break;case"digitalocean":t="fab fa-digital-ocean";break}this.items.push({title:e.name,subtitle:e.hostname,value:"/servers/"+e.id+"/summary",avatar:t}),this.servers[e.id]=e.name}))})).catch((e=>console.log(e))).finally((()=>{this.loading=!1})),u.A.get("sites/").then((e=>{console.log(e),e.data.items.forEach((e=>{let t="fas fa-sitemap";switch(e.app){case"wordpress":t="fab fa-wordpress";break;case"git":t="fab fa-git";break;case"node":t="fab fa-node-js";break;case"joomla":t="fab fa-joomla";break;case"drupal":t="fab fa-drupal";break;case"magento":t="fab fa-magento";break;case"roundcube":t="fas fa-envelope";break;case"shiftlib":t="fas fa-user-edit";break}this.items.push({title:e.domain,subtitle:this.servers[e.server],value:"/sites/"+e.id+"/summary",avatar:t})}))})).catch((e=>console.log(e))).finally((()=>this.loading=!1))},afterselection(){this.$nextTick((()=>{this.$router.push(this.model),this.model=null,this.$refs.autocomplete.blur()}))}}},d=r(66262);const f=(0,d.A)(c,[["render",l]]);var p=f;function h(e,t,r,o,n,i){const s=(0,a.g2)("v-btn"),l=(0,a.g2)("v-list-item"),u=(0,a.g2)("v-list"),c=(0,a.g2)("v-menu");return(0,a.uX)(),(0,a.Wv)(c,{"offset-y":"",left:""},{activator:(0,a.k6)((({props:e})=>[(0,a.bF)(s,(0,a.v6)({icon:"mdi:mdi-account-circle"},e),null,16)])),default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.items,((e,t)=>((0,a.uX)(),(0,a.Wv)(l,{key:t,onClick:t=>i.goto(e.to),title:e.value,"prepend-icon":e.icon},null,8,["onClick","title","prepend-icon"])))),128))])),_:1})])),_:1})}var v={data:()=>({items:[{value:"Settings",to:"/settings/profile",icon:"fas fa-wrench"},{value:"Log out",to:"/auth/logout",icon:"fas fa-sign-out-alt"}]}),methods:{goto(e){this.$router.push(e)}}};const m=(0,d.A)(v,[["render",h]]);var g=m,b=r(72505),k=r.n(b),w=r(71312),y=r(81828),x={components:{Search:p,UserMenu:g},data(){return{serverId:0,data:{},dark:!1,items:[{title:"Servers",to:"/servers",restricted:!0,icon:"fas fa-server"},{title:"Sites",to:"/sites",restricted:!1,icon:"fas fa-sitemap"},{title:"Domains",to:"/domains",restricted:!1,icon:"fas fa-globe"},{title:"Teams",to:"/teams",restricted:!0,icon:"fas fa-users"},{title:"Users",to:"/users",restricted:!0,icon:"fas fa-user"}],filtered:[],resetKeyDialog:!1,masterPasswordDialog:!1,masterPassword:"",restricted:!1,rail:!0,drawer:!0,display:{},createLink:"",createLabel:"",mobile:!1}},created(){this.display=this.$vuetify.display,k().interceptors.response.use((e=>!!e&&("master password"!=e.data.error?"missing key"==e.data.error?(this.resetKeyDialog=!0,this.serverId=e.data.server,e):e:void(this.masterPasswordDialog=!0))),(e=>{const t=e.config;return!(!e.response||401===e.response.status&&!t._retry)&&Promise.reject(e)})),this.fetchData()},mounted(){const{mobile:e}=(0,y._F)();this.mobile=e,0!==parseInt(localStorage.dark)&&(this.dark=!0,this.$vuetify.theme.dark=!0),"false"===localStorage.rail&&(this.rail=!1),this.updateCreateButton()},watch:{dark(e){e?(localStorage.dark=1,this.$vuetify.theme.dark=!0):(localStorage.dark=0,this.$vuetify.theme.dark=!1)},data(){this.restricted="0"!==this.data.user,this.filtered=this.items.filter((e=>!this.restricted||!e.restricted))},mobile(e){this.rail=!e,this.drawer=!e},rail(e){localStorage.rail=e},"$route.path":function(){this.updateCreateButton()}},methods:{fetchData(){this.error="",this.loading=!0,u.A.get("settings/profile").then((e=>{console.log(e),this.data=e.data.profile})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},submitMasterPassword(){u.A.post("auth/masterpassword",{masterPassword:(0,w.sha256)(this.masterPassword)}).then((e=>{console.log(e),e.data.success?this.$router.go():this.error=e.data.error})).catch((e=>{console.log(e)})).finally((()=>{this.dialog=!1,this.loading=!1}))},resetKey(){u.A.post("servers/"+this.serverId+"/resetkey",{username:this.data.user,password:this.data.pass}).then((e=>{console.log(e),e.data.success?this.$router.go():this.error=e.data.error})).catch((e=>{console.log(e)})).finally((()=>{this.resetKeyDialog=!1,this.loading=!1}))},isActive(e){return location.pathname.startsWith(e)},updateCreateButton(){let e=this.$route.path.split("/");e.shift();let t=e[0];["servers","sites","domains","teams","users"].includes(e[0])||(t="servers"),this.createLink="/"+t+"/create";let r="New ";r+=t.substr(0,t.length-1),this.createLabel=r}}};const F=(0,d.A)(x,[["render",i]]);var _=F},90679:function(e,t,r){var a=r(1625),o=TypeError;e.exports=function(e,t){if(a(t,e))return e;throw new o("Incorrect invocation")}},96319:function(e,t,r){var a=r(28551),o=r(9539);e.exports=function(e,t,r,n){try{return n?t(a(r)[0],r[1]):t(r)}catch(i){o(e,"throw",i)}}},36955:function(e,t,r){var a=r(92140),o=r(94901),n=r(22195),i=r(78227),s=i("toStringTag"),l=Object,u="Arguments"===n(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(r){}};e.exports=a?n:function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=c(t=l(e),s))?r:u?n(t):"Object"===(a=n(t))&&o(t.callee)?"Arguments":a}},12211:function(e,t,r){var a=r(79039);e.exports=!a((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},62529:function(e){e.exports=function(e,t){return{value:e,done:t}}},97040:function(e,t,r){var a=r(43724),o=r(24913),n=r(6980);e.exports=function(e,t,r){a?o.f(e,t,n(0,r)):e[t]=r}},62106:function(e,t,r){var a=r(50283),o=r(24913);e.exports=function(e,t,r){return r.get&&a(r.get,t,{getter:!0}),r.set&&a(r.set,t,{setter:!0}),o.f(e,t,r)}},56279:function(e,t,r){var a=r(36840);e.exports=function(e,t,r){for(var o in t)a(e,o,t[o],r);return e}},76080:function(e,t,r){var a=r(27476),o=r(79306),n=r(40616),i=a(a.bind);e.exports=function(e,t){return o(e),void 0===t?e:n?i(e,t):function(){return e.apply(t,arguments)}}},27476:function(e,t,r){var a=r(22195),o=r(79504);e.exports=function(e){if("Function"===a(e))return o(e)}},1767:function(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},50851:function(e,t,r){var a=r(36955),o=r(55966),n=r(64117),i=r(26269),s=r(78227),l=s("iterator");e.exports=function(e){if(!n(e))return o(e,l)||o(e,"@@iterator")||i[a(e)]}},70081:function(e,t,r){var a=r(69565),o=r(79306),n=r(28551),i=r(16823),s=r(50851),l=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(o(r))return n(a(r,e));throw new l(i(e)+" is not iterable")}},20397:function(e,t,r){var a=r(97751);e.exports=a("document","documentElement")},44209:function(e,t,r){var a=r(78227),o=r(26269),n=a("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||i[n]===e)}},72652:function(e,t,r){var a=r(76080),o=r(69565),n=r(28551),i=r(16823),s=r(44209),l=r(26198),u=r(1625),c=r(70081),d=r(50851),f=r(9539),p=TypeError,h=function(e,t){this.stopped=e,this.result=t},v=h.prototype;e.exports=function(e,t,r){var m,g,b,k,w,y,x,F=r&&r.that,_=!(!r||!r.AS_ENTRIES),I=!(!r||!r.IS_RECORD),S=!(!r||!r.IS_ITERATOR),O=!(!r||!r.INTERRUPTED),P=a(t,F),V=function(e){return m&&f(m,"normal",e),new h(!0,e)},A=function(e){return _?(n(e),O?P(e[0],e[1],V):P(e[0],e[1])):O?P(e,V):P(e)};if(I)m=e.iterator;else if(S)m=e;else{if(g=d(e),!g)throw new p(i(e)+" is not iterable");if(s(g)){for(b=0,k=l(e);k>b;b++)if(w=A(e[b]),w&&u(v,w))return w;return new h(!1)}m=c(e,g)}y=I?e.next:m.next;while(!(x=o(y,m)).done){try{w=A(x.value)}catch(E){f(m,"throw",E)}if("object"==typeof w&&w&&u(v,w))return w}return new h(!1)}},9539:function(e,t,r){var a=r(69565),o=r(28551),n=r(55966);e.exports=function(e,t,r){var i,s;o(e);try{if(i=n(e,"return"),!i){if("throw"===t)throw r;return r}i=a(i,e)}catch(l){s=!0,i=l}if("throw"===t)throw r;if(s)throw i;return o(i),r}},19462:function(e,t,r){var a=r(69565),o=r(2360),n=r(66699),i=r(56279),s=r(78227),l=r(91181),u=r(55966),c=r(57657).IteratorPrototype,d=r(62529),f=r(9539),p=s("toStringTag"),h="IteratorHelper",v="WrapForValidIterator",m=l.set,g=function(e){var t=l.getterFor(e?v:h);return i(o(c),{next:function(){var r=t(this);if(e)return r.nextHandler();try{var a=r.done?void 0:r.nextHandler();return d(a,r.done)}catch(o){throw r.done=!0,o}},return:function(){var r=t(this),o=r.iterator;if(r.done=!0,e){var n=u(o,"return");return n?a(n,o):d(void 0,!0)}if(r.inner)try{f(r.inner.iterator,"normal")}catch(i){return f(o,"throw",i)}return o&&f(o,"normal"),d(void 0,!0)}})},b=g(!0),k=g(!1);n(k,p,"Iterator Helper"),e.exports=function(e,t){var r=function(r,a){a?(a.iterator=r.iterator,a.next=r.next):a=r,a.type=t?v:h,a.nextHandler=e,a.counter=0,a.done=!1,m(this,a)};return r.prototype=t?b:k,r}},57657:function(e,t,r){var a,o,n,i=r(79039),s=r(94901),l=r(20034),u=r(2360),c=r(42787),d=r(36840),f=r(78227),p=r(96395),h=f("iterator"),v=!1;[].keys&&(n=[].keys(),"next"in n?(o=c(c(n)),o!==Object.prototype&&(a=o)):v=!0);var m=!l(a)||i((function(){var e={};return a[h].call(e)!==e}));m?a={}:p&&(a=u(a)),s(a[h])||d(a,h,(function(){return this})),e.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:v}},26269:function(e){e.exports={}},2360:function(e,t,r){var a,o=r(28551),n=r(96801),i=r(88727),s=r(30421),l=r(20397),u=r(4055),c=r(66119),d=">",f="<",p="prototype",h="script",v=c("IE_PROTO"),m=function(){},g=function(e){return f+h+d+e+f+"/"+h+d},b=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},k=function(){var e,t=u("iframe"),r="java"+h+":";return t.style.display="none",l.appendChild(t),t.src=String(r),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},w=function(){try{a=new ActiveXObject("htmlfile")}catch(t){}w="undefined"!=typeof document?document.domain&&a?b(a):k():b(a);var e=i.length;while(e--)delete w[p][i[e]];return w()};s[v]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(m[p]=o(e),r=new m,m[p]=null,r[v]=e):r=w(),void 0===t?r:n.f(r,t)}},96801:function(e,t,r){var a=r(43724),o=r(48686),n=r(24913),i=r(28551),s=r(25397),l=r(71072);t.f=a&&!o?Object.defineProperties:function(e,t){i(e);var r,a=s(t),o=l(t),u=o.length,c=0;while(u>c)n.f(e,r=o[c++],a[r]);return e}},42787:function(e,t,r){var a=r(39297),o=r(94901),n=r(48981),i=r(66119),s=r(12211),l=i("IE_PROTO"),u=Object,c=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=n(e);if(a(t,l))return t[l];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof u?c:null}},71072:function(e,t,r){var a=r(61828),o=r(88727);e.exports=Object.keys||function(e){return a(e,o)}},92140:function(e,t,r){var a=r(78227),o=a("toStringTag"),n={};n[o]="z",e.exports="[object z]"===String(n)},18111:function(e,t,r){var a=r(46518),o=r(44576),n=r(90679),i=r(28551),s=r(94901),l=r(42787),u=r(62106),c=r(97040),d=r(79039),f=r(39297),p=r(78227),h=r(57657).IteratorPrototype,v=r(43724),m=r(96395),g="constructor",b="Iterator",k=p("toStringTag"),w=TypeError,y=o[b],x=m||!s(y)||y.prototype!==h||!d((function(){y({})})),F=function(){if(n(this,h),l(this)===h)throw new w("Abstract class Iterator not directly constructable")},_=function(e,t){v?u(h,e,{configurable:!0,get:function(){return t},set:function(t){if(i(this),this===h)throw new w("You can't redefine this property");f(this,e)?this[e]=t:c(this,e,t)}}):h[e]=t};f(h,k)||_(k,b),!x&&f(h,g)&&h[g]!==Object||_(g,F),F.prototype=h,a({global:!0,constructor:!0,forced:x},{Iterator:F})},22489:function(e,t,r){var a=r(46518),o=r(69565),n=r(79306),i=r(28551),s=r(1767),l=r(19462),u=r(96319),c=r(96395),d=l((function(){var e,t,r,a=this.iterator,n=this.predicate,s=this.next;while(1){if(e=i(o(s,a)),t=this.done=!!e.done,t)return;if(r=e.value,u(a,n,[r,this.counter++],!0))return r}}));a({target:"Iterator",proto:!0,real:!0,forced:c},{filter:function(e){return i(this),n(e),new d(s(this),{predicate:e})}})},7588:function(e,t,r){var a=r(46518),o=r(72652),n=r(79306),i=r(28551),s=r(1767);a({target:"Iterator",proto:!0,real:!0},{forEach:function(e){i(this),n(e);var t=s(this),r=0;o(t,(function(t){e(t,r++)}),{IS_RECORD:!0})}})},98992:function(e,t,r){r(18111)},54520:function(e,t,r){r(22489)},3949:function(e,t,r){r(7588)}}]);
//# sourceMappingURL=9537.78a1c635.js.map