"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[5568],{11297:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(66252);function a(e,t,n,a,o,i){var u=(0,r.up)("v-icon"),d=(0,r.up)("v-alert"),l=(0,r.up)("v-dialog");return(0,r.wg)(),(0,r.j4)(l,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.show=t}),persistent:"",width:"600"},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{title:n.message,color:"primary"},{prepend:(0,r.w5)((function(){return[(0,r.Wm)(u,{icon:"fas fa-magic fa-2x faa-horizontal animated"})]})),_:1},8,["title"])]})),_:1},8,["modelValue"])}var o={name:"Loading",data:function(){return{show:!1}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},i=n(83744);const u=(0,i.Z)(o,[["render",a]]);var d=u},38246:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(66252);function a(e,t,n,a,o,i){var u=(0,r.up)("Loading"),d=(0,r.up)("v-btn"),l=(0,r.up)("v-card-text"),s=(0,r.up)("v-card"),c=(0,r.up)("v-dialog");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(u,{value:e.loading},null,8,["value"]),(0,r.Wm)(c,{modelValue:e.authRequired,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.authRequired=t})},{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{title:"Auth required"},{default:(0,r.w5)((function(){return[(0,r.Wm)(l,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{onClick:t[0]||(t[0]=function(e){return i.authPrompt()})},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Continue ")]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])}n(60228),n(70560);var o=n(1006),i=n(11297),u={components:{Loading:i.Z},name:"Site",data:function(){return{loading:!1,newWindow:!1,provider:"linode",authRequired:!1}},methods:{create:function(e){var t=this;this.loading=!0,o.Z.post("sites/create",e).then((function(n){if(n.data.site_id)t.$router.push("/sites/"+n.data.site_id+"/summary");else if(n.data.error)if("auth"===n.data.error){t.provider=n.data.provider,t.authRequired=!0;var r=setInterval((function(){if(t.newWindow&&t.newWindow.closed)return t.newWindow=null,clearInterval(r),void t.create(e)}),500)}else t.$emit("error",n.data.error)})).catch((function(e){return console.log(e)})).finally((function(){return t.loading=!1}))},authPrompt:function(){this.authRequired=!1,this.newWindow=window.open("https://serverwand.com/account/services/"+this.provider)}}},d=n(83744);const l=(0,d.Z)(u,[["render",a]]);var s=l},45568:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(66252);function a(e,t,n,a,o,i){var u=(0,r.up)("v-alert"),d=(0,r.up)("Loading"),l=(0,r.up)("v-text-field"),s=(0,r.up)("v-select"),c=(0,r.up)("v-checkbox"),f=(0,r.up)("v-btn"),m=(0,r.up)("v-form"),v=(0,r.up)("v-card-text"),h=(0,r.up)("v-card"),p=(0,r.up)("Site");return(0,r.wg)(),(0,r.iD)("div",null,[e.error?((0,r.wg)(),(0,r.j4)(u,{key:0,type:"error",text:e.error},null,8,["text"])):(0,r.kq)("",!0),(0,r.Wm)(d,{value:e.loading},null,8,["value"]),e.serverId?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(h,{key:1,title:"Site details"},{default:(0,r.w5)((function(){return[(0,r.Wm)(v,null,{default:(0,r.w5)((function(){return[e.loading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(m,{key:0,ref:"form",modelValue:e.valid,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.valid=t}),"lazy-validation":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(l,{disabled:e.domainId>0,modelValue:e.data.domain,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.data.domain=t}),rules:e.domainRules,label:"Domain",required:"",autofocus:""},null,8,["disabled","modelValue","rules"]),(0,r.Wm)(s,{disabled:e.domainId>0,modelValue:e.data.server,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.data.server=t}),items:e.servers,label:"Server",rules:[function(e){return!!e||"Server is required"}],required:""},null,8,["disabled","modelValue","items","rules"]),(0,r.Wm)(c,{modelValue:e.data.dns,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.data.dns=t}),label:"Configure DNS",disabled:!e.data.server||""==e.dnsProviders[e.data.server]},null,8,["modelValue","disabled"]),(0,r.Wm)(f,{disabled:!e.valid,loading:e.loading,color:"success",onClick:i.save},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Save ")]})),_:1},8,["disabled","loading","onClick"])]})),_:1},8,["modelValue"]))]})),_:1})]})),_:1})),(0,r.Wm)(p,{ref:"Site",onError:t[4]||(t[4]=function(t){return e.error=t})},null,512)])}n(60228),n(47522),n(70560),n(34284),n(3650);var o=n(1006),i=n(11297),u=n(38246),d={components:{Loading:i.Z,Site:u.Z},data:function(){return{loading:!1,valid:!0,data:{domain:"",password:"",server:"",dns:!1},domainRules:[function(e){return!!e||"Domain is required"}],passwordRules:[],servers:[],dnsProviders:{},details:"",serverId:0,error:"",authRequired:!1}},created:function(){document.title="Site details",this.domainId=this.$route.params.id,this.fetchData(),localStorage.dns&&(this.data.dns=!0)},methods:{fetchData:function(){var e=this;this.error="",this.loading=!1,o.Z.get("sites/"+this.domainId).then((function(t){console.log(t),e.domainId&&(e.data=t.data.items[0])})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1})),o.Z.get("servers/").then((function(t){console.log(t),t.data.items.forEach((function(t){e.servers.push({title:t.name,value:t.id}),e.dnsProviders[t.id]=t.dns}))})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))},save:function(){var e=this;this.error="",this.details="",this.loading=!0,this.data.dns?localStorage.dns="1":delete localStorage.dns,console.log(arguments),this.domainId?o.Z.post("sites/"+this.domainId+"/update",this.data).then((function(t){if(console.log(t),t.data.error)return e.error=t.data.error,!1;e.$router.push("/sites/"+e.domainId+"/summary")})).catch((function(e){console.log(e),self.error=e})):(this.loading=!1,this.$refs.Site.create(this.data))}}},l=n(83744);const s=(0,l.Z)(d,[["render",a]]);var c=s},3650:function(e,t,n){var r=n(79989),a=n(19037),o=n(62148),i=n(67697),u=TypeError,d=Object.defineProperty,l=a.self!==a;try{if(i){var s=Object.getOwnPropertyDescriptor(a,"self");!l&&s&&s.get&&s.enumerable||o(a,"self",{get:function(){return a},set:function(e){if(this!==a)throw new u("Illegal invocation");d(a,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else r({global:!0,simple:!0,forced:l},{self:a})}catch(c){}}}]);
//# sourceMappingURL=5568-legacy.c11eb7cf.js.map