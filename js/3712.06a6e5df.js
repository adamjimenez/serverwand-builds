"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[3712],{81815:function(e,t,r){r.d(t,{A:function(){return s}});var a=r(20641);function o(e,t,r,o,n,i){const l=(0,a.g2)("v-icon"),s=(0,a.g2)("v-alert"),d=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",width:"600"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{title:r.message,color:"primary"},{prepend:(0,a.k6)((()=>[(0,a.bF)(l,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1},8,["title"])])),_:1},8,["modelValue"])}var n={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},i=r(66262);const l=(0,i.A)(n,[["render",o]]);var s=l},3712:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var a=r(20641);const o={key:2},n={key:3},i={key:0},l=["innerHTML"];function s(e,t,r,s,d,u){const c=(0,a.g2)("v-alert"),p=(0,a.g2)("Loading"),v=(0,a.g2)("v-card-subtitle"),h=(0,a.g2)("v-list"),f=(0,a.g2)("v-select"),m=(0,a.g2)("v-text-field"),g=(0,a.g2)("v-checkbox"),b=(0,a.g2)("v-btn"),y=(0,a.g2)("v-form"),k=(0,a.g2)("v-card-text"),w=(0,a.g2)("v-card"),V=(0,a.g2)("v-icon"),I=(0,a.g2)("v-progress-linear"),_=(0,a.g2)("v-dialog"),x=(0,a.g2)("v-card-title"),O=(0,a.g2)("v-navigation-drawer");return(0,a.uX)(),(0,a.CE)("div",null,[e.error?((0,a.uX)(),(0,a.Wv)(c,{key:0,type:"error",text:e.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(p,{value:e.loading},null,8,["value"]),(0,a.bF)(w,{loading:e.fetching,class:"pb-5",title:"Server details"},{default:(0,a.k6)((()=>[e.serverId?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(v,{key:0},{default:(0,a.k6)((()=>t[19]||(t[19]=[(0,a.eW)(" Choose a VPS provider below or connect to a server freshly installed with Ubuntu ")]))),_:1})),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[e.serverId?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(h,{key:0,items:e.items,"onClick:select":u.getOptions},null,8,["items","onClick:select"])),e.data.provider||e.serverId?((0,a.uX)(),(0,a.Wv)(y,{key:1,ref:"form",modelValue:e.valid,"onUpdate:modelValue":t[13]||(t[13]=t=>e.valid=t),class:"mt-5"},{default:(0,a.k6)((()=>[e.unclaimed.length?((0,a.uX)(),(0,a.Wv)(f,{key:0,modelValue:e.data.unclaimed,"onUpdate:modelValue":t[0]||(t[0]=t=>e.data.unclaimed=t),items:e.unclaimed,label:"Server"},null,8,["modelValue","items"])):(0,a.Q3)("",!0),(0,a.bF)(m,{modelValue:e.data.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.data.name=t),label:"Name",rules:[e.rules.required,e.rules.alphanumeric],required:""},null,8,["modelValue","rules"]),this.serverId>0?((0,a.uX)(),(0,a.Wv)(m,{key:1,modelValue:e.data.ip,"onUpdate:modelValue":t[2]||(t[2]=t=>e.data.ip=t),rules:[e.rules.required,e.rules.ip],label:"Server IP"},null,8,["modelValue","rules"])):(0,a.Q3)("",!0),"custom"===e.data.provider||"vultr"===e.data.provider||e.unclaimed.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",o,[e.serverId?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(f,{key:0,modelValue:e.data.region,"onUpdate:modelValue":t[3]||(t[3]=t=>e.data.region=t),items:e.regions,label:"Region"},null,8,["modelValue","items"])),e.serverId?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(f,{key:1,modelValue:e.data.type,"onUpdate:modelValue":t[4]||(t[4]=t=>e.data.type=t),items:e.types,label:"Type"},null,8,["modelValue","items"])),!e.serverId&&e.images.length?((0,a.uX)(),(0,a.Wv)(f,{key:2,modelValue:e.data.image,"onUpdate:modelValue":t[5]||(t[5]=t=>e.data.image=t),items:e.images,label:"Image"},null,8,["modelValue","items"])):(0,a.Q3)("",!0)])),"custom"==e.data.provider||"vultr"==e.data.provider?((0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(m,{disabled:e.serverId>0,modelValue:e.data.hostname,"onUpdate:modelValue":t[6]||(t[6]=t=>e.data.hostname=t),label:"Host name",rules:[e.rules.required],required:""},null,8,["disabled","modelValue","rules"]),"custom"==e.data.provider?((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(m,{disabled:e.serverId>0,modelValue:e.data.user,"onUpdate:modelValue":t[7]||(t[7]=t=>e.data.user=t),label:"Username",rules:[e.rules.required],required:""},null,8,["disabled","modelValue","rules"]),(0,a.bF)(m,{type:"password",disabled:e.serverId>0,modelValue:e.data.pass,"onUpdate:modelValue":t[8]||(t[8]=t=>e.data.pass=t),label:"Password",required:""},null,8,["disabled","modelValue"])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),e.serverId>0||"custom"==e.data.provider?((0,a.uX)(),(0,a.Wv)(m,{key:4,modelValue:e.data.port,"onUpdate:modelValue":t[9]||(t[9]=t=>e.data.port=t),label:"Port",required:""},null,8,["modelValue"])):(0,a.Q3)("",!0),"custom"===e.data.provider||e.serverId>0?((0,a.uX)(),(0,a.Wv)(f,{key:5,modelValue:e.data.dns,"onUpdate:modelValue":t[10]||(t[10]=t=>e.data.dns=t),items:e.dns,label:"DNS provider"},null,8,["modelValue","items"])):(0,a.Q3)("",!0),e.data.dns?((0,a.uX)(),(0,a.Wv)(f,{key:6,modelValue:e.data.provider_token,"onUpdate:modelValue":t[11]||(t[11]=t=>e.data.provider_token=t),items:e.provider_tokens,label:"DNS provider API token (optional)"},null,8,["modelValue","items"])):(0,a.Q3)("",!0),(0,a.bF)(g,{modelValue:e.data.mailserver,"onUpdate:modelValue":t[12]||(t[12]=t=>e.data.mailserver=t),label:"Mailserver"},null,8,["modelValue"]),(0,a.bF)(b,{disabled:!e.valid,loading:e.dialog,color:"success",onClick:u.validate},{default:(0,a.k6)((()=>t[20]||(t[20]=[(0,a.eW)(" Save ")]))),_:1},8,["disabled","loading","onClick"])])),_:1},8,["modelValue"])):(0,a.Q3)("",!0)])),_:1})])),_:1},8,["loading"]),(0,a.bF)(_,{modelValue:e.dialog,"onUpdate:modelValue":t[15]||(t[15]=t=>e.dialog=t),persistent:"",width:"300"},{default:(0,a.k6)((()=>[(0,a.bF)(w,{color:"primary"},{default:(0,a.k6)((()=>[(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(c,{title:"Spellcasting...",color:"primary"},{prepend:(0,a.k6)((()=>[(0,a.bF)(V,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1}),(0,a.bF)(I,{indeterminate:0==e.progress,modelValue:e.progress,"onUpdate:modelValue":t[14]||(t[14]=t=>e.progress=t),color:"white"},null,8,["indeterminate","modelValue"]),(0,a.Lk)("div",{innerHTML:e.details},null,8,l)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(O,{modelValue:e.drawer,"onUpdate:modelValue":t[18]||(t[18]=t=>e.drawer=t),temporary:"",right:"",app:""},{default:(0,a.k6)((()=>[(0,a.bF)(w,null,{default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>t[21]||(t[21]=[(0,a.eW)(" API token ")]))),_:1}),(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:e.provider_token.label,"onUpdate:modelValue":t[16]||(t[16]=t=>e.provider_token.label=t),label:"Label",required:""},null,8,["modelValue"]),(0,a.bF)(m,{modelValue:e.provider_token.token,"onUpdate:modelValue":t[17]||(t[17]=t=>e.provider_token.token=t),label:"Token",required:""},null,8,["modelValue"]),(0,a.bF)(b,{disabled:e.fetching,loading:e.fetching,color:"success",onClick:u.submitToken},{default:(0,a.k6)((()=>t[22]||(t[22]=[(0,a.eW)(" Save ")]))),_:1},8,["disabled","loading","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}r(44114),r(98992),r(3949);var d=r(74300),u=r(81815),c={components:{Loading:u.A},data:()=>({fetching:!1,loading:!1,valid:!0,data:{images:[],unclaimed:[],provider:"",name:"New-server",hostname:"",user:"root",pass:"",port:"22",webserver:!0,mailserver:!1},dns:[{title:"Linode",value:"linode"},{title:"Digital Ocean",value:"digitalocean"},{title:"Other",value:""}],provider_tokens:[{title:"Add new",value:"new"}],rules:{alphanumeric:e=>/^[a-zA-Z0-9_-]+$/g.test(e)||"Must contain alphanumeric characters only",required:e=>!!e||"Required.",port:e=>!e||/^\d+(:\d+)?$/.test(e)||"1-65535",ip:e=>!e||/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)||"Invalid IP address"},provider_token:{},drawer:!1,dialog:!1,details:"",serverId:0,error:"",progress:0,regions:[],types:[],images:[],unclaimed:[],items:[{title:"Linode",value:"linode",props:{prependIcon:"fab fa-linode"}},{title:"DigitalOcean",value:"digitalocean",props:{prependIcon:"fab fa-digital-ocean"}},{title:"Vultr",value:"vultr",props:{prependIcon:"fas fa-server"}},{title:"Ubuntu server",value:"custom",props:{prependIcon:"fab fa-ubuntu"}}],isOpen:!1,provider:"Choose"}),created(){document.title="Server details",this.$route.params.id&&(this.serverId=this.$route.params.id),this.fetchData(),this.$route.query.ip&&(this.data.hostname=this.$route.query.ip,this.data.provider="vultr",this.provider="vultr")},watch:{"data.provider_token":function(){"new"===this.data.provider_token&&(this.drawer=!0,this.data.provider_token="",this.provider_token["provider"]=this.data.dns)}},methods:{fetchData(){this.error="",this.loading=!0,d.A.get("servers/"+this.serverId).then((e=>{console.log(e),this.serverId&&(this.data=e.data.item)})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1})),d.A.get("providers/tokens").then((e=>{console.log(e),this.provider_tokens.splice(1),e.data.tokens&&e.data.tokens.forEach((e=>{this.provider_tokens.push({text:e.label,value:e.id})}))})).catch((e=>{this.error=e})).finally((()=>{this.loading=!1}))},install(){this.dialog=!0,this.details="";let e="servers/"+this.serverId+"/install?webserver=1";this.data.mailserver&&(e+="&mailserver=1"),d.A.event(e,(e=>{this.details=e.msg+"...",e.progress&&(this.progress=e.progress)}),(e=>{this.error=e}),(()=>{this.dialog=!1,this.error||this.$router.push("/servers/"+this.serverId+"/summary")}))},validate:async function(){const{valid:e}=await this.$refs.form.validate();e&&(this.details="",this.dialog=!0,this.error="",this.data.unclaimed>0&&(this.serverId=this.data.unclaimed),console.log("save server"),console.log(this.serverId),this.serverId?d.A.post("servers/"+this.serverId+"/update",this.data).then((()=>{this.install()})).catch((e=>{console.log(e)})):d.A.post("servers/create",this.data).then((e=>{console.log(e),e.data.success?e.data.id&&(this.serverId=e.data.id,this.serverId&&this.install()):(this.error=e.data.error,this.dialog=!1)})).catch((e=>{console.log(e),this.dialog=!1})))},getOptions(e,t){let r,a=e.id;this.data.provider=a,this.provider=a,"custom"!==a&&"vultr"!==a&&(t||(r=window.open("loading")),this.loading=!0,this.regions=[],this.images=[],this.types=[],this.unclaimed=[],d.A.post("providers/?cmd=options",{provider:a}).then((o=>{if(console.log(o),o.data.require_auth&&!t){r.location="https://serverwand.com/account/services/"+a;let t=setInterval((()=>{if(r.closed)return clearInterval(t),void this.getOptions(e,!0)}),500)}else o.data.require_auth||(r&&r.close(),this.regions=o.data.options.regions,this.images=o.data.options.images,this.types=o.data.options.types,o.data.unclaimed.forEach((e=>{this.unclaimed.push({title:e.label,value:e.id})})))})).catch((e=>{r&&r.close(),console.log(e)})).finally((()=>{this.loading=!1})))},submitToken(){d.A.post("providers/tokens",this.provider_token).then((e=>{e.data.error?this.error=e.data.error:(this.drawer=!1,this.fetchData())})).catch((e=>{this.error=e}))}}},p=r(66262);const v=(0,p.A)(c,[["render",s]]);var h=v},90679:function(e,t,r){var a=r(1625),o=TypeError;e.exports=function(e,t){if(a(t,e))return e;throw new o("Incorrect invocation")}},34527:function(e,t,r){var a=r(43724),o=r(34376),n=TypeError,i=Object.getOwnPropertyDescriptor,l=a&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=l?function(e,t){if(o(e)&&!i(e,"length").writable)throw new n("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},36955:function(e,t,r){var a=r(92140),o=r(94901),n=r(22195),i=r(78227),l=i("toStringTag"),s=Object,d="Arguments"===n(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(r){}};e.exports=a?n:function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=u(t=s(e),l))?r:d?n(t):"Object"===(a=n(t))&&o(t.callee)?"Arguments":a}},12211:function(e,t,r){var a=r(79039);e.exports=!a((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},97040:function(e,t,r){var a=r(43724),o=r(24913),n=r(6980);e.exports=function(e,t,r){a?o.f(e,t,n(0,r)):e[t]=r}},62106:function(e,t,r){var a=r(50283),o=r(24913);e.exports=function(e,t,r){return r.get&&a(r.get,t,{getter:!0}),r.set&&a(r.set,t,{setter:!0}),o.f(e,t,r)}},96837:function(e){var t=TypeError,r=9007199254740991;e.exports=function(e){if(e>r)throw t("Maximum allowed index exceeded");return e}},76080:function(e,t,r){var a=r(27476),o=r(79306),n=r(40616),i=a(a.bind);e.exports=function(e,t){return o(e),void 0===t?e:n?i(e,t):function(){return e.apply(t,arguments)}}},27476:function(e,t,r){var a=r(22195),o=r(79504);e.exports=function(e){if("Function"===a(e))return o(e)}},1767:function(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},50851:function(e,t,r){var a=r(36955),o=r(55966),n=r(64117),i=r(26269),l=r(78227),s=l("iterator");e.exports=function(e){if(!n(e))return o(e,s)||o(e,"@@iterator")||i[a(e)]}},70081:function(e,t,r){var a=r(69565),o=r(79306),n=r(28551),i=r(16823),l=r(50851),s=TypeError;e.exports=function(e,t){var r=arguments.length<2?l(e):t;if(o(r))return n(a(r,e));throw new s(i(e)+" is not iterable")}},20397:function(e,t,r){var a=r(97751);e.exports=a("document","documentElement")},44209:function(e,t,r){var a=r(78227),o=r(26269),n=a("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||i[n]===e)}},34376:function(e,t,r){var a=r(22195);e.exports=Array.isArray||function(e){return"Array"===a(e)}},72652:function(e,t,r){var a=r(76080),o=r(69565),n=r(28551),i=r(16823),l=r(44209),s=r(26198),d=r(1625),u=r(70081),c=r(50851),p=r(9539),v=TypeError,h=function(e,t){this.stopped=e,this.result=t},f=h.prototype;e.exports=function(e,t,r){var m,g,b,y,k,w,V,I=r&&r.that,_=!(!r||!r.AS_ENTRIES),x=!(!r||!r.IS_RECORD),O=!(!r||!r.IS_ITERATOR),A=!(!r||!r.INTERRUPTED),F=a(t,I),E=function(e){return m&&p(m,"normal",e),new h(!0,e)},S=function(e){return _?(n(e),A?F(e[0],e[1],E):F(e[0],e[1])):A?F(e,E):F(e)};if(x)m=e.iterator;else if(O)m=e;else{if(g=c(e),!g)throw new v(i(e)+" is not iterable");if(l(g)){for(b=0,y=s(e);y>b;b++)if(k=S(e[b]),k&&d(f,k))return k;return new h(!1)}m=u(e,g)}w=x?e.next:m.next;while(!(V=o(w,m)).done){try{k=S(V.value)}catch(T){p(m,"throw",T)}if("object"==typeof k&&k&&d(f,k))return k}return new h(!1)}},9539:function(e,t,r){var a=r(69565),o=r(28551),n=r(55966);e.exports=function(e,t,r){var i,l;o(e);try{if(i=n(e,"return"),!i){if("throw"===t)throw r;return r}i=a(i,e)}catch(s){l=!0,i=s}if("throw"===t)throw r;if(l)throw i;return o(i),r}},57657:function(e,t,r){var a,o,n,i=r(79039),l=r(94901),s=r(20034),d=r(2360),u=r(42787),c=r(36840),p=r(78227),v=r(96395),h=p("iterator"),f=!1;[].keys&&(n=[].keys(),"next"in n?(o=u(u(n)),o!==Object.prototype&&(a=o)):f=!0);var m=!s(a)||i((function(){var e={};return a[h].call(e)!==e}));m?a={}:v&&(a=d(a)),l(a[h])||c(a,h,(function(){return this})),e.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:f}},26269:function(e){e.exports={}},2360:function(e,t,r){var a,o=r(28551),n=r(96801),i=r(88727),l=r(30421),s=r(20397),d=r(4055),u=r(66119),c=">",p="<",v="prototype",h="script",f=u("IE_PROTO"),m=function(){},g=function(e){return p+h+c+e+p+"/"+h+c},b=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=d("iframe"),r="java"+h+":";return t.style.display="none",s.appendChild(t),t.src=String(r),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},k=function(){try{a=new ActiveXObject("htmlfile")}catch(t){}k="undefined"!=typeof document?document.domain&&a?b(a):y():b(a);var e=i.length;while(e--)delete k[v][i[e]];return k()};l[f]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(m[v]=o(e),r=new m,m[v]=null,r[f]=e):r=k(),void 0===t?r:n.f(r,t)}},96801:function(e,t,r){var a=r(43724),o=r(48686),n=r(24913),i=r(28551),l=r(25397),s=r(71072);t.f=a&&!o?Object.defineProperties:function(e,t){i(e);var r,a=l(t),o=s(t),d=o.length,u=0;while(d>u)n.f(e,r=o[u++],a[r]);return e}},42787:function(e,t,r){var a=r(39297),o=r(94901),n=r(48981),i=r(66119),l=r(12211),s=i("IE_PROTO"),d=Object,u=d.prototype;e.exports=l?d.getPrototypeOf:function(e){var t=n(e);if(a(t,s))return t[s];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof d?u:null}},71072:function(e,t,r){var a=r(61828),o=r(88727);e.exports=Object.keys||function(e){return a(e,o)}},92140:function(e,t,r){var a=r(78227),o=a("toStringTag"),n={};n[o]="z",e.exports="[object z]"===String(n)},44114:function(e,t,r){var a=r(46518),o=r(48981),n=r(26198),i=r(34527),l=r(96837),s=r(79039),d=s((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},c=d||!u();a({target:"Array",proto:!0,arity:1,forced:c},{push:function(e){var t=o(this),r=n(t),a=arguments.length;l(r+a);for(var s=0;s<a;s++)t[r]=arguments[s],r++;return i(t,r),r}})},18111:function(e,t,r){var a=r(46518),o=r(44576),n=r(90679),i=r(28551),l=r(94901),s=r(42787),d=r(62106),u=r(97040),c=r(79039),p=r(39297),v=r(78227),h=r(57657).IteratorPrototype,f=r(43724),m=r(96395),g="constructor",b="Iterator",y=v("toStringTag"),k=TypeError,w=o[b],V=m||!l(w)||w.prototype!==h||!c((function(){w({})})),I=function(){if(n(this,h),s(this)===h)throw new k("Abstract class Iterator not directly constructable")},_=function(e,t){f?d(h,e,{configurable:!0,get:function(){return t},set:function(t){if(i(this),this===h)throw new k("You can't redefine this property");p(this,e)?this[e]=t:u(this,e,t)}}):h[e]=t};p(h,y)||_(y,b),!V&&p(h,g)&&h[g]!==Object||_(g,I),I.prototype=h,a({global:!0,constructor:!0,forced:V},{Iterator:I})},7588:function(e,t,r){var a=r(46518),o=r(72652),n=r(79306),i=r(28551),l=r(1767);a({target:"Iterator",proto:!0,real:!0},{forEach:function(e){i(this),n(e);var t=l(this),r=0;o(t,(function(t){e(t,r++)}),{IS_RECORD:!0})}})},98992:function(e,t,r){r(18111)},3949:function(e,t,r){r(7588)}}]);
//# sourceMappingURL=3712.06a6e5df.js.map