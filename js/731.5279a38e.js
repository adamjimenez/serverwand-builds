"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[731,6260],{26301:function(e,t,r){r.d(t,{A:function(){return u}});var n=r(20641),o=r(90033),i=r(53751);function a(e,t,r,a,l,s){const c=(0,n.g2)("v-toolbar-title"),u=(0,n.g2)("v-toolbar"),d=(0,n.g2)("v-card-text"),f=(0,n.g2)("v-spacer"),h=(0,n.g2)("v-btn"),p=(0,n.g2)("v-card-actions"),g=(0,n.g2)("v-card"),v=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.Wv)(v,{modelValue:e.dialog,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dialog=t),"max-width":e.options.width,style:(0,o.Tr)({zIndex:e.options.zIndex}),onKeydown:(0,i.jR)(s.cancel,["esc"]),persistent:""},{default:(0,n.k6)((()=>[(0,n.bF)(g,null,{default:(0,n.k6)((()=>[(0,n.bF)(u,{dark:"",color:e.options.color,dense:"",flat:""},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"text-body-2 font-weight-bold grey--text"},{default:(0,n.k6)((()=>[(0,n.eW)((0,o.v_)(e.title),1)])),_:1})])),_:1},8,["color"]),(0,n.bo)((0,n.bF)(d,{class:"pa-4 black--text",innerHTML:e.message},null,8,["innerHTML"]),[[i.aG,!!e.message]]),(0,n.bF)(p,{class:"pt-3"},{default:(0,n.k6)((()=>[(0,n.bF)(f),e.options.noconfirm?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(h,{key:0,color:"grey",text:"",class:"body-2 font-weight-bold",onClick:s.cancel},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("Cancel")]))),_:1},8,["onClick"])),(0,n.bF)(h,{color:"primary",class:"body-2 font-weight-bold",outlined:"",onClick:s.agree},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("OK")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","max-width","style","onKeydown"])}var l={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"grey lighten-3",width:400,zIndex:10008,noconfirm:!1}}},methods:{open(e,t,r){return t||(t=e,e="Confirm"),this.dialog=!0,this.title=e,this.message=t,this.options=Object.assign(this.options,r),new Promise(((e,t)=>{this.resolve=e,this.reject=t}))},agree(){this.resolve(!0),this.dialog=!1},cancel(){this.resolve(!1),this.dialog=!1}}},s=r(66262);const c=(0,s.A)(l,[["render",a]]);var u=c},81815:function(e,t,r){r.d(t,{A:function(){return s}});var n=r(20641);function o(e,t,r,o,i,a){const l=(0,n.g2)("v-icon"),s=(0,n.g2)("v-alert"),c=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.Wv)(c,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",width:"600"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{title:r.message,color:"primary"},{prepend:(0,n.k6)((()=>[(0,n.bF)(l,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1},8,["title"])])),_:1},8,["modelValue"])}var i={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},a=r(66262);const l=(0,a.A)(i,[["render",o]]);var s=l},50731:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var n=r(20641),o=r(90033);const i=["src"];function a(e,t,r,a,l,s){const c=(0,n.g2)("v-alert"),u=(0,n.g2)("Loading"),d=(0,n.g2)("v-data-table"),f=(0,n.g2)("v-card-text"),h=(0,n.g2)("v-card"),p=(0,n.g2)("v-btn"),g=(0,n.g2)("ClearMailQueue"),v=(0,n.g2)("v-card-actions"),m=(0,n.g2)("v-card-title"),y=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.CE)("div",null,[l.error?((0,n.uX)(),(0,n.Wv)(c,{key:0,type:"error",text:l.error},null,8,["text"])):(0,n.Q3)("",!0),(0,n.bF)(u,{value:l.loading},null,8,["value"]),(0,n.bF)(h,{loading:l.fetching},{default:(0,n.k6)((()=>[l.items.length?((0,n.uX)(),(0,n.Wv)(d,{key:0,modelValue:l.selected,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selected=e),headers:l.headers,items:l.items,"show-select":"",class:"results","mobile-breakpoint":"0","onClick:row":s.view},{"item.size":(0,n.k6)((({item:e})=>[(0,n.Lk)("span",null,(0,o.v_)(s.prettyBytes(e.size)),1)])),_:1},8,["modelValue","headers","items","onClick:row"])):((0,n.uX)(),(0,n.Wv)(f,{key:1},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)(" Queue empty ")]))),_:1}))])),_:1},8,["loading"]),(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.bF)(v,null,{default:(0,n.k6)((()=>[(0,n.bF)(p,{onClick:t[1]||(t[1]=e=>s.deleteMail()),disabled:0===l.selected.length,loading:l.fetching},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)(" Delete ")]))),_:1},8,["disabled","loading"]),(0,n.bF)(g,{serverId:"serverId",server:l.data,class:"mx-3",onComplete:s.handleComplete},null,8,["server","onComplete"])])),_:1})])),_:1}),(0,n.bF)(y,{app:"",modelValue:l.emailDrawer,"onUpdate:modelValue":t[2]||(t[2]=e=>l.emailDrawer=e)},{default:(0,n.k6)((()=>[(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.eW)(" Message: "+(0,o.v_)(l.messageId),1)])),_:1}),(0,n.bF)(f,null,{default:(0,n.k6)((()=>[(0,n.Lk)("iframe",{width:"100%",height:"315",src:l.messageUrl,frameborder:"0"},null,8,i)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}r(44114),r(98992),r(3949);var l=r(74300),s=r(27274),c=r(81815);function u(e,t,r,i,a,l){const s=(0,n.g2)("v-btn"),c=(0,n.g2)("Confirm");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(s,(0,n.v6)({loading:a.fetching,onClick:l.deleteServer},e.$attrs,{disabled:a.fetching||0==r.server.queue}),{default:(0,n.k6)((()=>[(0,n.eW)(" Clear Mail Queue ("+(0,o.v_)(r.server.queue?r.server.queue:0)+") ",1)])),_:1},16,["loading","onClick","disabled"]),(0,n.bF)(c,{ref:"confirm"},null,512)])}var d=r(26301),f={components:{Confirm:d.A},props:{server:null},data(){return{fetching:!1}},methods:{deleteServer:async function(){await this.$refs.confirm.open("Delete "+this.server.queue+" items from the mail queue?")&&(this.fetching=!0,l.A.get("servers/"+this.$route.params.id+"/clearmailqueue").then((e=>{console.log(e.data.result),this.$emit("complete",e.data.result)})).catch((e=>console.log(e))).finally((()=>this.fetching=!1)))}}},h=r(66262);const p=(0,h.A)(f,[["render",u]]);var g=p,v={components:{Loading:c.A,ClearMailQueue:g},data(){return{error:"",items:[],data:{},details:"",message:"",messageId:"",messageUrl:"",loading:!1,fetching:!1,emailDrawer:!1,serverId:0,selected:[],headers:[{title:"",key:""},{title:"ID",key:"id"},{title:"Size",key:"size",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"From",key:"sender",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"To",key:"recipient",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Date",key:"date",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"}]}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){this.error="",this.fetching=!0,l.A.get("servers/"+this.serverId+"/messages").then((e=>{console.log(e),this.data=e.data.item,this.items=e.data.messages,this.items=[],e.data.messages.forEach((e=>{this.items.push({id:e.id,size:e.size,sender:e.sender,recipient:e.recipient,date:e.date})})),document.title="Mail | "+this.data.name})).catch((e=>console.log(e))).finally((()=>this.fetching=!1))},deleteMail(){var e=[];this.selected.forEach((t=>{e.push(t)})),this.fetching=!0,l.A.post("servers/"+this.serverId+"/messages",{ids:e}).then((()=>this.fetchData())).catch((e=>console.log(e))).finally((()=>this.fetching=!1))},view(e,t){this.messageId=t.item.id,this.messageUrl="https://serverwand.com/api/servers/"+this.serverId+"/messages/"+this.messageId,this.emailDrawer=!0},prettyBytes(e){return s.A.prettyBytes(e)},handleComplete:function(e){this.error=e,this.fetchData()}}};const m=(0,h.A)(v,[["render",a]]);var y=m},90679:function(e,t,r){var n=r(1625),o=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new o("Incorrect invocation")}},34527:function(e,t,r){var n=r(43724),o=r(34376),i=TypeError,a=Object.getOwnPropertyDescriptor,l=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=l?function(e,t){if(o(e)&&!a(e,"length").writable)throw new i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},36955:function(e,t,r){var n=r(92140),o=r(94901),i=r(22195),a=r(78227),l=a("toStringTag"),s=Object,c="Arguments"===i(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(r){}};e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=u(t=s(e),l))?r:c?i(t):"Object"===(n=i(t))&&o(t.callee)?"Arguments":n}},12211:function(e,t,r){var n=r(79039);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},97040:function(e,t,r){var n=r(43724),o=r(24913),i=r(6980);e.exports=function(e,t,r){n?o.f(e,t,i(0,r)):e[t]=r}},62106:function(e,t,r){var n=r(50283),o=r(24913);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),o.f(e,t,r)}},96837:function(e){var t=TypeError,r=9007199254740991;e.exports=function(e){if(e>r)throw t("Maximum allowed index exceeded");return e}},76080:function(e,t,r){var n=r(27476),o=r(79306),i=r(40616),a=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?a(e,t):function(){return e.apply(t,arguments)}}},27476:function(e,t,r){var n=r(22195),o=r(79504);e.exports=function(e){if("Function"===n(e))return o(e)}},1767:function(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},50851:function(e,t,r){var n=r(36955),o=r(55966),i=r(64117),a=r(26269),l=r(78227),s=l("iterator");e.exports=function(e){if(!i(e))return o(e,s)||o(e,"@@iterator")||a[n(e)]}},70081:function(e,t,r){var n=r(69565),o=r(79306),i=r(28551),a=r(16823),l=r(50851),s=TypeError;e.exports=function(e,t){var r=arguments.length<2?l(e):t;if(o(r))return i(n(r,e));throw new s(a(e)+" is not iterable")}},20397:function(e,t,r){var n=r(97751);e.exports=n("document","documentElement")},44209:function(e,t,r){var n=r(78227),o=r(26269),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},34376:function(e,t,r){var n=r(22195);e.exports=Array.isArray||function(e){return"Array"===n(e)}},72652:function(e,t,r){var n=r(76080),o=r(69565),i=r(28551),a=r(16823),l=r(44209),s=r(26198),c=r(1625),u=r(70081),d=r(50851),f=r(9539),h=TypeError,p=function(e,t){this.stopped=e,this.result=t},g=p.prototype;e.exports=function(e,t,r){var v,m,y,b,w,k,x,C=r&&r.that,I=!(!r||!r.AS_ENTRIES),_=!(!r||!r.IS_RECORD),O=!(!r||!r.IS_ITERATOR),A=!(!r||!r.INTERRUPTED),F=n(t,C),E=function(e){return v&&f(v,"normal",e),new p(!0,e)},T=function(e){return I?(i(e),A?F(e[0],e[1],E):F(e[0],e[1])):A?F(e,E):F(e)};if(_)v=e.iterator;else if(O)v=e;else{if(m=d(e),!m)throw new h(a(e)+" is not iterable");if(l(m)){for(y=0,b=s(e);b>y;y++)if(w=T(e[y]),w&&c(g,w))return w;return new p(!1)}v=u(e,m)}k=_?e.next:v.next;while(!(x=o(k,v)).done){try{w=T(x.value)}catch(j){f(v,"throw",j)}if("object"==typeof w&&w&&c(g,w))return w}return new p(!1)}},9539:function(e,t,r){var n=r(69565),o=r(28551),i=r(55966);e.exports=function(e,t,r){var a,l;o(e);try{if(a=i(e,"return"),!a){if("throw"===t)throw r;return r}a=n(a,e)}catch(s){l=!0,a=s}if("throw"===t)throw r;if(l)throw a;return o(a),r}},57657:function(e,t,r){var n,o,i,a=r(79039),l=r(94901),s=r(20034),c=r(2360),u=r(42787),d=r(36840),f=r(78227),h=r(96395),p=f("iterator"),g=!1;[].keys&&(i=[].keys(),"next"in i?(o=u(u(i)),o!==Object.prototype&&(n=o)):g=!0);var v=!s(n)||a((function(){var e={};return n[p].call(e)!==e}));v?n={}:h&&(n=c(n)),l(n[p])||d(n,p,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},26269:function(e){e.exports={}},2360:function(e,t,r){var n,o=r(28551),i=r(96801),a=r(88727),l=r(30421),s=r(20397),c=r(4055),u=r(66119),d=">",f="<",h="prototype",p="script",g=u("IE_PROTO"),v=function(){},m=function(e){return f+p+d+e+f+"/"+p+d},y=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=c("iframe"),r="java"+p+":";return t.style.display="none",s.appendChild(t),t.src=String(r),e=t.contentWindow.document,e.open(),e.write(m("document.F=Object")),e.close(),e.F},w=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}w="undefined"!=typeof document?document.domain&&n?y(n):b():y(n);var e=a.length;while(e--)delete w[h][a[e]];return w()};l[g]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(v[h]=o(e),r=new v,v[h]=null,r[g]=e):r=w(),void 0===t?r:i.f(r,t)}},96801:function(e,t,r){var n=r(43724),o=r(48686),i=r(24913),a=r(28551),l=r(25397),s=r(71072);t.f=n&&!o?Object.defineProperties:function(e,t){a(e);var r,n=l(t),o=s(t),c=o.length,u=0;while(c>u)i.f(e,r=o[u++],n[r]);return e}},42787:function(e,t,r){var n=r(39297),o=r(94901),i=r(48981),a=r(66119),l=r(12211),s=a("IE_PROTO"),c=Object,u=c.prototype;e.exports=l?c.getPrototypeOf:function(e){var t=i(e);if(n(t,s))return t[s];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof c?u:null}},71072:function(e,t,r){var n=r(61828),o=r(88727);e.exports=Object.keys||function(e){return n(e,o)}},92140:function(e,t,r){var n=r(78227),o=n("toStringTag"),i={};i[o]="z",e.exports="[object z]"===String(i)},44114:function(e,t,r){var n=r(46518),o=r(48981),i=r(26198),a=r(34527),l=r(96837),s=r(79039),c=s((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=c||!u();n({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=o(this),r=i(t),n=arguments.length;l(r+n);for(var s=0;s<n;s++)t[r]=arguments[s],r++;return a(t,r),r}})},18111:function(e,t,r){var n=r(46518),o=r(44576),i=r(90679),a=r(28551),l=r(94901),s=r(42787),c=r(62106),u=r(97040),d=r(79039),f=r(39297),h=r(78227),p=r(57657).IteratorPrototype,g=r(43724),v=r(96395),m="constructor",y="Iterator",b=h("toStringTag"),w=TypeError,k=o[y],x=v||!l(k)||k.prototype!==p||!d((function(){k({})})),C=function(){if(i(this,p),s(this)===p)throw new w("Abstract class Iterator not directly constructable")},I=function(e,t){g?c(p,e,{configurable:!0,get:function(){return t},set:function(t){if(a(this),this===p)throw new w("You can't redefine this property");f(this,e)?this[e]=t:u(this,e,t)}}):p[e]=t};f(p,b)||I(b,y),!x&&f(p,m)&&p[m]!==Object||I(m,C),C.prototype=p,n({global:!0,constructor:!0,forced:x},{Iterator:C})},7588:function(e,t,r){var n=r(46518),o=r(72652),i=r(79306),a=r(28551),l=r(1767);n({target:"Iterator",proto:!0,real:!0},{forEach:function(e){a(this),i(e);var t=l(this),r=0;o(t,(function(t){e(t,r++)}),{IS_RECORD:!0})}})},98992:function(e,t,r){r(18111)},3949:function(e,t,r){r(7588)}}]);
//# sourceMappingURL=731.5279a38e.js.map