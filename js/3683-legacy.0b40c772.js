"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[3683],{53683:function(t,e,n){n.r(e),n.d(e,{default:function(){return s}});var r=n(20641),i=n(90033);function a(t,e,n,a,o,l){var u=(0,r.g2)("v-alert"),c=(0,r.g2)("v-btn"),s=(0,r.g2)("v-tooltip"),d=(0,r.g2)("v-data-table"),f=(0,r.g2)("v-card-text"),v=(0,r.g2)("v-card"),h=(0,r.g2)("v-spacer"),g=(0,r.g2)("v-switch"),p=(0,r.g2)("v-card-actions");return(0,r.uX)(),(0,r.CE)("div",null,[o.error?((0,r.uX)(),(0,r.Wv)(u,{key:0,type:"error",text:o.error},null,8,["text"])):(0,r.Q3)("",!0),(0,r.bF)(v,{loading:o.fetching},{default:(0,r.k6)((function(){return[o.items.length?((0,r.uX)(),(0,r.Wv)(d,{key:0,modelValue:o.selected,"onUpdate:modelValue":e[0]||(e[0]=function(t){return o.selected=t}),headers:o.headers,items:o.items,"item-value":"ip","show-select":"","mobile-breakpoint":"0",hover:"","row-props":l.rowProps},{"item.ip":(0,r.k6)((function(t){var e,n,a,o=t.item;return[(0,r.Lk)("span",null,[(0,r.bF)(s,{text:(null===(e=o.ip_data)||void 0===e?void 0:e.org)+", "+(null===(n=o.ip_data)||void 0===n?void 0:n.city)+", "+(null===(a=o.ip_data)||void 0===a?void 0:a.country)},{activator:(0,r.k6)((function(t){var e,n=t.props;return[(0,r.bF)(c,(0,r.v6)(n,{class:"fi fi-"+(null===o||void 0===o||null===(e=o.ip_data)||void 0===e||null===(e=e.country)||void 0===e?void 0:e.toLowerCase())+" fis",size:"x-small"}),null,16,["class"])]})),_:2},1032,["text"]),(0,r.eW)(" "+(0,i.v_)(o.ip),1)])]})),_:1},8,["modelValue","headers","items","row-props"])):((0,r.uX)(),(0,r.Wv)(f,{key:1},{default:(0,r.k6)((function(){return e[4]||(e[4]=[(0,r.eW)(" Empty ")])})),_:1}))]})),_:1},8,["loading"]),(0,r.bF)(v,null,{default:(0,r.k6)((function(){return[(0,r.bF)(p,null,{default:(0,r.k6)((function(){return[(0,r.bF)(c,{onClick:e[1]||(e[1]=function(t){return l.unban()}),disabled:0===o.selected.length,loading:"unban"===o.loading},{default:(0,r.k6)((function(){return e[5]||(e[5]=[(0,r.eW)(" Unban ")])})),_:1},8,["disabled","loading"]),(0,r.bF)(h),(0,r.bF)(g,{modelValue:o.active,"onUpdate:modelValue":e[2]||(e[2]=function(t){return o.active=t}),label:"Active",onChange:e[3]||(e[3]=function(t){return l.toggle()}),"hide-details":"",color:"primary",loading:"toggle"===o.loading},null,8,["modelValue","loading"])]})),_:1})]})),_:1})])}n(50113),n(44114),n(62010),n(26099),n(98992),n(72577),n(3949),n(23500);var o=n(74300),l={data:function(){return{error:"",items:[],data:{},loading:null,fetching:!1,serverId:0,selected:[],headers:[{title:"",key:""},{title:"IP",key:"ip"},{title:"Jail",key:"jail"}],active:!1}},created:function(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData:function(){var t=this;this.error="",this.fetching=!0,o.A.get("servers/"+this.serverId+"/banned").then((function(e){console.log(e),t.active=e.data.active,t.items=e.data.items,document.title="Banned | "+e.data.item.name})).catch((function(t){return console.log(t)})).finally((function(){return t.fetching=!1}))},toggle:function(){var t=this;this.loading="toggle",this.error="",o.A.post("servers/"+this.serverId+"/services",{name:"fail2ban",start:this.active}).then((function(e){console.log(e),e.data.success?t.fetchData():t.error=e.data.error})).catch((function(t){console.log(t)})).finally((function(){t.loading=null}))},unban:function(){var t=this,e=[];this.selected.forEach((function(t){e.push(t)})),this.loading="unban",o.A.post("servers/"+this.serverId+"/banned",{items:e}).then((function(){return t.fetchData()})).catch((function(t){return console.log(t)})).finally((function(){return t.loading=null}))},handleComplete:function(t){this.error=t,this.fetchData()},rowProps:function(t){if(this.selected.find((function(e){return e===t.item.ip})))return{class:"bg-primary"}}}},u=n(66262);const c=(0,u.A)(l,[["render",a]]);var s=c},50113:function(t,e,n){var r=n(46518),i=n(59213).find,a=n(6469),o="find",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},20116:function(t,e,n){var r=n(46518),i=n(72652),a=n(79306),o=n(28551),l=n(1767);r({target:"Iterator",proto:!0,real:!0},{find:function(t){o(this),a(t);var e=l(this),n=0;return i(e,(function(e,r){if(t(e,n++))return r(e)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},72577:function(t,e,n){n(20116)}}]);
//# sourceMappingURL=3683-legacy.0b40c772.js.map