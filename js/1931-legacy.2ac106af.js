"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[1931],{85117:function(n,e,t){var o=t(66330),i=TypeError;n.exports=function(n,e){if(!delete n[e])throw new i("Cannot delete property "+o(e)+" of "+o(n))}},40561:function(n,e,t){var o=t(82109),i=t(47908),l=t(51400),u=t(19303),r=t(26244),a=t(83658),c=t(7207),d=t(65417),s=t(86135),f=t(85117),m=t(81194),h=m("splice"),w=Math.max,v=Math.min;o({target:"Array",proto:!0,forced:!h},{splice:function(n,e){var t,o,m,h,p,g,_=i(this),k=r(_),W=l(n,k),y=arguments.length;for(0===y?t=o=0:1===y?(t=0,o=k-W):(t=y-2,o=v(w(u(e),0),k-W)),c(k+t-o),m=d(_,o),h=0;h<o;h++)p=W+h,p in _&&s(m,h,_[p]);if(m.length=o,t<o){for(h=W;h<k-o;h++)p=h+o,g=h+t,p in _?_[g]=_[p]:f(_,g);for(h=k;h>k-o+t;h--)f(_,h-1)}else if(t>o)for(h=k-o;h>W;h--)p=h+o-1,g=h+t-1,p in _?_[g]=_[p]:f(_,g);for(h=0;h<t;h++)_[h+W]=arguments[h+2];return a(_,k-o+t),m}})},64574:function(n,e,t){t.d(e,{Z:function(){return d}});var o=t(66252),i=t(3577),l=t(49963);function u(n,e,t,u,r,a){var c=(0,o.up)("v-toolbar-title"),d=(0,o.up)("v-toolbar"),s=(0,o.up)("v-card-text"),f=(0,o.up)("v-spacer"),m=(0,o.up)("v-btn"),h=(0,o.up)("v-card-actions"),w=(0,o.up)("v-card"),v=(0,o.up)("v-dialog");return(0,o.wg)(),(0,o.j4)(v,{modelValue:n.dialog,"onUpdate:modelValue":e[0]||(e[0]=function(e){return n.dialog=e}),"max-width":n.options.width,style:(0,i.j5)({zIndex:n.options.zIndex}),onKeydown:(0,l.D2)(a.cancel,["esc"]),persistent:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(w,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(d,{dark:"",color:n.options.color,dense:"",flat:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{class:"text-body-2 font-weight-bold grey--text"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(n.title),1)]})),_:1})]})),_:1},8,["color"]),(0,o.wy)((0,o.Wm)(s,{class:"pa-4 black--text",innerHTML:n.message},null,8,["innerHTML"]),[[l.F8,!!n.message]]),(0,o.Wm)(h,{class:"pt-3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(f),n.options.noconfirm?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(m,{key:0,color:"grey",text:"",class:"body-2 font-weight-bold",onClick:a.cancel},{default:(0,o.w5)((function(){return[(0,o.Uk)("Cancel")]})),_:1},8,["onClick"])),(0,o.Wm)(m,{color:"primary",class:"body-2 font-weight-bold",outlined:"",onClick:a.agree},{default:(0,o.w5)((function(){return[(0,o.Uk)("OK")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue","max-width","style","onKeydown"])}t(41539);var r={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"grey lighten-3",width:400,zIndex:10008,noconfirm:!1}}},methods:{open:function(n,e,t){var o=this;return e||(e=n,n="Confirm"),this.dialog=!0,this.title=n,this.message=e,this.options=Object.assign(this.options,t),new Promise((function(n,e){o.resolve=n,o.reject=e}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.resolve(!1),this.dialog=!1}}},a=t(83744);const c=(0,a.Z)(r,[["render",u]]);var d=c},79289:function(n,e,t){t.d(e,{Z:function(){return s}});var o=t(66252),i=t(3577),l=(0,o._)("i",{class:"fas fa-magic fa-2x faa-horizontal animated"},null,-1),u={class:"ml-2"};function r(n,e,t,r,a,c){var d=(0,o.up)("v-layout"),s=(0,o.up)("v-card-text"),f=(0,o.up)("v-card"),m=(0,o.up)("v-container"),h=(0,o.up)("v-dialog");return(0,o.wg)(),(0,o.j4)(h,{modelValue:n.show,"onUpdate:modelValue":e[0]||(e[0]=function(e){return n.show=e}),persistent:"",content:"","content-class":"centered-dialog"},{default:(0,o.w5)((function(){return[(0,o.Wm)(m,{"fill-height":""},{default:(0,o.w5)((function(){return[(0,o.Wm)(f,{color:"primary"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(d,{row:""},{default:(0,o.w5)((function(){return[l,(0,o._)("h2",u,(0,i.zw)(t.message),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])}var a={name:"Loading",data:function(){return{show:!1}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(n){this.show=n}}},c=t(83744);const d=(0,c.Z)(a,[["render",r]]);var s=d},21931:function(n,e,t){t.r(e),t.d(e,{default:function(){return W}});t(82526),t(41817),t(68309);var o=t(66252),i=t(3577),l=t(49963),u={class:"mt-5"},r=(0,o._)("br",null,null,-1),a=(0,o._)("br",null,null,-1),c=(0,o._)("br",null,null,-1),d=(0,o._)("br",null,null,-1);function s(n,e,t,s,f,m){var h=(0,o.up)("Loading"),w=(0,o.up)("v-btn"),v=(0,o.up)("v-card-actions"),p=(0,o.up)("v-icon"),g=(0,o.up)("v-data-table"),_=(0,o.up)("v-card"),k=(0,o.up)("v-text-field"),W=(0,o.up)("v-col"),y=(0,o.up)("v-row"),b=(0,o.up)("v-container"),U=(0,o.up)("v-form"),V=(0,o.up)("v-card-text"),C=(0,o.up)("v-dialog"),x=(0,o.up)("v-card-title"),z=(0,o.up)("Confirm");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(h,{value:f.loading},null,8,["value"]),(0,o.Wm)(_,{class:"pa-3",loading:f.fetching},{default:(0,o.w5)((function(){return[(0,o.Wm)(v,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(w,{onClick:e[0]||(e[0]=function(n){return m.addItem()}),icon:"mdi:mdi-plus"})]})),_:1}),(0,o.Wm)(g,{headers:f.headers,items:f.invoices,class:"results","mobile-breakpoint":"0","onClick:row":e[1]||(e[1]=function(n,e){m.view(e.item)})},{"item.created":(0,o.w5)((function(n){var e=n.item;return[(0,o.Uk)((0,i.zw)(m.formatDate(e.created)),1)]})),"item.actions":(0,o.w5)((function(n){var e=n.item;return[(0,o.Wm)(w,{icon:"",disabled:f.fetching,loading:f.fetching,onClick:(0,l.iM)((function(n){return m.deleteItem(e.raw,f.id)}),["stop"])},{default:(0,o.w5)((function(){return[(0,o.Wm)(p,{size:"small"},{default:(0,o.w5)((function(){return[(0,o.Uk)("mdi:mdi-delete")]})),_:1})]})),_:2},1032,["disabled","loading","onClick"])]})),_:1},8,["headers","items"])]})),_:1},8,["loading"]),(0,o.Wm)(C,{app:"",modelValue:f.dialog,"onUpdate:modelValue":e[3]||(e[3]=function(n){return f.dialog=n}),temporary:"",right:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(_,{title:"Invoice"},{default:(0,o.w5)((function(){return[(0,o.Wm)(V,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(U,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(b,{fluid:""},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(f.data.items,(function(n,t){return(0,o.wg)(),(0,o.j4)(y,{key:t},{default:(0,o.w5)((function(){return[(0,o.Wm)(W,{cols:"12",md:"3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(k,{modelValue:n.domain,"onUpdate:modelValue":function(e){return n.domain=e},label:"Domain",required:""},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,o.Wm)(W,{cols:"12",md:"3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(k,{modelValue:n.description,"onUpdate:modelValue":function(e){return n.description=e},label:"Description",required:""},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,o.Wm)(W,{cols:"12",md:"3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(k,{modelValue:n.amount,"onUpdate:modelValue":function(e){return n.amount=e},label:"Amount",required:""},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,o.Wm)(W,{cols:"12",md:"3"},{default:(0,o.w5)((function(){return[t>0?((0,o.wg)(),(0,o.j4)(w,{key:0,onClick:function(n){return m.removeRow(t)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(p,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("fas fa-minus")]})),_:1})]})),_:2},1032,["onClick"])):(0,o.kq)("",!0),t+1===f.data.items.length?((0,o.wg)(),(0,o.j4)(w,{key:1,onClick:e[2]||(e[2]=function(n){return m.addRow()})},{default:(0,o.w5)((function(){return[(0,o.Wm)(p,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("fas fa-plus")]})),_:1})]})),_:1})):(0,o.kq)("",!0)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1}),(0,o._)("div",u,[(0,o.Wm)(w,{loading:f.loading,color:"success",onClick:m.saveItem},{default:(0,o.w5)((function(){return[(0,o.Uk)(" Save ")]})),_:1},8,["loading","onClick"])])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,o.Wm)(C,{app:"",modelValue:f.dialogInvoice,"onUpdate:modelValue":e[4]||(e[4]=function(n){return f.dialogInvoice=n}),temporary:"",right:""},{default:(0,o.w5)((function(){return[(0,o.Wm)(_,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(x,null,{default:(0,o.w5)((function(){return[(0,o.Uk)(" Invoice "+(0,i.zw)(f.invoice_id),1)]})),_:1}),(0,o.Wm)(V,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(U,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(b,null,{default:(0,o.w5)((function(){return[(0,o._)("div",null,[(0,o.Uk)((0,i.zw)(f.invoice.company),1),r,(0,o.Uk)(" "+(0,i.zw)(f.invoice.name)+" "+(0,i.zw)(f.invoice.surnname),1),a,(0,o.Uk)(" "+(0,i.zw)(f.invoice.address),1),c,(0,o.Uk)(" "+(0,i.zw)(f.invoice.city),1),d,(0,o.Uk)(" "+(0,i.zw)(f.invoice.postcode),1)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(f.invoice.items,(function(n,e){return(0,o.wg)(),(0,o.j4)(y,{key:e},{default:(0,o.w5)((function(){return[(0,o.Wm)(W,{cols:"12",md:"3"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(n.domain),1)]})),_:2},1024),(0,o.Wm)(W,{cols:"12",md:"3"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(n.description),1)]})),_:2},1024),(0,o.Wm)(W,{cols:"12",md:"3"},{default:(0,o.w5)((function(){return[(0,o.Uk)(" £"+(0,i.zw)(n.amount),1)]})),_:2},1024)]})),_:2},1024)})),128)),(0,o.Wm)(y,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(W,{cols:"12",md:"3"}),(0,o.Wm)(W,{cols:"12",md:"3"},{default:(0,o.w5)((function(){return[(0,o.Uk)(" Total: ")]})),_:1}),(0,o.Wm)(W,{cols:"12",md:"3"},{default:(0,o.w5)((function(){return[(0,o.Uk)(" £"+(0,i.zw)(f.invoice.total),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,o.Wm)(z,{ref:"confirm"},null,512)])}var f=t(50124),m=t(48534),h=(t(41539),t(57658),t(40561),t(1006)),w=t(79289),v=t(64574),p=t(72564),g={components:{Loading:w.Z,Confirm:v.Z},data:function(){return{fetching:!1,loading:!1,id:null,error:null,data:{items:[{}]},invoice:{},invoices:[],dialog:!1,dialogInvoice:!1,invoice_id:null,details:"",rules:{required:function(n){return!!n||"Required."},min:function(n){return n.length>=8||"Min 8 characters"}},domain:{name:""},headers:[{title:"Invoice ",key:"id"},{title:"Date ",key:"created"},{title:"Total ",key:"total"},{title:"Status ",key:"payment_status",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:" ",key:"actions"}]}},created:function(){this.id=this.$route.params.id,this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var n=this;this.error="",this.fetching=!0,h.Z.get("users/"+this.id+"/invoices").then((function(e){console.log(e),n.invoices=e.data.invoices,document.title="Invoices"})).catch((function(n){console.log(n)})).finally((function(){n.fetching=!1}))},addItem:function(){this.domain.name="",this.dialog=!0},saveItem:function(){var n=this;this.data.items.length&&(this.details="",this.dialog=!0,this.error="",h.Z.post("users/"+this.id+"/invoices",this.data).then((function(e){console.log(e),e.data.success?(n.data.invoice="",n.dialog=!1,n.fetchData()):n.error=e.data.error})).catch((function(n){console.log(n)})))},deleteItem:function(){var n=(0,m.Z)((0,f.Z)().mark((function n(e){var t;return(0,f.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,this.$refs.confirm.open("Delete "+e.id);case 2:if(n.sent){n.next=4;break}return n.abrupt("return");case 4:t=this,this.error="",this.dialog=!0,this.loading=!0,h.Z.post("users/"+this.id+"/invoices",{delete:1,invoice:e.id}).then((function(n){console.log(n),n.data.error?t.error=n.data.error:t.fetchData()})).catch((function(n){console.log(n)})).finally((function(){t.dialog=!1,t.loading=!1}));case 9:case"end":return n.stop()}}),n,this)})));function e(e){return n.apply(this,arguments)}return e}(),addRow:function(){this.data.items.push({})},removeRow:function(n){this.data.items.splice(n,1)},view:function(n){this.invoice_id=n.id;var e=this;e.fetching=!0,h.Z.get("users/"+this.id+"/invoices/"+this.invoice_id).then((function(n){e.invoice=n.data.invoice,e.dialogInvoice=!0})).catch((function(n){console.log(n)})).finally((function(){e.fetching=!1}))},formatDate:function(n){return p.Z.formatDate(n)}}},_=t(83744);const k=(0,_.Z)(g,[["render",s]]);var W=k}}]);
//# sourceMappingURL=1931-legacy.2ac106af.js.map