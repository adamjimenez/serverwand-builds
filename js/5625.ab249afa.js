"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[5625],{39563:function(e,s,t){t.d(s,{A:function(){return d}});var r=t(20641);function a(e,s,t,a,o,n){const i=(0,r.g2)("v-tabs");return(0,r.uX)(),(0,r.Wv)(i,(0,r.v6)(e.$attrs,{"show-arrows":!o.isTouchDevice}),{default:(0,r.k6)((()=>[(0,r.RG)(e.$slots,"default")])),_:3},16,["show-arrows"])}var o={data(){return{isTouchDevice:!1}},methods:{checkTouch(){this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}},mounted(){window.addEventListener("resize",this.checkTouch),this.checkTouch()},beforeUnmount(){window.removeEventListener("resize",this.checkTouch)}},n=t(66262);const i=(0,n.A)(o,[["render",a]]);var d=i},24041:function(e,s,t){t.d(s,{A:function(){return v}});var r=t(20641);const a={class:"d-flex align-center justify-end h-100"},o=["innerHTML"],n={key:1},i={key:2};function d(e,s,t,d,l,h){const c=(0,r.g2)("v-btn"),u=(0,r.g2)("v-card-title"),v=(0,r.g2)("v-alert"),f=(0,r.g2)("v-select"),m=(0,r.g2)("v-card-text"),g=(0,r.g2)("v-card"),k=(0,r.g2)("v-dialog");return(0,r.uX)(),(0,r.CE)("div",a,[(0,r.bF)(c,(0,r.v6)({onClick:h.terminal},e.$attrs,{disabled:!e.serverId||l.fetching}),{default:(0,r.k6)((()=>[(0,r.RG)(e.$slots,"default")])),_:3},16,["onClick","disabled"]),(0,r.bF)(k,{modelValue:l.chooseUser,"onUpdate:modelValue":s[1]||(s[1]=e=>l.chooseUser=e)},{default:(0,r.k6)((()=>[(0,r.bF)(g,{loading:l.fetching},{default:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>s[2]||(s[2]=[(0,r.eW)(" Open Secure Shell ")]))),_:1}),(0,r.bF)(m,null,{default:(0,r.k6)((()=>[l.error?((0,r.uX)(),(0,r.Wv)(v,{key:0,color:"error",class:"mb-3"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",{innerHTML:l.error},null,8,o)])),_:1})):(0,r.Q3)("",!0),l.users.length?((0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(f,{modelValue:l.ssh_username,"onUpdate:modelValue":s[0]||(s[0]=e=>l.ssh_username=e),items:l.users,label:"User"},null,8,["modelValue","items"]),(0,r.bF)(c,{disabled:0===l.ssh_username.length,color:"success",onClick:h.saveKeyAndContinue,right:"",class:"ml-3"},{default:(0,r.k6)((()=>s[3]||(s[3]=[(0,r.eW)(" Save Key and Continue ")]))),_:1},8,["disabled","onClick"])])):l.fetching?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",i," No system users, add one and try again. "))])),_:1})])),_:1},8,["loading"])])),_:1},8,["modelValue"])])}t(44114),t(98992),t(3949);var l=t(74300),h={props:{cmd:null},data(){return{error:"",data:{users:{}},ssh_username:"",users:[],details:"",fetching:!1,chooseUser:!1}},created(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData(){this.error="",this.fetching=!0,this.serverId=this.$route.params.id,this.serverId&&l.A.get("servers/"+this.serverId).then((e=>{console.log(e),e.data.error&&(this.error=e.data.error),e.data.item&&(this.data=e.data.item,window.server=this.data)})).catch((e=>console.log(e))).finally((()=>this.fetching=!1))},fetchUsers(){this.error="",this.fetching=!0,this.chooseUser=!0,l.A.get("servers/"+this.serverId+"/systemusers").then((e=>{if(console.log(e),e.data.error)return this.error=e.data.error,!1;e.data.item.users.forEach((e=>{this.users.push({title:e.name,value:e.name})}))})).catch((e=>console.log(e))).finally((()=>this.fetching=!1))},saveKey(e){l.A.post("servers/"+this.serverId+"/systemusers/"+this.ssh_username,{key:e}).then((e=>{console.log(e),e.data.success?this.saveSSHUser():(this.fetching=!1,this.error=e.data.error)})).catch((e=>{this.fetching=!1,console.log(e)}))},saveSSHUser(){this.fetching=!0,l.A.post("servers/"+this.serverId+"/savesshuser",{ssh_username:this.ssh_username}).then((e=>{console.log(e),e.data.success?(this.data.ssh_username=this.ssh_username,this.chooseUser=!1,this.terminal()):this.error=e.data.error})).catch((e=>console.log(e))).finally((()=>{this.fetching=!1}))},saveKeyAndContinue(){this.fetching=!0,l.A.post("https://shiftedit.net/api/prefs").then((e=>{console.log(e),e.data.error?this.error=e.data.error:(console.log(e.data.public_key),this.saveKey(e.data.public_key))})).catch((e=>console.log(e))).finally((()=>{this.fetching=!1}))},terminal(){if(this.data.ssh_username){console.log("open ssh "+this.data.ssh_username);let e="http://shiftedit.net/ssh/?host="+this.data.hostname+"&user="+this.data.ssh_username;this.cmd&&(e+="&cmd="+encodeURIComponent(this.cmd)),window.ssh_path&&(e+="&path="+window.ssh_path),window.open(e)}else this.fetchUsers()}}},c=t(66262);const u=(0,c.A)(h,[["render",d]]);var v=u},15625:function(e,s,t){t.r(s),t.d(s,{default:function(){return m}});var r=t(20641),a=t(90033);const o=["innerHTML"],n={class:"text-no-wrap"};function i(e,s,t,i,d,l){const h=(0,r.g2)("v-alert"),c=(0,r.g2)("ServerIcon"),u=(0,r.g2)("v-icon"),v=(0,r.g2)("Terminal"),f=(0,r.g2)("v-list-item"),m=(0,r.g2)("v-tab"),g=(0,r.g2)("Tabs"),k=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",null,[d.error?((0,r.uX)(),(0,r.Wv)(h,{key:0,type:"error"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",{innerHTML:d.error},null,8,o)])),_:1})):(0,r.Q3)("",!0),(0,r.bF)(f,{title:d.data.name},{subtitle:(0,r.k6)((()=>[(0,r.Lk)("span",n,(0,a.v_)(d.data.hostname),1)])),prepend:(0,r.k6)((()=>[(0,r.bF)(c,{provider:d.data.provider},null,8,["provider"])])),append:(0,r.k6)((()=>[(0,r.bF)(v,{data:d.data,color:"success",icon:"",size:"small"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{icon:"fas fa-terminal"})])),_:1},8,["data"])])),_:1},8,["title"]),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(m,{to:"/servers/"+e.serverId+"/summary"},{default:(0,r.k6)((()=>s[0]||(s[0]=[(0,r.eW)("Summary")]))),_:1},8,["to"]),(0,r.bF)(m,{to:"/servers/"+e.serverId+"/Files"},{default:(0,r.k6)((()=>s[1]||(s[1]=[(0,r.eW)("Files")]))),_:1},8,["to"]),(0,r.bF)(m,{to:"/servers/"+e.serverId+"/mail"},{default:(0,r.k6)((()=>s[2]||(s[2]=[(0,r.eW)("Mail")]))),_:1},8,["to"]),(0,r.bF)(m,{to:"/servers/"+e.serverId+"/backups"},{default:(0,r.k6)((()=>s[3]||(s[3]=[(0,r.eW)("Cloud backups")]))),_:1},8,["to"]),(0,r.bF)(m,{to:"/servers/"+e.serverId+"/database"},{default:(0,r.k6)((()=>s[4]||(s[4]=[(0,r.eW)("Database")]))),_:1},8,["to"]),(0,r.bF)(m,{to:"/servers/"+e.serverId+"/cronjobs"},{default:(0,r.k6)((()=>s[5]||(s[5]=[(0,r.eW)("Cronjobs")]))),_:1},8,["to"]),(0,r.bF)(m,{to:"/servers/"+e.serverId+"/apps"},{default:(0,r.k6)((()=>s[6]||(s[6]=[(0,r.eW)("Apps")]))),_:1},8,["to"]),(0,r.bF)(m,{to:"/servers/"+e.serverId+"/systemusers"},{default:(0,r.k6)((()=>s[7]||(s[7]=[(0,r.eW)("System users")]))),_:1},8,["to"]),(0,r.bF)(m,{to:"/servers/"+e.serverId+"/firewall"},{default:(0,r.k6)((()=>s[8]||(s[8]=[(0,r.eW)("Firewall")]))),_:1},8,["to"]),(0,r.bF)(m,{to:"/servers/"+e.serverId+"/services"},{default:(0,r.k6)((()=>s[9]||(s[9]=[(0,r.eW)("Services")]))),_:1},8,["to"]),(0,r.bF)(m,{to:"/servers/"+e.serverId+"/banned"},{default:(0,r.k6)((()=>s[10]||(s[10]=[(0,r.eW)("Banned")]))),_:1},8,["to"]),(0,r.bF)(m,{to:"/servers/"+e.serverId+"/settings"},{default:(0,r.k6)((()=>s[11]||(s[11]=[(0,r.eW)("Settings")]))),_:1},8,["to"])])),_:1}),(0,r.bF)(k)])}var d=t(74300),l=t(56458),h=t(24041),c=t(39563),u={components:{ServerIcon:l.A,Terminal:h.A,Tabs:c.A},data(){return{error:"",data:{users:{}},users:[],details:"",fetching:!1}},created(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData(){this.error="",this.serverId=this.$route.params.id,this.serverId&&d.A.get("servers/"+this.serverId).then((e=>{console.log(e),e.data.error&&(this.error=e.data.error),e.data.item&&(this.data=e.data.item,window.server=this.data)})).catch((e=>console.log(e))).finally((()=>this.fetching=!1))}}},v=t(66262);const f=(0,v.A)(u,[["render",i]]);var m=f}}]);
//# sourceMappingURL=5625.ab249afa.js.map