"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[5625],{56458:function(e,t,r){r.d(t,{A:function(){return u}});var n=r(20641);function s(e,t,r,s,o,a){var i=(0,n.g2)("v-icon");return"linode"===r.provider?((0,n.uX)(),(0,n.Wv)(i,{key:0},{default:(0,n.k6)((function(){return t[0]||(t[0]=[(0,n.eW)("fab fa-linode")])})),_:1})):"digitalocean"===r.provider?((0,n.uX)(),(0,n.Wv)(i,{key:1},{default:(0,n.k6)((function(){return t[1]||(t[1]=[(0,n.eW)("fab fa-digital-ocean")])})),_:1})):((0,n.uX)(),(0,n.Wv)(i,{key:2},{default:(0,n.k6)((function(){return t[2]||(t[2]=[(0,n.eW)("fas fa-server")])})),_:1}))}var o={props:{provider:null}},a=r(66262);const i=(0,a.A)(o,[["render",s]]);var u=i},39563:function(e,t,r){r.d(t,{A:function(){return u}});var n=r(20641);function s(e,t,r,s,o,a){var i=(0,n.g2)("v-tabs");return(0,n.uX)(),(0,n.Wv)(i,(0,n.v6)(e.$attrs,{"show-arrows":!o.isTouchDevice}),{default:(0,n.k6)((function(){return[(0,n.RG)(e.$slots,"default")]})),_:3},16,["show-arrows"])}var o={data:function(){return{isTouchDevice:!1}},methods:{checkTouch:function(){this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}},mounted:function(){window.addEventListener("resize",this.checkTouch),this.checkTouch()},beforeUnmount:function(){window.removeEventListener("resize",this.checkTouch)}},a=r(66262);const i=(0,a.A)(o,[["render",s]]);var u=i},24041:function(e,t,r){r.d(t,{A:function(){return h}});var n=r(20641),s={class:"d-flex align-center justify-end h-100"},o=["innerHTML"],a={key:1},i={key:2};function u(e,t,r,u,c,d){var l=(0,n.g2)("v-btn"),f=(0,n.g2)("v-card-title"),h=(0,n.g2)("v-alert"),v=(0,n.g2)("v-select"),m=(0,n.g2)("v-card-text"),g=(0,n.g2)("v-card"),k=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.bF)(l,(0,n.v6)({onClick:d.terminal},e.$attrs,{disabled:!e.serverId||c.fetching}),{default:(0,n.k6)((function(){return[(0,n.RG)(e.$slots,"default")]})),_:3},16,["onClick","disabled"]),(0,n.bF)(k,{modelValue:c.chooseUser,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.chooseUser=e})},{default:(0,n.k6)((function(){return[(0,n.bF)(g,{loading:c.fetching},{default:(0,n.k6)((function(){return[(0,n.bF)(f,null,{default:(0,n.k6)((function(){return t[2]||(t[2]=[(0,n.eW)(" Open Secure Shell ")])})),_:1}),(0,n.bF)(m,null,{default:(0,n.k6)((function(){return[c.error?((0,n.uX)(),(0,n.Wv)(h,{key:0,color:"error",class:"mb-3"},{default:(0,n.k6)((function(){return[(0,n.Lk)("div",{innerHTML:c.error},null,8,o)]})),_:1})):(0,n.Q3)("",!0),c.users.length?((0,n.uX)(),(0,n.CE)("div",a,[(0,n.bF)(v,{modelValue:c.ssh_username,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.ssh_username=e}),items:c.users,label:"User"},null,8,["modelValue","items"]),(0,n.bF)(l,{disabled:0===c.ssh_username.length,color:"success",onClick:d.saveKeyAndContinue,right:"",class:"ml-3"},{default:(0,n.k6)((function(){return t[3]||(t[3]=[(0,n.eW)(" Save Key and Continue ")])})),_:1},8,["disabled","onClick"])])):c.fetching?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",i," No system users, add one and try again. "))]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])}r(44114),r(62010),r(26099),r(98992),r(3949),r(23500);var c=r(74300),d={props:{cmd:null},data:function(){return{error:"",data:{users:{}},ssh_username:"",users:[],details:"",fetching:!1,chooseUser:!1}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var e=this;this.error="",this.fetching=!0,this.serverId=this.$route.params.id,this.serverId&&c.A.get("servers/"+this.serverId).then((function(t){console.log(t),t.data.error&&(e.error=t.data.error),t.data.item&&(e.data=t.data.item,window.server=e.data)})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))},fetchUsers:function(){var e=this;this.error="",this.fetching=!0,this.chooseUser=!0,c.A.get("servers/"+this.serverId+"/systemusers").then((function(t){if(console.log(t),t.data.error)return e.error=t.data.error,!1;t.data.item.users.forEach((function(t){e.users.push({title:t.name,value:t.name})}))})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))},saveKey:function(e){var t=this;c.A.post("servers/"+this.serverId+"/systemusers/"+this.ssh_username,{key:e}).then((function(e){console.log(e),e.data.success?t.saveSSHUser():(t.fetching=!1,t.error=e.data.error)})).catch((function(e){t.fetching=!1,console.log(e)}))},saveSSHUser:function(){var e=this;this.fetching=!0,c.A.post("servers/"+this.serverId+"/savesshuser",{ssh_username:this.ssh_username}).then((function(t){console.log(t),t.data.success?(e.data.ssh_username=e.ssh_username,e.chooseUser=!1,e.terminal()):e.error=t.data.error})).catch((function(e){return console.log(e)})).finally((function(){e.fetching=!1}))},saveKeyAndContinue:function(){var e=this;this.fetching=!0,c.A.post("https://shiftedit.net/api/prefs").then((function(t){console.log(t),t.data.error?e.error=t.data.error:(console.log(t.data.public_key),e.saveKey(t.data.public_key))})).catch((function(e){return console.log(e)})).finally((function(){e.fetching=!1}))},terminal:function(){if(this.data.ssh_username){console.log("open ssh "+this.data.ssh_username);var e="http://shiftedit.net/ssh/?host="+this.data.hostname+"&user="+this.data.ssh_username;this.cmd&&(e+="&cmd="+encodeURIComponent(this.cmd)),window.ssh_path&&(e+="&path="+window.ssh_path),window.open(e)}else this.fetchUsers()}}},l=r(66262);const f=(0,l.A)(d,[["render",u]]);var h=f},15625:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});r(62010);var n=r(20641),s=r(90033),o=["innerHTML"],a={class:"text-no-wrap"};function i(e,t,r,i,u,c){var d=(0,n.g2)("v-alert"),l=(0,n.g2)("ServerIcon"),f=(0,n.g2)("v-icon"),h=(0,n.g2)("Terminal"),v=(0,n.g2)("v-list-item"),m=(0,n.g2)("v-tab"),g=(0,n.g2)("Tabs"),k=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",null,[u.error?((0,n.uX)(),(0,n.Wv)(d,{key:0,type:"error"},{default:(0,n.k6)((function(){return[(0,n.Lk)("div",{innerHTML:u.error},null,8,o)]})),_:1})):(0,n.Q3)("",!0),(0,n.bF)(v,{title:u.data.name},{subtitle:(0,n.k6)((function(){return[(0,n.Lk)("span",a,(0,s.v_)(u.data.hostname),1)]})),prepend:(0,n.k6)((function(){return[(0,n.bF)(l,{provider:u.data.provider},null,8,["provider"])]})),append:(0,n.k6)((function(){return[(0,n.bF)(h,{data:u.data,color:"success",icon:"",size:"small"},{default:(0,n.k6)((function(){return[(0,n.bF)(f,{icon:"fas fa-terminal"})]})),_:1},8,["data"])]})),_:1},8,["title"]),(0,n.bF)(g,null,{default:(0,n.k6)((function(){return[(0,n.bF)(m,{to:"/servers/"+e.serverId+"/summary"},{default:(0,n.k6)((function(){return t[0]||(t[0]=[(0,n.eW)("Summary")])})),_:1},8,["to"]),(0,n.bF)(m,{to:"/servers/"+e.serverId+"/Files"},{default:(0,n.k6)((function(){return t[1]||(t[1]=[(0,n.eW)("Files")])})),_:1},8,["to"]),(0,n.bF)(m,{to:"/servers/"+e.serverId+"/mail"},{default:(0,n.k6)((function(){return t[2]||(t[2]=[(0,n.eW)("Mail")])})),_:1},8,["to"]),(0,n.bF)(m,{to:"/servers/"+e.serverId+"/backups"},{default:(0,n.k6)((function(){return t[3]||(t[3]=[(0,n.eW)("Cloud backups")])})),_:1},8,["to"]),(0,n.bF)(m,{to:"/servers/"+e.serverId+"/database"},{default:(0,n.k6)((function(){return t[4]||(t[4]=[(0,n.eW)("Database")])})),_:1},8,["to"]),(0,n.bF)(m,{to:"/servers/"+e.serverId+"/cronjobs"},{default:(0,n.k6)((function(){return t[5]||(t[5]=[(0,n.eW)("Cronjobs")])})),_:1},8,["to"]),(0,n.bF)(m,{to:"/servers/"+e.serverId+"/apps"},{default:(0,n.k6)((function(){return t[6]||(t[6]=[(0,n.eW)("Apps")])})),_:1},8,["to"]),(0,n.bF)(m,{to:"/servers/"+e.serverId+"/systemusers"},{default:(0,n.k6)((function(){return t[7]||(t[7]=[(0,n.eW)("System users")])})),_:1},8,["to"]),(0,n.bF)(m,{to:"/servers/"+e.serverId+"/firewall"},{default:(0,n.k6)((function(){return t[8]||(t[8]=[(0,n.eW)("Firewall")])})),_:1},8,["to"]),(0,n.bF)(m,{to:"/servers/"+e.serverId+"/services"},{default:(0,n.k6)((function(){return t[9]||(t[9]=[(0,n.eW)("Services")])})),_:1},8,["to"]),(0,n.bF)(m,{to:"/servers/"+e.serverId+"/banned"},{default:(0,n.k6)((function(){return t[10]||(t[10]=[(0,n.eW)("Banned")])})),_:1},8,["to"]),(0,n.bF)(m,{to:"/servers/"+e.serverId+"/settings"},{default:(0,n.k6)((function(){return t[11]||(t[11]=[(0,n.eW)("Settings")])})),_:1},8,["to"])]})),_:1}),(0,n.bF)(k)])}r(26099);var u=r(74300),c=r(56458),d=r(24041),l=r(39563),f={components:{ServerIcon:c.A,Terminal:d.A,Tabs:l.A},data:function(){return{error:"",data:{users:{}},users:[],details:"",fetching:!1}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var e=this;this.error="",this.serverId=this.$route.params.id,this.serverId&&u.A.get("servers/"+this.serverId).then((function(t){console.log(t),t.data.error&&(e.error=t.data.error),t.data.item&&(e.data=t.data.item,window.server=e.data)})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))}}},h=r(66262);const v=(0,h.A)(f,[["render",i]]);var m=v}}]);
//# sourceMappingURL=5625-legacy.0f709a9c.js.map