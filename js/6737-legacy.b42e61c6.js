"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[6260,6737],{81815:function(e,t,n){n.d(t,{A:function(){return u}});var r=n(20641);function a(e,t,n,a,o,i){var d=(0,r.g2)("v-icon"),u=(0,r.g2)("v-alert"),l=(0,r.g2)("v-dialog");return(0,r.uX)(),(0,r.Wv)(l,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.show=t}),persistent:"",width:"600"},{default:(0,r.k6)((function(){return[(0,r.bF)(u,{title:n.message,color:"primary"},{prepend:(0,r.k6)((function(){return[(0,r.bF)(d,{icon:"fas fa-magic fa-2x faa-horizontal animated"})]})),_:1},8,["title"])]})),_:1},8,["modelValue"])}var o={name:"Loading",data:function(){return{show:!1}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},i=n(66262);const d=(0,i.A)(o,[["render",a]]);var u=d},21189:function(e,t,n){n.d(t,{A:function(){return s}});var r=n(20641);function a(e,t,n,a,o,i){var d=(0,r.g2)("Loading"),u=(0,r.g2)("v-btn"),l=(0,r.g2)("v-card-text"),s=(0,r.g2)("v-card"),c=(0,r.g2)("v-dialog");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(d,{value:e.loading},null,8,["value"]),(0,r.bF)(c,{modelValue:e.authRequired,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.authRequired=t})},{default:(0,r.k6)((function(){return[(0,r.bF)(s,{title:"Auth required"},{default:(0,r.k6)((function(){return[(0,r.bF)(l,null,{default:(0,r.k6)((function(){return[(0,r.bF)(u,{onClick:t[0]||(t[0]=function(e){return i.authPrompt()})},{default:(0,r.k6)((function(){return t[2]||(t[2]=[(0,r.eW)(" Continue ")])})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])}n(44114),n(26099);var o=n(74300),i=n(81815),d={components:{Loading:i.A},name:"Site",data:function(){return{loading:!1,newWindow:!1,provider:"linode",authRequired:!1}},methods:{create:function(e){var t=this;this.loading=!0,o.A.post("sites/create",e).then((function(n){if(n.data.site_id)t.$router.push("/sites/"+n.data.site_id+"/summary");else if(n.data.error)if("auth"===n.data.error){t.provider=n.data.provider,t.authRequired=!0;var r=setInterval((function(){if(t.newWindow&&t.newWindow.closed)return t.newWindow=null,clearInterval(r),void t.create(e)}),500)}else t.$emit("error",n.data.error)})).catch((function(e){return console.log(e)})).finally((function(){return t.loading=!1}))},authPrompt:function(){this.authRequired=!1,this.newWindow=window.open("https://serverwand.com/account/services/"+this.provider)}}},u=n(66262);const l=(0,u.A)(d,[["render",a]]);var s=l},36737:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(20641);function a(e,t,n,a,o,i){var d=(0,r.g2)("v-alert"),u=(0,r.g2)("Loading"),l=(0,r.g2)("v-text-field"),s=(0,r.g2)("v-select"),c=(0,r.g2)("v-checkbox"),f=(0,r.g2)("v-btn"),v=(0,r.g2)("v-form"),h=(0,r.g2)("v-card-text"),m=(0,r.g2)("v-card"),g=(0,r.g2)("Site");return(0,r.uX)(),(0,r.CE)("div",null,[e.error?((0,r.uX)(),(0,r.Wv)(d,{key:0,type:"error",text:e.error},null,8,["text"])):(0,r.Q3)("",!0),(0,r.bF)(u,{value:e.loading},null,8,["value"]),e.serverId?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(m,{key:1,title:"Site details"},{default:(0,r.k6)((function(){return[(0,r.bF)(h,null,{default:(0,r.k6)((function(){return[e.loading?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(v,{key:0,ref:"form",modelValue:e.valid,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.valid=t}),"lazy-validation":""},{default:(0,r.k6)((function(){return[(0,r.bF)(l,{disabled:e.domainId>0,modelValue:e.data.domain,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.data.domain=t}),rules:e.domainRules,label:"Domain",required:"",autofocus:""},null,8,["disabled","modelValue","rules"]),(0,r.bF)(s,{disabled:e.domainId>0,modelValue:e.data.server,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.data.server=t}),items:e.servers,label:"Server",rules:[function(e){return!!e||"Server is required"}],required:""},null,8,["disabled","modelValue","items","rules"]),(0,r.bF)(c,{modelValue:e.data.dns,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.data.dns=t}),label:"Configure DNS",disabled:!e.data.server||""==e.dnsProviders[e.data.server]},null,8,["modelValue","disabled"]),(0,r.bF)(f,{disabled:!e.valid,loading:e.loading,color:"success",onClick:i.save},{default:(0,r.k6)((function(){return t[5]||(t[5]=[(0,r.eW)(" Save ")])})),_:1},8,["disabled","loading","onClick"])]})),_:1},8,["modelValue"]))]})),_:1})]})),_:1})),(0,r.bF)(g,{ref:"Site",onError:t[4]||(t[4]=function(t){return e.error=t})},null,512)])}n(44114),n(62010),n(26099),n(98992),n(3949),n(23500);var o=n(74300),i=n(81815),d=n(21189),u={components:{Loading:i.A,Site:d.A},data:function(){return{loading:!1,valid:!0,data:{domain:"",password:"",server:"",dns:!1},domainRules:[function(e){return!!e||"Domain is required"}],passwordRules:[],servers:[],dnsProviders:{},details:"",serverId:0,error:"",authRequired:!1}},created:function(){document.title="Site details",this.domainId=this.$route.params.id,this.fetchData(),localStorage.dns&&(this.data.dns=!0)},methods:{fetchData:function(){var e=this;this.error="",this.loading=!1,o.A.get("sites/"+this.domainId).then((function(t){console.log(t),e.domainId&&(e.data=t.data.items[0])})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1})),o.A.get("servers/").then((function(t){console.log(t),t.data.items.forEach((function(t){e.servers.push({title:t.name,value:t.id}),e.dnsProviders[t.id]=t.dns}))})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))},save:function(){var e=this;this.error="",this.details="",this.loading=!0,this.data.dns?localStorage.dns="1":delete localStorage.dns,console.log(arguments),this.domainId?o.A.post("sites/"+this.domainId+"/update",this.data).then((function(t){if(console.log(t),t.data.error)return e.error=t.data.error,!1;e.$router.push("/sites/"+e.domainId+"/summary")})).catch((function(t){console.log(t),e.error=t})):(this.loading=!1,this.$refs.Site.create(this.data))}}},l=n(66262);const s=(0,l.A)(u,[["render",a]]);var c=s}}]);
//# sourceMappingURL=6737-legacy.b42e61c6.js.map