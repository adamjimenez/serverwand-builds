"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[1261],{61261:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var l=a(20641),i=a(90033);function s(e,t,a,s,n,r){const o=(0,l.g2)("v-alert"),d=(0,l.g2)("v-btn"),c=(0,l.g2)("v-tooltip"),h=(0,l.g2)("v-data-table"),u=(0,l.g2)("v-card-text"),g=(0,l.g2)("v-card"),v=(0,l.g2)("v-spacer"),f=(0,l.g2)("v-switch"),m=(0,l.g2)("v-card-actions");return(0,l.uX)(),(0,l.CE)("div",null,[n.error?((0,l.uX)(),(0,l.Wv)(o,{key:0,type:"error",text:n.error},null,8,["text"])):(0,l.Q3)("",!0),(0,l.bF)(g,{loading:n.fetching},{default:(0,l.k6)((()=>[n.items.length?((0,l.uX)(),(0,l.Wv)(h,{key:0,modelValue:n.selected,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selected=e),headers:n.headers,items:n.items,"item-value":"ip","show-select":"",class:"results","mobile-breakpoint":"0"},{"item.ip":(0,l.k6)((({item:e})=>[(0,l.Lk)("span",null,[(0,l.bF)(c,{text:e.ip_data?.org+", "+e.ip_data?.city+", "+e.ip_data?.country},{activator:(0,l.k6)((({props:t})=>[(0,l.bF)(d,(0,l.v6)(t,{class:["fi fi-"+e?.ip_data?.country?.toLowerCase()+" fis","ml-1"],size:"x-small"}),null,16,["class"])])),_:2},1032,["text"]),(0,l.eW)(" "+(0,i.v_)(e.ip),1)])])),_:1},8,["modelValue","headers","items"])):((0,l.uX)(),(0,l.Wv)(u,{key:1},{default:(0,l.k6)((()=>[(0,l.eW)(" Empty ")])),_:1}))])),_:1},8,["loading"]),(0,l.bF)(g,null,{default:(0,l.k6)((()=>[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,{onClick:t[1]||(t[1]=e=>r.unban()),disabled:0===n.selected.length,loading:"unban"===n.loading},{default:(0,l.k6)((()=>[(0,l.eW)(" Unban ")])),_:1},8,["disabled","loading"]),(0,l.bF)(v),(0,l.bF)(f,{modelValue:n.active,"onUpdate:modelValue":t[2]||(t[2]=e=>n.active=e),label:"Active",onChange:t[3]||(t[3]=e=>r.toggle()),"hide-details":"",color:"primary",loading:"toggle"===n.loading},null,8,["modelValue","loading"])])),_:1})])),_:1})])}a(44114);var n=a(74300),r={data(){return{error:"",items:[],data:{},loading:null,fetching:!1,serverId:0,selected:[],headers:[{title:"",key:""},{title:"IP",key:"ip"},{title:"Jail",key:"jail"}],active:!1}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){this.error="",this.fetching=!0,n.A.get("servers/"+this.serverId+"/banned").then((e=>{console.log(e),this.active=e.data.active,this.items=e.data.items,document.title="Banned | "+e.data.item.name})).catch((e=>console.log(e))).finally((()=>this.fetching=!1))},toggle(){this.loading="toggle",this.error="",n.A.post("servers/"+this.serverId+"/services",{name:"fail2ban",start:this.active}).then((e=>{console.log(e),e.data.success?this.fetchData():this.error=e.data.error})).catch((e=>{console.log(e)})).finally((()=>{this.loading=null}))},unban(){let e=[];this.selected.forEach((t=>{e.push(t)})),this.loading="unban",n.A.post("servers/"+this.serverId+"/banned",{items:e}).then((()=>this.fetchData())).catch((e=>console.log(e))).finally((()=>this.loading=null))},handleComplete:function(e){this.error=e,this.fetchData()}}},o=a(66262);const d=(0,o.A)(r,[["render",s]]);var c=d}}]);
//# sourceMappingURL=1261.832962af.js.map