"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[3304],{48236:function(e,t,a){a.d(t,{Z:function(){return c}});var l=a(66252),s=a(3577);const d=(0,l._)("i",{class:"fas fa-magic fa-2x faa-horizontal animated"},null,-1),r={style:{"margin-left":"10px"}};function n(e,t,a,n,i,o){const u=(0,l.up)("v-layout"),c=(0,l.up)("v-card-text"),m=(0,l.up)("v-card"),h=(0,l.up)("v-container"),f=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.j4)(f,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",content:"","content-class":"centered-dialog"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{"fill-height":""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{color:"primary",dark:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{row:""},{default:(0,l.w5)((()=>[d,(0,l._)("h2",r,(0,s.zw)(a.message),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}var i={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},o=a(48118);const u=(0,o.Z)(i,[["render",n]]);var c=u},63304:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var l=a(66252),s=a(3577);const d=["src"];function r(e,t,a,r,n,i){const o=(0,l.up)("v-alert"),u=(0,l.up)("Loading"),c=(0,l.up)("v-card-text"),m=(0,l.up)("v-card"),h=(0,l.up)("v-row"),f=(0,l.up)("v-container"),g=(0,l.up)("v-data-table"),w=(0,l.up)("v-btn"),p=(0,l.up)("v-card-title"),v=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[n.error?((0,l.wg)(),(0,l.j4)(o,{key:0,type:"error"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(n.error),1)])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(u,{value:n.loading},null,8,["value"]),(0,l.Wm)(m,{loading:n.fetching},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{fluid:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Mail queue: "+(0,s.zw)(n.data.queue),1)])),_:1})])),_:1})])),_:1})])),_:1}),n.items.length?((0,l.wg)(),(0,l.j4)(g,{key:0,modelValue:n.selected,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selected=e),headers:n.headers,items:n.items,"show-select":"",class:"results","mobile-breakpoint":"0","onClick:row":i.view},{"item.size":(0,l.w5)((({item:e})=>[(0,l._)("span",null,(0,s.zw)(i.prettyBytes(e.raw.size)),1)])),_:1},8,["modelValue","headers","items","onClick:row"])):((0,l.wg)(),(0,l.j4)(c,{key:1},{default:(0,l.w5)((()=>[(0,l.Uk)(" Queue empty ")])),_:1}))])),_:1},8,["loading"]),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(p,{"primary-title":""},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{onClick:t[1]||(t[1]=e=>i.deleteMail()),disabled:0===n.selected.length,loading:n.fetching},{default:(0,l.w5)((()=>[(0,l.Uk)(" Delete ")])),_:1},8,["disabled","loading"])])),_:1})])])),_:1}),(0,l.Wm)(v,{app:"",modelValue:n.emailDrawer,"onUpdate:modelValue":t[2]||(t[2]=e=>n.emailDrawer=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Message: "+(0,s.zw)(n.messageId),1)])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l._)("iframe",{width:"100%",height:"315",src:n.messageUrl,frameborder:"0"},null,8,d)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var n=a(1006),i=a(72564),o=a(48236),u={components:{Loading:o.Z},data(){return{error:"",items:[],data:{},details:"",message:"",messageId:"",messageUrl:"",loading:!1,fetching:!1,emailDrawer:!1,serverId:0,selected:[],headers:[{title:"",key:""},{title:"ID ",key:"id"},{title:"Size ",key:"size",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"From ",key:"sender",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"To ",key:"recipient",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Date ",key:"date",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"}]}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){var e=this;this.error="",this.fetching=!0,n.Z.get("servers/"+this.serverId+"/messages").then((t=>{console.log(t),e.data=t.data.item,e.items=t.data.messages,e.items=[],t.data.messages.forEach((t=>{e.items.push({id:t.id,size:t.size,sender:t.sender,recipient:t.recipient,date:t.date})})),document.title="Mail | "+e.data.name})).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},deleteMail(){var e=this,t=[];this.selected.forEach((e=>{t.push(e)})),e.fetching=!0,n.Z.post("servers/"+this.serverId+"/messages",{ids:t}).then((()=>e.fetchData())).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},view(e,t){this.messageId=t.item.raw.id,this.messageUrl="https://serverwand.com/api/servers/"+this.serverId+"/messages/"+this.messageId,this.emailDrawer=!0},prettyBytes(e){return i.Z.prettyBytes(e)}}},c=a(48118);const m=(0,c.Z)(u,[["render",r]]);var h=m}}]);
//# sourceMappingURL=3304.879821fe.js.map