"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[3720],{84285:function(t,e,n){n.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[n("v-container",{attrs:{"fill-height":""}},[n("v-card",{attrs:{color:"primary",dark:""}},[n("v-card-text",[n("v-layout",{attrs:{row:""}},[n("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),n("h2",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.message))])])],1)],1)],1)],1)},a=[],r={name:"Loading",data:function(){return{}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},s=r,o=n(1001),l=(0,o.Z)(s,i,a,!1,null,null,null),c=l.exports},13720:function(t,e,n){n.r(e),n.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Loading",{attrs:{value:t.loading}}),n("v-card",{staticClass:"pa-3",attrs:{loading:t.fetching}},[n("v-list",[n("v-list-item-group",[t._l(t.user_sites,(function(e,i){return[n("v-list-item",{key:"item-"+i,attrs:{value:e},scopedSlots:t._u([{key:"default",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(e.domain)+" ")])],1),n("v-list-item-action",[n("v-btn",{attrs:{icon:"",disabled:t.fetching,loading:t.fetching},on:{click:function(n){return t.deleteItem(e.id)}}},[n("v-icon",{attrs:{small:""}},[t._v("delete")])],1)],1)]},proxy:!0}],null,!0)})]}))],2)],1)],1),n("v-card",[n("div",[n("v-card-title",{attrs:{"primary-title":""}},[n("v-btn",{on:{click:function(e){return t.addItem()}}},[t._v(" Add site ")])],1)],1)]),n("v-navigation-drawer",{attrs:{app:"",temporary:"",right:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-card",[n("v-card-title",[t._v(" Domain ")]),n("v-card-text",[n("v-select",{attrs:{items:t.sites,label:"Site"},scopedSlots:t._u([{key:"item",fn:function(e){return[n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(e.item.text)+" ")]),n("v-list-item-subtitle",[t._v(" "+t._s(t.servers[e.item.server])+" ")])],1)]}}]),model:{value:t.data.domain,callback:function(e){t.$set(t.data,"domain",e)},expression:"data.domain"}},[t._v("> ")]),n("v-btn",{attrs:{disabled:t.dialog,loading:t.dialog,color:"success"},on:{click:t.saveItem}},[t._v(" Save ")])],1)],1)],1)],1)},a=[],r=(n(41539),n(54747),n(68309),n(4296)),s=n(84285),o={components:{Loading:s.Z},data:function(){return{fetching:!1,loading:!1,id:null,error:null,data:{},user_sites:[],sites:[],servers:{},dialog:!1,details:"",rules:{required:function(t){return!!t||"Required."},min:function(t){return t.length>=8||"Min 8 characters"}},domain:{name:""},drawer:!1}},created:function(){this.id=this.$route.params.id,this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;this.error="",this.fetching=!0,r.Z.get("users/"+this.id+"/sites").then((function(e){console.log(e),t.user_sites=e.data.sites,document.title="Sites"})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1})),r.Z.get("sites/").then((function(e){console.log(e),e.data.items.forEach((function(e){t.sites.push({text:e.domain,value:e.id,server:e.server})})),r.Z.get("servers/").then((function(e){e.data.items.forEach((function(e){t.$set(t.servers,e.id,e.name)}))}))})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))},addItem:function(){this.domain.name="",this.drawer=!0},saveItem:function(){var t=this;this.data.domain&&(this.details="",this.dialog=!0,this.error="",r.Z.post("users/"+this.id+"/sites",this.data).then((function(e){console.log(e),e.data.success?(t.drawer=!1,t.fetchData()):t.error=e.data.error})).catch((function(e){console.log(e),t.dialog=!1})).finally((function(){t.dialog=!1})))},deleteItem:function(t){var e=this;this.$confirm("Delete domain?").then((function(n){if(n){var i=e;e.error="",e.dialog=!0,e.loading=!0,r.Z.post("users/"+e.id+"/sites",{delete:1,domain:t}).then((function(t){console.log(t),t.data.error?i.error=t.data.error:i.fetchData()})).catch((function(t){console.log(t)})).finally((function(){i.dialog=!1,i.loading=!1}))}}))}}},l=o,c=n(1001),d=(0,c.Z)(l,i,a,!1,null,null,null),u=d.exports}}]);
//# sourceMappingURL=3720-legacy.27bb7d98.js.map