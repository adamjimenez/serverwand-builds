{"version":3,"file":"js/3245-legacy.e0f0b60d.js","mappings":"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","sources":["webpack://ServerWand/./src/components/ServerIcon.vue","webpack://ServerWand/./src/components/ServerIcon.vue?5951","webpack://ServerWand/./src/views/Server.vue","webpack://ServerWand/./src/views/Server.vue?fd28"],"sourcesContent":["<template>\n    <v-icon v-if=\"provider === 'linode'\">fab fa-linode</v-icon>\n    <v-icon v-else-if=\"provider === 'digitalocean'\">fab fa-digital-ocean</v-icon>\n    <v-icon v-else>fas fa-server</v-icon>\n</template>\n\n<script>\nexport default {\n  props: {\n    provider: null,\n  },  \n};\n</script>","import { render } from \"./ServerIcon.vue?vue&type=template&id=64e9ad3f\"\nimport script from \"./ServerIcon.vue?vue&type=script&lang=js\"\nexport * from \"./ServerIcon.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/serverwand/serverwand/node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div>\n    <v-alert v-if=\"error\" type=\"error\">\n      <div v-html=\"error\"></div>\n    </v-alert>\n\n    <v-container v-if=\"!fetching\" fluid>\n      <v-row>\n        <v-col>\n          <v-list-item>\n            <template v-slot:prepend>\n              <ServerIcon :provider=\"data.provider\"></ServerIcon>\n            </template>\n\n            <v-list-item-title>\n              {{ data.name }}\n            </v-list-item-title>\n            <v-list-item-subtitle>\n              {{ data.hostname }}\n            </v-list-item-subtitle>\n          </v-list-item>\n        </v-col>\n\n        <v-col class=\"text-right\">\n          <v-btn color=\"success\" @click=\"terminal\">\n            <v-icon small>fas fa-terminal</v-icon>\n          </v-btn>\n        </v-col>\n      </v-row>\n    </v-container>\n\n    <v-tabs show-arrows>\n      <v-tab :to=\"'/servers/' + serverId + '/summary'\">Summary</v-tab>\n      <v-tab :to=\"'/servers/' + serverId + '/Files'\">Files</v-tab>\n      <v-tab :to=\"'/servers/' + serverId + '/services'\">Services</v-tab>\n      <v-tab :to=\"'/servers/' + serverId + '/cronjobs'\">Cronjobs</v-tab>\n      <v-tab :to=\"'/servers/' + serverId + '/database'\">Database</v-tab>\n      <v-tab :to=\"'/servers/' + serverId + '/systemusers'\">System users</v-tab>\n      <v-tab :to=\"'/servers/' + serverId + '/firewall'\">Firewall</v-tab>\n      <v-tab :to=\"'/servers/' + serverId + '/mail'\">Mail</v-tab>\n      <v-tab :to=\"'/servers/' + serverId + '/apps'\">Apps</v-tab>\n      <v-tab :to=\"'/servers/' + serverId + '/logs'\">Logs</v-tab>\n      <v-tab :to=\"'/servers/' + serverId + '/backups'\">Cloud backups</v-tab>\n      <v-tab :to=\"'/servers/' + serverId + '/settings'\">Settings</v-tab>\n    </v-tabs>\n    <router-view></router-view>\n\n    <v-dialog v-model=\"chooseUser\">\n      <v-card :loading=\"fetching\">\n        <v-card-title> Open Secure Shell </v-card-title>\n\n        <v-card-text>\n          <div v-if=\"users.length\">\n            <v-select v-model=\"ssh_username\" :items=\"users\" label=\"User\"></v-select>\n\n            <v-btn :disabled=\"ssh_username.length === 0\" color=\"success\" @click=\"saveKeyAndContinue\" right class=\"ml-3\">\n              Save Key and Continue\n            </v-btn>\n          </div>\n\n          <div v-else-if=\"!fetching\">\n            No system users, add one and try again.\n          </div>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport api from \"../services/api\";\nimport ServerIcon from \"../components/ServerIcon\";\n\nexport default {\n  components: {\n    ServerIcon\n  },\n  data() {\n    return {\n      error: \"\",\n      data: {\n        users: {},\n      },\n      ssh_username: \"\",\n      users: [],\n      details: \"\",\n      fetching: false,\n      chooseUser: false,\n    };\n  },\n  created() {\n    this.fetchData();\n  },\n  watch: {\n    // call again the method if the route changes\n    $route: \"fetchData\",\n  },\n  methods: {\n    fetchData() {\n      var self = this;\n      this.error = \"\";\n      // this.fetching = true\n      this.serverId = this.$route.params.id;\n\n      api\n        .get(\"servers/\" + this.serverId)\n        .then(response => {\n          console.log(response);\n\n          if (response.data.error) {\n            self.error = response.data.error;\n          }\n\n          if (response.data.item) {\n            self.data = response.data.item;\n          }\n        })\n        .catch(error => console.log(error))\n        .finally(() => self.fetching = false);\n    },\n    fetchUsers() {\n      var self = this;\n      this.error = \"\";\n      this.fetching = true;\n      self.chooseUser = true;\n\n      api\n        .get(\"servers/\" + this.serverId + \"/systemusers\")\n        .then(response => {\n          console.log(response);\n\n          if (response.data.error) {\n            self.error = response.data.error;\n            return false;\n          }\n\n          response.data.item.users.forEach((element) => {\n            self.users.push({\n              text: element.name,\n              value: element.name,\n            });\n          });\n        })\n        .catch(error => console.log(error))\n        .finally(() => self.fetching = false);\n    },\n    saveKey(key) {\n      var self = this;\n\n      // save key\n      api\n        .post(\n          \"servers/\" + self.serverId + \"/systemusers/\" + self.ssh_username,\n          { key: key }\n        )\n        .then(response => {\n          console.log(response);\n\n          if (!response.data.success) {\n            self.fetching = false;\n            self.error = response.data.error;\n          } else {\n            self.saveSSHUser();\n          }\n        })\n        .catch(error => {\n          self.fetching = false;\n          console.log(error);\n        });\n    },\n    saveSSHUser() {\n      var self = this;\n      self.fetching = true;\n      api\n        .post(\"servers/\" + this.serverId + \"/savesshuser\", {\n          ssh_username: self.ssh_username,\n        })\n        .then(response => {\n          console.log(response);\n\n          if (!response.data.success) {\n            self.error = response.data.error;\n          } else {\n            self.data.ssh_username = self.ssh_username;\n            self.terminal();\n          }\n        })\n        .catch(error => console.log(error))\n        .finally(() => {\n          self.fetching = false;\n          self.chooseUser = false;\n        });\n    },\n    saveKeyAndContinue() {\n      var self = this;\n      self.fetching = true;\n\n      // get ssh key\n      api\n        .post(\"https://shiftedit.net/api/prefs\")\n        .then(response => {\n          console.log(response);\n\n          if (response.data.error) {\n            self.error = response.data.error;\n            self.chooseUser = false;\n          } else {\n            console.log(response.data.public_key);\n            self.saveKey(response.data.public_key);\n          }\n        })\n        .catch(error => console.log(error));\n    },\n    terminal() {\n      if (this.data.ssh_username) {\n        console.log(\"open ssh \" + this.data.ssh_username);\n\n        var url =\n          \"http://shiftedit.net/ssh/?host=\" +\n          this.data.hostname +\n          \"&user=\" +\n          this.data.ssh_username;\n\n        if (window.ssh_path) {\n          url += \"&path=\" + window.ssh_path;\n        }\n\n        window.open(url);\n      } else {\n        this.fetchUsers();\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./Server.vue?vue&type=template&id=3e900e9e\"\nimport script from \"./Server.vue?vue&type=script&lang=js\"\nexport * from \"./Server.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/serverwand/serverwand/node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["$props","_createBlock","_component_v_icon","key","props","provider","__exports__","render","_createElementBlock","$data","_component_v_alert","type","_createElementVNode","innerHTML","_hoisted_1","_component_v_container","fluid","_createVNode","_component_v_row","_component_v_col","_component_v_list_item","prepend","_component_ServerIcon","_component_v_list_item_title","name","_component_v_list_item_subtitle","hostname","class","_component_v_btn","color","onClick","$options","small","_component_v_tabs","_component_v_tab","to","_ctx","_component_router_view","_component_v_dialog","$event","_component_v_card","loading","_component_v_card_title","_component_v_card_text","length","_hoisted_2","_component_v_select","items","label","disabled","right","_hoisted_3","components","ServerIcon","data","error","users","ssh_username","details","fetching","chooseUser","created","this","fetchData","watch","$route","methods","self","serverId","params","id","api","then","response","console","log","item","catch","finally","fetchUsers","forEach","element","push","text","value","saveKey","success","saveSSHUser","terminal","saveKeyAndContinue","public_key","url","window","ssh_path","open"],"sourceRoot":""}