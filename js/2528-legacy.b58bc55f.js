"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[2528],{52528:function(t,e,n){n.r(e),n.d(e,{default:function(){return s}});var r=n(20641),i=n(90033);function o(t,e,n,o,a,l){var u=(0,r.g2)("v-alert"),c=(0,r.g2)("v-icon"),s=(0,r.g2)("v-btn"),d=(0,r.g2)("v-spacer"),f=(0,r.g2)("v-switch"),h=(0,r.g2)("v-card-actions"),v=(0,r.g2)("v-tooltip"),g=(0,r.g2)("v-data-table"),p=(0,r.g2)("v-card-text"),m=(0,r.g2)("v-card");return(0,r.uX)(),(0,r.CE)("div",null,[a.error?((0,r.uX)(),(0,r.Wv)(u,{key:0,type:"error",text:a.error},null,8,["text"])):(0,r.Q3)("",!0),(0,r.bF)(m,{loading:a.fetching},{default:(0,r.k6)((function(){return[(0,r.bF)(h,null,{default:(0,r.k6)((function(){return[(0,r.bF)(s,{onClick:l.fetchData,loading:a.fetching},{default:(0,r.k6)((function(){return[(0,r.bF)(c,{size:"small"},{default:(0,r.k6)((function(){return e[4]||(e[4]=[(0,r.eW)("mdi:mdi-reload")])})),_:1})]})),_:1},8,["onClick","loading"]),a.selected.length?((0,r.uX)(),(0,r.Wv)(s,{key:0,onClick:e[0]||(e[0]=function(t){return l.unban()}),loading:"unban"===a.loading},{default:(0,r.k6)((function(){return[(0,r.bF)(c,{size:"small"},{default:(0,r.k6)((function(){return e[5]||(e[5]=[(0,r.eW)("mdi:mdi-delete")])})),_:1})]})),_:1},8,["loading"])):(0,r.Q3)("",!0),(0,r.bF)(d),(0,r.bF)(f,{modelValue:a.active,"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.active=t}),label:"Active",onChange:e[2]||(e[2]=function(t){return l.toggle()}),"hide-details":"",color:"primary",loading:"toggle"===a.loading},null,8,["modelValue","loading"])]})),_:1}),a.items.length?((0,r.uX)(),(0,r.Wv)(g,{key:0,modelValue:a.selected,"onUpdate:modelValue":e[3]||(e[3]=function(t){return a.selected=t}),headers:a.headers,items:a.items,"items-per-page":100,"item-value":"ip","show-select":t.display.smAndUp,"mobile-breakpoint":"0",hover:"","row-props":l.rowProps,"items-per-page-text":"","fixed-header":"",style:{height:"calc(100vh - 280px)",overflow:"auto"},"onContextmenu:row":l.select},{"item.ip":(0,r.k6)((function(t){var e,n,o,a=t.item;return[(0,r.Lk)("span",null,[(0,r.bF)(v,{text:(null===(e=a.ip_data)||void 0===e?void 0:e.org)+", "+(null===(n=a.ip_data)||void 0===n?void 0:n.city)+", "+(null===(o=a.ip_data)||void 0===o?void 0:o.country)},{activator:(0,r.k6)((function(t){var e,n=t.props;return[(0,r.bF)(s,(0,r.v6)(n,{class:"fi fi-"+(null===a||void 0===a||null===(e=a.ip_data)||void 0===e||null===(e=e.country)||void 0===e?void 0:e.toLowerCase())+" fis",size:"x-small"}),null,16,["class"])]})),_:2},1032,["text"]),(0,r.eW)(" "+(0,i.v_)(a.ip),1)])]})),_:1},8,["modelValue","headers","items","show-select","row-props","onContextmenu:row"])):((0,r.uX)(),(0,r.Wv)(p,{key:1},{default:(0,r.k6)((function(){return e[6]||(e[6]=[(0,r.eW)(" Empty ")])})),_:1}))]})),_:1},8,["loading"])])}n(50113),n(74423),n(44114),n(62010),n(26099),n(21699),n(98992),n(72577),n(3949),n(23500);var a=n(74300),l={data:function(){return{error:"",items:[],data:{},loading:null,fetching:!1,serverId:0,selected:[],headers:[{title:"IP",key:"ip"},{title:"Jail",key:"jail"}],active:!1}},created:function(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData:function(){var t=this;this.error="",this.fetching=!0,a.A.get("servers/"+this.serverId+"/banned").then((function(e){console.log(e),t.active=e.data.active,t.items=e.data.items,document.title="Banned | "+e.data.item.name})).catch((function(t){return console.log(t)})).finally((function(){return t.fetching=!1}))},toggle:function(){var t=this;this.loading="toggle",this.error="",a.A.post("servers/"+this.serverId+"/services",{name:"fail2ban",start:this.active}).then((function(e){console.log(e),e.data.success?t.fetchData():t.error=e.data.error})).catch((function(t){console.log(t)})).finally((function(){t.loading=null}))},unban:function(){var t=this,e=[];this.selected.forEach((function(t){e.push(t)})),this.loading="unban",a.A.post("servers/"+this.serverId+"/banned",{items:e}).then((function(){return t.fetchData()})).catch((function(t){return console.log(t)})).finally((function(){return t.loading=null}))},handleComplete:function(t){this.error=t,this.fetchData()},rowProps:function(t){if(this.selected.find((function(e){return e===t.item.ip})))return{class:"bg-primary"}},select:function(t,e){t.preventDefault(),this.selected.includes(e.item.ip)||this.selected.push(e.item.ip)}}},u=n(66262);const c=(0,u.A)(l,[["render",o]]);var s=c},41436:function(t,e,n){var r=n(78227),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},60788:function(t,e,n){var r=n(20034),i=n(22195),o=n(78227),a=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"===i(t))}},60511:function(t,e,n){var r=n(60788),i=TypeError;t.exports=function(t){if(r(t))throw new i("The method doesn't accept regular expressions");return t}},50113:function(t,e,n){var r=n(46518),i=n(59213).find,o=n(6469),a="find",l=!0;a in[]&&Array(1)[a]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},74423:function(t,e,n){var r=n(46518),i=n(19617).includes,o=n(79039),a=n(6469),l=o((function(){return!Array(1).includes()}));r({target:"Array",proto:!0,forced:l},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},20116:function(t,e,n){var r=n(46518),i=n(72652),o=n(79306),a=n(28551),l=n(1767);r({target:"Iterator",proto:!0,real:!0},{find:function(t){a(this),o(t);var e=l(this),n=0;return i(e,(function(e,r){if(t(e,n++))return r(e)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},21699:function(t,e,n){var r=n(46518),i=n(79504),o=n(60511),a=n(67750),l=n(655),u=n(41436),c=i("".indexOf);r({target:"String",proto:!0,forced:!u("includes")},{includes:function(t){return!!~c(l(a(this)),l(o(t)),arguments.length>1?arguments[1]:void 0)}})},72577:function(t,e,n){n(20116)}}]);
//# sourceMappingURL=2528-legacy.b58bc55f.js.map