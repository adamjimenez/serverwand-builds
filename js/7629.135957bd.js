"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[7629],{37629:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=a(20641),l=a(90033);function s(e,t,a,s,r,n){const o=(0,i.g2)("v-alert"),d=(0,i.g2)("v-btn"),c=(0,i.g2)("v-tooltip"),h=(0,i.g2)("v-data-table"),u=(0,i.g2)("v-card-text"),g=(0,i.g2)("v-card"),v=(0,i.g2)("v-spacer"),p=(0,i.g2)("v-switch"),f=(0,i.g2)("v-card-actions");return(0,i.uX)(),(0,i.CE)("div",null,[r.error?((0,i.uX)(),(0,i.Wv)(o,{key:0,type:"error",text:r.error},null,8,["text"])):(0,i.Q3)("",!0),(0,i.bF)(g,{loading:r.fetching},{default:(0,i.k6)((()=>[r.items.length?((0,i.uX)(),(0,i.Wv)(h,{key:0,modelValue:r.selected,"onUpdate:modelValue":t[0]||(t[0]=e=>r.selected=e),headers:r.headers,items:r.items,"item-value":"ip","show-select":"","mobile-breakpoint":"0",hover:"","row-props":n.rowProps},{"item.ip":(0,i.k6)((({item:e})=>[(0,i.Lk)("span",null,[(0,i.bF)(c,{text:e.ip_data?.org+", "+e.ip_data?.city+", "+e.ip_data?.country},{activator:(0,i.k6)((({props:t})=>[(0,i.bF)(d,(0,i.v6)(t,{class:"fi fi-"+e?.ip_data?.country?.toLowerCase()+" fis",size:"x-small"}),null,16,["class"])])),_:2},1032,["text"]),(0,i.eW)(" "+(0,l.v_)(e.ip),1)])])),_:1},8,["modelValue","headers","items","row-props"])):((0,i.uX)(),(0,i.Wv)(u,{key:1},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.eW)(" Empty ")]))),_:1}))])),_:1},8,["loading"]),(0,i.bF)(g,null,{default:(0,i.k6)((()=>[(0,i.bF)(f,null,{default:(0,i.k6)((()=>[(0,i.bF)(d,{onClick:t[1]||(t[1]=e=>n.unban()),disabled:0===r.selected.length,loading:"unban"===r.loading},{default:(0,i.k6)((()=>t[5]||(t[5]=[(0,i.eW)(" Unban ")]))),_:1},8,["disabled","loading"]),(0,i.bF)(v),(0,i.bF)(p,{modelValue:r.active,"onUpdate:modelValue":t[2]||(t[2]=e=>r.active=e),label:"Active",onChange:t[3]||(t[3]=e=>n.toggle()),"hide-details":"",color:"primary",loading:"toggle"===r.loading},null,8,["modelValue","loading"])])),_:1})])),_:1})])}a(44114),a(98992),a(72577),a(3949);var r=a(74300),n={data(){return{error:"",items:[],data:{},loading:null,fetching:!1,serverId:0,selected:[],headers:[{title:"",key:""},{title:"IP",key:"ip"},{title:"Jail",key:"jail"}],active:!1}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){this.error="",this.fetching=!0,r.A.get("servers/"+this.serverId+"/banned").then((e=>{console.log(e),this.active=e.data.active,this.items=e.data.items,document.title="Banned | "+e.data.item.name})).catch((e=>console.log(e))).finally((()=>this.fetching=!1))},toggle(){this.loading="toggle",this.error="",r.A.post("servers/"+this.serverId+"/services",{name:"fail2ban",start:this.active}).then((e=>{console.log(e),e.data.success?this.fetchData():this.error=e.data.error})).catch((e=>{console.log(e)})).finally((()=>{this.loading=null}))},unban(){let e=[];this.selected.forEach((t=>{e.push(t)})),this.loading="unban",r.A.post("servers/"+this.serverId+"/banned",{items:e}).then((()=>this.fetchData())).catch((e=>console.log(e))).finally((()=>this.loading=null))},handleComplete:function(e){this.error=e,this.fetchData()},rowProps(e){if(this.selected.find((t=>t.id===e.item.id)))return{class:"bg-primary"}}}},o=a(66262);const d=(0,o.A)(n,[["render",s]]);var c=d}}]);
//# sourceMappingURL=7629.135957bd.js.map