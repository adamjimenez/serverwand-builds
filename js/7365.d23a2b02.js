"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[7365],{60862:function(t,e,a){a.d(e,{Z:function(){return d}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.error?a("v-alert",{attrs:{type:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),a("v-switch",{staticClass:"mx-3",attrs:{label:"IP restrictions"},on:{change:t.toggle},model:{value:t.data.active,callback:function(e){t.$set(t.data,"active",e)},expression:"data.active"}}),t.data.active?a("div",[a("v-list",[a("v-list-item-group",[t._l(t.items,(function(e,r){return[a("v-list-item",{key:"item-"+r,attrs:{value:e},scopedSlots:t._u([{key:"default",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(e.ip)+" ")]),a("v-list-item-subtitle",[t._v(" "+t._s(e.label)+" ")])],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:"",disabled:t.fetching,loading:t.fetching},on:{click:function(a){return t.deleteItem(e.line)}}},[a("v-icon",{attrs:{small:""}},[t._v("delete")])],1)],1)]},proxy:!0}],null,!0)})]}))],2)],1),a("v-card",[a("div",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-btn",{on:{click:function(e){return t.addItem()}}},[t._v(" Add IP ")])],1)],1)])],1):t._e(),a("v-navigation-drawer",{attrs:{app:"",temporary:"",right:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-card",[a("v-form",{ref:"form"},[a("v-card-title",[t._v(" IP ")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Label",required:""},model:{value:t.item.label,callback:function(e){t.$set(t.item,"label",e)},expression:"item.label"}}),a("v-text-field",{attrs:{label:"IP address",required:"",rules:[t.rules.ip]},model:{value:t.item.ip,callback:function(e){t.$set(t.item,"ip",e)},expression:"item.ip"}}),a("v-btn",{attrs:{disabled:t.fetching,loading:t.fetching,color:"success"},on:{click:t.saveItem}},[t._v(" Save ")])],1)],1)],1)],1)],1)},i=[],s=a(4296),n={props:{serverId:null,active:null,items:null,path:null},data(){return{data:{active:null},item:{},fetching:!1,drawer:!1,rules:{required:t=>!!t||"Required.",ip:t=>!t||/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)||"Invalid IP address"},error:null}},watch:{active:function(t){this.data.active=t}},methods:{toggle(){var t=this;this.fetching=!0,this.error="",s.Z.post(this.path,{active:this.data.active}).then((function(e){console.log(e),e.data.success||(t.error=e.data.error)})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1,t.$emit("save")}))},addItem(){this.item={},this.drawer=!0},deleteItem(t){this.$confirm("Delete IP?").then((e=>{if(e){var a=this;this.fetching=!0,this.error="",s.Z.post(this.path,{line:t}).then((function(t){console.log(t),t.data.success||(a.error=t.data.error)})).catch((function(t){console.log(t)})).finally((()=>{this.fetching=!1,a.$emit("save")}))}}))},saveItem(){var t=this;this.error="",this.$refs.form.validate()&&(this.fetching=!0,s.Z.post(this.path,this.item).then((e=>{console.log(e),e.data.error?t.error=e.data.error:(t.drawer=!1,t.$emit("save"))})).catch((t=>console.log(t))).finally((()=>{this.fetching=!1})))}}},l=n,o=a(1001),c=(0,o.Z)(l,r,i,!1,null,null,null),d=c.exports},84285:function(t,e,a){a.d(e,{Z:function(){return c}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("v-container",{attrs:{"fill-height":""}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[a("v-layout",{attrs:{row:""}},[a("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),a("h2",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.message))])])],1)],1)],1)],1)},i=[],s={name:"Loading",data:()=>({}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},n=s,l=a(1001),o=(0,l.Z)(n,r,i,!1,null,null,null),c=o.exports},77365:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.error?a("v-alert",{attrs:{type:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),a("Loading",{attrs:{value:t.loading}}),a("v-card",{attrs:{loading:t.fetching}},[a("v-container",{staticClass:"ma-0"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-card",[a("div",{staticClass:"feature"},[a("v-card-text",[a("div",[a("div",{staticClass:"icon"},[a("i",{staticClass:"fas fa-network-wired"})]),a("div",{staticClass:"label"},[t._v("Max Connection Usage")])]),a("div",{staticClass:"pt-3",staticStyle:{clear:"both"}},[a("v-list-item-title",[a("v-progress-linear",{attrs:{value:t.data.max_used_connections/t.data.max_connections*100,height:"20"}})],1),a("v-list-item-subtitle",[t._v(" "+t._s(t.data.max_used_connections)+" used of "+t._s(t.data.max_connections)+" ")])],1)])],1)])],1)],1)],1),a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-card",[a("v-card-text",[a("form",{attrs:{action:"http://"+t.data.ip+"/phpmyadmin/",method:"post",target:"_blank"}},[a("input",{attrs:{type:"hidden",name:"pma_username"},domProps:{value:t.data.db_name}}),a("button",{attrs:{type:"submit"}},[t._v(" PhpMyAdmin "),a("v-icon",{attrs:{right:""}},[t._v("open_in_new")])],1)])])],1)],1),a("v-row",[a("IPRestrictions",{attrs:{active:t.data.ip_restrictions.active,items:t.data.ip_restrictions.ips,path:"servers/"+this.serverId+"/database/iprestrictions"},on:{save:function(e){return t.fetchData(!0)}}})],1)],1)],1)],1)},i=[],s=a(4296),n=a(84285),l=a(60862),o={components:{Loading:n.Z,IPRestrictions:l.Z},data(){return{loading:!1,error:"",data:{ip_restrictions:{}},details:"",fetching:!1,drawer:!1,serverId:0}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){var t=this;this.error="",this.fetching=!0,s.Z.get("servers/"+this.serverId+"/database").then((function(e){if(console.log(e),e.data.error)return t.error=e.data.error,!1;t.data=e.data.item,document.title="Database | "+t.data.name})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1}))}}},c=o,d=a(1001),v=(0,d.Z)(c,r,i,!1,null,null,null),u=v.exports}}]);
//# sourceMappingURL=7365.d23a2b02.js.map