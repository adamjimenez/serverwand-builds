{"version":3,"file":"js/9240-legacy.803f4d91.js","mappings":"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","sources":["webpack://ServerWand/./src/components/Loading.vue?4cdb","webpack://ServerWand/src/components/Loading.vue","webpack://ServerWand/./src/components/Loading.vue?05cc","webpack://ServerWand/./src/components/Loading.vue","webpack://ServerWand/./src/views/sites/Email.vue?8233","webpack://ServerWand/src/views/sites/Email.vue","webpack://ServerWand/./src/views/sites/Email.vue?485f","webpack://ServerWand/./src/views/sites/Email.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"persistent\":\"\",\"content\":\"\",\"content-class\":\"centered-dialog\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('v-container',{attrs:{\"fill-height\":\"\"}},[_c('v-card',{attrs:{\"color\":\"primary\",\"dark\":\"\"}},[_c('v-card-text',[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('i',{staticClass:\"fas fa-magic fa-2x faa-horizontal animated\"}),_c('h2',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(_vm.message))])])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog v-model=\"value\" persistent content content-class=\"centered-dialog\">\n    <v-container fill-height>\n      <v-card color=\"primary\" dark>\n        <v-card-text>\n          <v-layout row>\n            <i class=\"fas fa-magic fa-2x faa-horizontal animated\"></i>\n            <h2 style=\"margin-left: 10px\">{{ message }}</h2>\n          </v-layout>\n        </v-card-text>\n      </v-card>\n    </v-container>\n  </v-dialog>\n</template>\n\n<script>\nexport default {\n  name: \"Loading\",\n  data: () => {\n    return {} \n  },\n  props: {\n    value: {\n      type: Boolean,\n      default: false,\n    },\n    message: {\n      type: String,\n      default: \"Summoning...\",\n    },\n  },\n};\n</script>\n\n<style>\n.v-dialog.centered-dialog {\n  box-shadow: none;\n  border-radius: 0;\n  width: auto;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=162d9904&\"\nimport script from \"./Loading.vue?vue&type=script&lang=js&\"\nexport * from \"./Loading.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loading.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.error)?_c('v-alert',{attrs:{\"type\":\"error\"}},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e(),_c('Loading',{attrs:{\"value\":_vm.loading}}),_c('v-card',{staticClass:\"pa-3\",attrs:{\"loading\":_vm.fetching}},[(_vm.authRequired)?_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-card',{attrs:{\"tile\":\"\",\"flat\":\"\"}},[_c('v-card-text',[_c('strong',[_vm._v(\"DNS auth required: \")]),_c('v-btn',{on:{\"click\":function($event){return _vm.authPrompt()}}},[_vm._v(\"Fix\")])],1)],1)],1)],1):_vm._e(),(\n          !_vm.authRequired &&\n          _vm.data.server &&\n          _vm.data.dns &&\n          _vm.data.dns.MX != _vm.data.server.hostname\n        )?_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-card',{attrs:{\"tile\":\"\",\"flat\":\"\"}},[_c('v-card-text',[_c('strong',[_vm._v(\"MX mismatch: \"+_vm._s(_vm.data.dns.MX)+\" != \"+_vm._s(_vm.data.server.hostname))]),(_vm.data.dns.not_set)?_c('v-btn',{on:{\"click\":function($event){return _vm.fixDomainDns(_vm.data.domain)}}},[_vm._v(\"Fix\")]):_vm._e()],1)],1)],1)],1):_vm._e(),(!_vm.authRequired && _vm.data.server && _vm.data.dkim && _vm.data.dkim.not_set)?_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-card',{attrs:{\"tile\":\"\",\"flat\":\"\"}},[_c('v-card-text',[_c('strong',[_vm._v(\"Missing DKIM\")]),(_vm.data.dkim.not_set)?_c('v-btn',{on:{\"click\":function($event){return _vm.fixDkim(_vm.data.domain)}}},[_vm._v(\"Fix\")]):_vm._e()],1)],1)],1)],1):_vm._e(),(\n          !_vm.authRequired &&\n          _vm.data.server &&\n          _vm.data.spf &&\n          _vm.data.spf.not_set &&\n          !_vm.data.spf.SPF\n        )?_c('v-layout',{attrs:{\"row\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-card',{attrs:{\"tile\":\"\",\"flat\":\"\"}},[_c('v-card-text',[_c('strong',[_vm._v(\"Missing SPF\")]),(_vm.data.spf.not_set)?_c('v-btn',{on:{\"click\":function($event){return _vm.fixSpf(_vm.data.domain)}}},[_vm._v(\"Fix\")]):_vm._e()],1)],1)],1)],1):_vm._e(),(_vm.data.server.mailserver)?_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('v-switch',{attrs:{\"label\":\"Email\"},on:{\"change\":function($event){return _vm.toggleEmail()}},model:{value:(_vm.data.email),callback:function ($$v) {_vm.$set(_vm.data, \"email\", $$v)},expression:\"data.email\"}})],1):_vm._e()],1),(_vm.data.server.mailserver)?_c('div',[_c('v-card',{staticClass:\"mx-auto\"},[_c('v-list',[_c('v-list-item-group',[_vm._l((_vm.data.emails),function(item,i){return [_c('v-list-item',{key:(\"item-\" + i),attrs:{\"value\":item},on:{\"click\":function($event){return _vm.editEmail(i)}},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\" \"+_vm._s(item.user)+\" \"),(item.destination)?_c('span',[_c('v-icon',[_vm._v(\"fas fa-long-arrow-alt-right\")]),_vm._v(\" \"+_vm._s(item.destination)+\" \")],1):_vm._e()]),_c('v-list-item-subtitle',[_vm._v(_vm._s(_vm._f(\"prettyBytes\")(item.disk_usage)))])],1),_c('v-list-item-action',[_c('v-btn',{attrs:{\"icon\":\"\",\"disabled\":_vm.fetching,\"loading\":_vm.fetching},on:{\"click\":[function($event){return _vm.deleteEmail(item.user)},function($event){$event.stopPropagation();}]}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"delete\")])],1)],1)]},proxy:true}],null,true)})]})],2)],1)],1),_c('v-card',[_c('v-card-text',[_c('v-btn',{on:{\"click\":function($event){return _vm.addEmail()}}},[_vm._v(\" Add email \")])],1)],1),_c('v-navigation-drawer',{attrs:{\"fixed\":\"\",\"temporary\":\"\",\"right\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" Email account \")]),_c('v-card-text',[_c('v-text-field',{attrs:{\"label\":\"Name\",\"required\":\"\",\"readonly\":_vm.userReadonly},model:{value:(_vm.email.user),callback:function ($$v) {_vm.$set(_vm.email, \"user\", $$v)},expression:\"email.user\"}}),_c('v-text-field',{attrs:{\"type\":\"password\",\"label\":\"Password\",\"required\":\"\"},model:{value:(_vm.email.password),callback:function ($$v) {_vm.$set(_vm.email, \"password\", $$v)},expression:\"email.password\"}}),_c('v-text-field',{attrs:{\"label\":\"Forwarding\",\"required\":\"\"},model:{value:(_vm.email.destination),callback:function ($$v) {_vm.$set(_vm.email, \"destination\", $$v)},expression:\"email.destination\"}}),_c('v-btn',{attrs:{\"disabled\":_vm.fetching,\"loading\":_vm.fetching,\"color\":\"success\"},on:{\"click\":function($event){return _vm.saveEmail()}}},[_vm._v(\" Save \")])],1)],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-alert v-if=\"error\" type=\"error\">\n      {{ error }}\n    </v-alert>\n\n    <Loading :value=\"loading\" />\n\n    <v-card class=\"pa-3\" :loading=\"fetching\">\n      <v-layout row v-if=\"authRequired\">\n        <v-flex xs12>\n          <v-card tile flat>\n            <v-card-text>\n              <strong>DNS auth required: </strong>\n              <v-btn @click=\"authPrompt()\">Fix</v-btn>\n            </v-card-text>\n          </v-card>\n        </v-flex>\n      </v-layout>\n\n      <v-layout\n        row\n        v-if=\"\n          !authRequired &&\n          data.server &&\n          data.dns &&\n          data.dns.MX != data.server.hostname\n        \"\n      >\n        <v-flex xs12>\n          <v-card tile flat>\n            <v-card-text>\n              <strong\n                >MX mismatch: {{ data.dns.MX }} !=\n                {{ data.server.hostname }}</strong\n              >\n              <v-btn v-if=\"data.dns.not_set\" @click=\"fixDomainDns(data.domain)\"\n                >Fix</v-btn\n              >\n            </v-card-text>\n          </v-card>\n        </v-flex>\n      </v-layout>\n\n      <v-layout\n        row\n        v-if=\"!authRequired && data.server && data.dkim && data.dkim.not_set\"\n      >\n        <v-flex xs12>\n          <v-card tile flat>\n            <v-card-text>\n              <strong>Missing DKIM</strong>\n              <v-btn v-if=\"data.dkim.not_set\" @click=\"fixDkim(data.domain)\"\n                >Fix</v-btn\n              >\n            </v-card-text>\n          </v-card>\n        </v-flex>\n      </v-layout>\n\n      <v-layout\n        row\n        v-if=\"\n          !authRequired &&\n          data.server &&\n          data.spf &&\n          data.spf.not_set &&\n          !data.spf.SPF\n        \"\n      >\n        <v-flex xs12>\n          <v-card tile flat>\n            <v-card-text>\n              <strong>Missing SPF</strong>\n              <v-btn v-if=\"data.spf.not_set\" @click=\"fixSpf(data.domain)\"\n                >Fix</v-btn\n              >\n            </v-card-text>\n          </v-card>\n        </v-flex>\n      </v-layout>\n\n      <v-card-title primary-title v-if=\"data.server.mailserver\">\n        <v-switch\n          v-model=\"data.email\"\n          label=\"Email\"\n          @change=\"toggleEmail()\"\n        ></v-switch>\n      </v-card-title>\n    </v-card>\n\n    <!--\n      <v-card\n          class=\"mx-auto\"\n      >\n        <v-card-text>\n          <p>IMAP server: {{data.server.hostname}}:143</p>\n          <p>SMTP server: {{data.server.hostname}}:25</p>\n        </v-card-text>\n      </v-card>\n-->\n\n    <div v-if=\"data.server.mailserver\">\n      <v-card class=\"mx-auto\">\n        <v-list>\n          <v-list-item-group>\n            <template v-for=\"(item, i) in data.emails\">\n              <v-list-item :key=\"`item-${i}`\" :value=\"item\" @click=\"editEmail(i)\">\n                <template v-slot:default>\n                  <v-list-item-content>\n                    <v-list-item-title>\n                      {{ item.user }}\n                      <span v-if=\"item.destination\">\n                        <v-icon>fas fa-long-arrow-alt-right</v-icon>\n                        {{ item.destination }}\n                      </span>\n                    </v-list-item-title>\n                    <v-list-item-subtitle>{{\n                      item.disk_usage | prettyBytes\n                    }}</v-list-item-subtitle>\n                  </v-list-item-content>\n\n                  <v-list-item-action>\n                    <v-btn\n                      icon\n                      :disabled=\"fetching\"\n                      :loading=\"fetching\"\n                      @click=\"deleteEmail(item.user)\"\n                      @click.stop\n                    >\n                      <v-icon small>delete</v-icon>\n                    </v-btn>\n                  </v-list-item-action>\n                </template>\n              </v-list-item>\n            </template>\n          </v-list-item-group>\n        </v-list>\n      </v-card>\n\n      <v-card>\n        <v-card-text>\n          <v-btn @click=\"addEmail()\"> Add email </v-btn>\n        </v-card-text>\n      </v-card>\n\n      <v-navigation-drawer v-model=\"drawer\" fixed temporary right>\n        <v-card>\n          <v-card-title> Email account </v-card-title>\n\n          <v-card-text>\n            <v-text-field\n              v-model=\"email.user\"\n              label=\"Name\"\n              required\n              :readonly=\"userReadonly\"\n            ></v-text-field>\n\n            <v-text-field\n              type=\"password\"\n              v-model=\"email.password\"\n              label=\"Password\"\n              required\n            ></v-text-field>\n\n            <v-text-field\n              v-model=\"email.destination\"\n              label=\"Forwarding\"\n              required\n            ></v-text-field>\n\n            <v-btn\n              :disabled=\"fetching\"\n              :loading=\"fetching\"\n              color=\"success\"\n              @click=\"saveEmail()\"\n            >\n              Save\n            </v-btn>\n          </v-card-text>\n        </v-card>\n      </v-navigation-drawer>\n\n    </div>\n\n    \n  </div>\n</template>\n\n<script>\nimport api from \"../../services/api\";\nimport Loading from \"../../components/Loading\";\n\nexport default {\n  components: {\n    Loading,\n  },\n  data() {\n    return {\n      domainId: null,\n      post: null,\n      error: null,\n      data: {\n        email: false,\n        emails: [],\n        server: {},\n        records: {},\n      },\n      email: {},\n      fetching: false,\n      loading: false,\n      rules: {\n        required: (value) => !!value || \"Required.\",\n        min: (v) => v.length >= 8 || \"Min 8 characters\",\n        emailMatch: () => \"The email and password you entered don't match\",\n      },\n      copyText: \"Copy\",\n      drawer: false,\n      userReadonly: false,\n      timer: null,\n      authRequired: false,\n    };\n  },\n  created() {\n    // fetch the data when the view is created and the data is\n    // already being observed\n    this.fetchData();\n  },\n  watch: {\n    // call again the method if the route changes\n    $route: \"fetchData\",\n  },\n  methods: {\n    fetchData() {\n      var self = this;\n      this.error = \"\";\n      this.domainId = this.$route.params.id;\n      clearTimeout(self.timer);\n      this.fetching = true;\n\n      api\n        .get(\"sites/\" + this.domainId + \"/email?v=\" + Date.now())\n        .then(function (response) {\n          console.log(response);\n\n          self.data = response.data.item;\n          document.title = \"Email\" + \" | \" + self.data.domain;\n\n          if (self.data.dns.updating) {\n            console.log(\"checking dns\");\n            self.timer = setTimeout(self.fetchData, 60000);\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        })\n        .finally(function () {\n          self.fetching = false;\n        });\n    },\n    toggleEmail() {\n      var self = this;\n      this.error = \"\";\n      this.loading = true;\n\n      api\n        .post(\"sites/\" + this.domainId + \"/email\", {\n          update: 1,\n          status: this.data.email,\n        })\n        .then(function (response) {\n          console.log(response);\n\n          if (response.data.error) {\n            self.error = response.data.error;\n          } else if (response.data.success) {\n            self.fetchData();\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        })\n        .finally(function () {\n          self.fetching = false;\n          self.loading = false;\n        });\n    },\n    addEmail() {\n      this.drawer = true;\n      this.userReadonly = false;\n      this.email = {};\n    },\n    editEmail(index) {\n      this.drawer = true;\n      this.userReadonly = true;\n      this.email = this.data.emails[index];\n    },\n    saveEmail() {\n      var self = this;\n\n      if (this.email.user) {\n        this.loading = true;\n        this.error = \"\";\n\n        api\n          .post(\"sites/\" + this.domainId + \"/email\", this.email)\n          .then(function (response) {\n            console.log(response);\n\n            if (!response.data.success) {\n              self.error = response.data.error;\n              self.loading = false;\n            } else {\n              self.drawer = false;\n              self.fetchData();\n            }\n          })\n          .catch(function (error) {\n            console.log(error);\n          })\n          .finally(function () {\n            self.loading = false;\n          });\n      }\n    },\n    deleteEmail(user) {\n      this.$confirm(\"Delete \" + user + \"?\").then((res) => {\n        if (res) {\n          var self = this;\n          this.loading = true;\n          this.error = \"\";\n\n          api\n            .post(\"sites/\" + this.domainId + \"/email\", {\n              delete: 1,\n              user: user,\n            })\n            .then(function (response) {\n              console.log(response);\n\n              if (!response.data.success) {\n                self.error = response.data.error;\n                self.loading = false;\n              } else {\n                self.fetchData();\n              }\n            })\n            .catch(function (error) {\n              console.log(error);\n            })\n            .finally(function () {\n              self.loading = false;\n            });\n        }\n      });\n    },\n    fixDomainDns() {\n      var self = this;\n      this.error = \"\";\n      this.loading = true;\n\n      api\n        .post(\"sites/\" + self.domainId + \"/fixmx\", {})\n        .then(function (response) {\n          console.log(response);\n\n          self.loading = false;\n\n          if (!response.data.success) {\n            if (response.data.error == \"auth\") {\n              self.authRequired = true;\n            } else {\n              self.error = response.data.error;\n            }\n          } else {\n            self.fetchData();\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n    fixDkim() {\n      var self = this;\n      this.error = \"\";\n      this.loading = true;\n\n      api\n        .post(\"sites/\" + self.domainId + \"/fixdkim\", {})\n        .then(function (response) {\n          console.log(response);\n\n          self.loading = false;\n\n          if (!response.data.success) {\n            if (response.data.error == \"auth\") {\n              self.authRequired = true;\n            } else {\n              self.error = response.data.error;\n            }\n          } else {\n            self.fetchData();\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n    fixSpf() {\n      var self = this;\n      this.error = \"\";\n      this.loading = true;\n\n      api\n        .post(\"sites/\" + self.domainId + \"/fixspf\", {})\n        .then(function (response) {\n          console.log(response);\n\n          self.loading = false;\n\n          if (!response.data.success) {\n            if (response.data.error == \"auth\") {\n              self.authRequired = true;\n            } else {\n              self.error = response.data.error;\n            }\n          } else {\n            self.fetchData();\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n    authPrompt() {\n      this.authRequired = false;\n      window.open(\n        \"https://serverwand.com/account/services/\" + this.data.server.dns\n      );\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Email.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Email.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Email.vue?vue&type=template&id=20f3285c&\"\nimport script from \"./Email.vue?vue&type=script&lang=js&\"\nexport * from \"./Email.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","callback","$$v","expression","staticClass","staticStyle","_v","_s","message","staticRenderFns","name","data","props","type","default","component","error","_e","loading","fetching","on","$event","authPrompt","authRequired","server","dns","MX","hostname","fixDomainDns","domain","dkim","not_set","fixDkim","spf","SPF","fixSpf","toggleEmail","$set","_l","item","i","key","editEmail","scopedSlots","_u","fn","user","destination","_f","disk_usage","deleteEmail","stopPropagation","proxy","addEmail","drawer","userReadonly","email","saveEmail","components","Loading","domainId","post","emails","records","rules","required","min","emailMatch","copyText","timer","created","watch","$route","methods","fetchData","clearTimeout","api","then","console","self","document","catch","finally","update","status","index","delete","window"],"sourceRoot":""}