"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[3245],{93992:function(e,s,r){r.d(s,{Z:function(){return d}});var t=r(66252);function a(e,s,r,a,o,l){const n=(0,t.up)("v-icon");return"linode"===r.provider?((0,t.wg)(),(0,t.j4)(n,{key:0},{default:(0,t.w5)((()=>[(0,t.Uk)("fab fa-linode")])),_:1})):"digitalocean"===r.provider?((0,t.wg)(),(0,t.j4)(n,{key:1},{default:(0,t.w5)((()=>[(0,t.Uk)("fab fa-digital-ocean")])),_:1})):((0,t.wg)(),(0,t.j4)(n,{key:2},{default:(0,t.w5)((()=>[(0,t.Uk)("fas fa-server")])),_:1}))}var o={props:{provider:null}},l=r(48118);const n=(0,l.Z)(o,[["render",a]]);var d=n},3245:function(e,s,r){r.r(s),r.d(s,{default:function(){return m}});var t=r(66252),a=r(3577);const o=["innerHTML"],l={key:0},n={key:1};function d(e,s,r,d,u,i){const c=(0,t.up)("v-alert"),h=(0,t.up)("ServerIcon"),v=(0,t.up)("v-list-item-title"),m=(0,t.up)("v-list-item-subtitle"),f=(0,t.up)("v-list-item"),p=(0,t.up)("v-col"),w=(0,t.up)("v-icon"),g=(0,t.up)("v-btn"),_=(0,t.up)("v-row"),k=(0,t.up)("v-container"),U=(0,t.up)("v-tab"),W=(0,t.up)("v-tabs"),y=(0,t.up)("router-view"),b=(0,t.up)("v-card-title"),I=(0,t.up)("v-select"),S=(0,t.up)("v-card-text"),C=(0,t.up)("v-card"),Z=(0,t.up)("v-dialog");return(0,t.wg)(),(0,t.iD)("div",null,[u.error?((0,t.wg)(),(0,t.j4)(c,{key:0,type:"error"},{default:(0,t.w5)((()=>[(0,t._)("div",{innerHTML:u.error},null,8,o)])),_:1})):(0,t.kq)("",!0),u.fetching?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(k,{key:1,fluid:""},{default:(0,t.w5)((()=>[(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{prepend:(0,t.w5)((()=>[(0,t.Wm)(h,{provider:u.data.provider},null,8,["provider"])])),default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(u.data.name),1)])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(u.data.hostname),1)])),_:1})])),_:1})])),_:1}),(0,t.Wm)(p,{class:"text-right"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{color:"success",onClick:i.terminal},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{small:""},{default:(0,t.w5)((()=>[(0,t.Uk)("fas fa-terminal")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})),(0,t.Wm)(W,{"show-arrows":""},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/summary"},{default:(0,t.w5)((()=>[(0,t.Uk)("Summary")])),_:1},8,["to"]),(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/Files"},{default:(0,t.w5)((()=>[(0,t.Uk)("Files")])),_:1},8,["to"]),(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/services"},{default:(0,t.w5)((()=>[(0,t.Uk)("Services")])),_:1},8,["to"]),(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/cronjobs"},{default:(0,t.w5)((()=>[(0,t.Uk)("Cronjobs")])),_:1},8,["to"]),(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/database"},{default:(0,t.w5)((()=>[(0,t.Uk)("Database")])),_:1},8,["to"]),(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/systemusers"},{default:(0,t.w5)((()=>[(0,t.Uk)("System users")])),_:1},8,["to"]),(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/firewall"},{default:(0,t.w5)((()=>[(0,t.Uk)("Firewall")])),_:1},8,["to"]),(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/mail"},{default:(0,t.w5)((()=>[(0,t.Uk)("Mail")])),_:1},8,["to"]),(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/apps"},{default:(0,t.w5)((()=>[(0,t.Uk)("Apps")])),_:1},8,["to"]),(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/logs"},{default:(0,t.w5)((()=>[(0,t.Uk)("Logs")])),_:1},8,["to"]),(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/backups"},{default:(0,t.w5)((()=>[(0,t.Uk)("Cloud backups")])),_:1},8,["to"]),(0,t.Wm)(U,{to:"/servers/"+e.serverId+"/settings"},{default:(0,t.w5)((()=>[(0,t.Uk)("Settings")])),_:1},8,["to"])])),_:1}),(0,t.Wm)(y),(0,t.Wm)(Z,{modelValue:u.chooseUser,"onUpdate:modelValue":s[1]||(s[1]=e=>u.chooseUser=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{loading:u.fetching},{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Open Secure Shell ")])),_:1}),(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[u.users.length?((0,t.wg)(),(0,t.iD)("div",l,[(0,t.Wm)(I,{modelValue:u.ssh_username,"onUpdate:modelValue":s[0]||(s[0]=e=>u.ssh_username=e),items:u.users,label:"User"},null,8,["modelValue","items"]),(0,t.Wm)(g,{disabled:0===u.ssh_username.length,color:"success",onClick:i.saveKeyAndContinue,right:"",class:"ml-3"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Save Key and Continue ")])),_:1},8,["disabled","onClick"])])):u.fetching?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",n," No system users, add one and try again. "))])),_:1})])),_:1},8,["loading"])])),_:1},8,["modelValue"])])}var u=r(1006),i=r(93992),c={components:{ServerIcon:i.Z},data(){return{error:"",data:{users:{}},ssh_username:"",users:[],details:"",fetching:!1,chooseUser:!1}},created(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData(){var e=this;this.error="",this.serverId=this.$route.params.id,u.Z.get("servers/"+this.serverId).then((s=>{console.log(s),s.data.error&&(e.error=s.data.error),s.data.item&&(e.data=s.data.item)})).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},fetchUsers(){var e=this;this.error="",this.fetching=!0,e.chooseUser=!0,u.Z.get("servers/"+this.serverId+"/systemusers").then((s=>{if(console.log(s),s.data.error)return e.error=s.data.error,!1;s.data.item.users.forEach((s=>{e.users.push({text:s.name,value:s.name})}))})).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},saveKey(e){var s=this;u.Z.post("servers/"+s.serverId+"/systemusers/"+s.ssh_username,{key:e}).then((e=>{console.log(e),e.data.success?s.saveSSHUser():(s.fetching=!1,s.error=e.data.error)})).catch((e=>{s.fetching=!1,console.log(e)}))},saveSSHUser(){var e=this;e.fetching=!0,u.Z.post("servers/"+this.serverId+"/savesshuser",{ssh_username:e.ssh_username}).then((s=>{console.log(s),s.data.success?(e.data.ssh_username=e.ssh_username,e.terminal()):e.error=s.data.error})).catch((e=>console.log(e))).finally((()=>{e.fetching=!1,e.chooseUser=!1}))},saveKeyAndContinue(){var e=this;e.fetching=!0,u.Z.post("https://shiftedit.net/api/prefs").then((s=>{console.log(s),s.data.error?(e.error=s.data.error,e.chooseUser=!1):(console.log(s.data.public_key),e.saveKey(s.data.public_key))})).catch((e=>console.log(e)))},terminal(){if(this.data.ssh_username){console.log("open ssh "+this.data.ssh_username);var e="http://shiftedit.net/ssh/?host="+this.data.hostname+"&user="+this.data.ssh_username;window.ssh_path&&(e+="&path="+window.ssh_path),window.open(e)}else this.fetchUsers()}}},h=r(48118);const v=(0,h.Z)(c,[["render",d]]);var m=v}}]);
//# sourceMappingURL=3245.e3d224fc.js.map