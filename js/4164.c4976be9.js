"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[4164],{11912:function(e,t,a){a.d(t,{Z:function(){return c}});var l=a(66252),s=a(3577);const d=(0,l._)("i",{class:"fas fa-magic fa-2x faa-horizontal animated"},null,-1),n={class:"ml-2"};function i(e,t,a,i,r,o){const u=(0,l.up)("v-layout"),c=(0,l.up)("v-card-text"),m=(0,l.up)("v-card"),h=(0,l.up)("v-container"),f=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.j4)(f,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",content:"","content-class":"centered-dialog"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{"fill-height":""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{row:""},{default:(0,l.w5)((()=>[d,(0,l._)("h2",n,(0,s.zw)(a.message),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}var r={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},o=a(48118);const u=(0,o.Z)(r,[["render",i]]);var c=u},64164:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var l=a(66252),s=a(3577);const d=["src"];function n(e,t,a,n,i,r){const o=(0,l.up)("v-alert"),u=(0,l.up)("Loading"),c=(0,l.up)("v-card-text"),m=(0,l.up)("v-card"),h=(0,l.up)("v-row"),f=(0,l.up)("v-container"),g=(0,l.up)("v-data-table"),w=(0,l.up)("v-btn"),p=(0,l.up)("v-card-title"),v=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[i.error?((0,l.wg)(),(0,l.j4)(o,{key:0,type:"error",text:i.error},null,8,["text"])):(0,l.kq)("",!0),(0,l.Wm)(u,{value:i.loading},null,8,["value"]),(0,l.Wm)(m,{loading:i.fetching},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{fluid:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Mail queue: "+(0,s.zw)(i.data.queue),1)])),_:1})])),_:1})])),_:1})])),_:1}),i.items.length?((0,l.wg)(),(0,l.j4)(g,{key:0,modelValue:i.selected,"onUpdate:modelValue":t[0]||(t[0]=e=>i.selected=e),headers:i.headers,items:i.items,"show-select":"",class:"results","mobile-breakpoint":"0","onClick:row":r.view},{"item.size":(0,l.w5)((({item:e})=>[(0,l._)("span",null,(0,s.zw)(r.prettyBytes(e.size)),1)])),_:1},8,["modelValue","headers","items","onClick:row"])):((0,l.wg)(),(0,l.j4)(c,{key:1},{default:(0,l.w5)((()=>[(0,l.Uk)(" Queue empty ")])),_:1}))])),_:1},8,["loading"]),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(p,{"primary-title":""},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{onClick:t[1]||(t[1]=e=>r.deleteMail()),disabled:0===i.selected.length,loading:i.fetching},{default:(0,l.w5)((()=>[(0,l.Uk)(" Delete ")])),_:1},8,["disabled","loading"])])),_:1})])])),_:1}),(0,l.Wm)(v,{app:"",modelValue:i.emailDrawer,"onUpdate:modelValue":t[2]||(t[2]=e=>i.emailDrawer=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Message: "+(0,s.zw)(i.messageId),1)])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l._)("iframe",{width:"100%",height:"315",src:i.messageUrl,frameborder:"0"},null,8,d)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}a(57658);var i=a(1006),r=a(72564),o=a(11912),u={components:{Loading:o.Z},data(){return{error:"",items:[],data:{},details:"",message:"",messageId:"",messageUrl:"",loading:!1,fetching:!1,emailDrawer:!1,serverId:0,selected:[],headers:[{title:"",key:""},{title:"ID",key:"id"},{title:"Size",key:"size",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"From",key:"sender",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"To",key:"recipient",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Date",key:"date",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"}]}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){var e=this;this.error="",this.fetching=!0,i.Z.get("servers/"+this.serverId+"/messages").then((t=>{console.log(t),e.data=t.data.item,e.items=t.data.messages,e.items=[],t.data.messages.forEach((t=>{e.items.push({id:t.id,size:t.size,sender:t.sender,recipient:t.recipient,date:t.date})})),document.title="Mail | "+e.data.name})).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},deleteMail(){var e=this,t=[];this.selected.forEach((e=>{t.push(e)})),e.fetching=!0,i.Z.post("servers/"+this.serverId+"/messages",{ids:t}).then((()=>e.fetchData())).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},view(e,t){this.messageId=t.item.id,this.messageUrl="https://serverwand.com/api/servers/"+this.serverId+"/messages/"+this.messageId,this.emailDrawer=!0},prettyBytes(e){return r.Z.prettyBytes(e)}}},c=a(48118);const m=(0,c.Z)(u,[["render",n]]);var h=m}}]);
//# sourceMappingURL=4164.c4976be9.js.map