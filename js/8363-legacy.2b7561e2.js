"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[8363],{81815:function(e,t,r){r.d(t,{A:function(){return s}});var n=r(20641);function a(e,t,r,a,i,u){var o=(0,n.g2)("v-icon"),s=(0,n.g2)("v-alert"),l=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.Wv)(l,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.show=t}),persistent:"",width:"600"},{default:(0,n.k6)((function(){return[(0,n.bF)(s,{title:r.message,color:"primary"},{prepend:(0,n.k6)((function(){return[(0,n.bF)(o,{icon:"fas fa-magic fa-2x faa-horizontal animated"})]})),_:1},8,["title"])]})),_:1},8,["modelValue"])}var i={name:"Loading",data:function(){return{show:!1}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},u=r(66262);const o=(0,u.A)(i,[["render",a]]);var s=o},50246:function(e,t,r){r.d(t,{A:function(){return l}});var n=r(20641),a=r(53751);function i(e,t,r,i,u,o){var s=(0,n.g2)("v-icon");return"wordpress"===r.app?((0,n.uX)(),(0,n.Wv)(s,{key:0,onClick:(0,a.D$)(o.openLink,["stop"])},{default:(0,n.k6)((function(){return t[0]||(t[0]=[(0,n.eW)("fab fa-wordpress")])})),_:1},8,["onClick"])):"git"===r.app?((0,n.uX)(),(0,n.Wv)(s,{key:1},{default:(0,n.k6)((function(){return t[1]||(t[1]=[(0,n.eW)("fab fa-git")])})),_:1})):"node"===r.app?((0,n.uX)(),(0,n.Wv)(s,{key:2},{default:(0,n.k6)((function(){return t[2]||(t[2]=[(0,n.eW)("fab fa-node-js")])})),_:1})):"joomla"===r.app?((0,n.uX)(),(0,n.Wv)(s,{key:3},{default:(0,n.k6)((function(){return t[3]||(t[3]=[(0,n.eW)("fab fa-joomla")])})),_:1})):"drupal"===r.app?((0,n.uX)(),(0,n.Wv)(s,{key:4},{default:(0,n.k6)((function(){return t[4]||(t[4]=[(0,n.eW)("fab fa-drupal")])})),_:1})):"magento"===r.app?((0,n.uX)(),(0,n.Wv)(s,{key:5},{default:(0,n.k6)((function(){return t[5]||(t[5]=[(0,n.eW)("fab fa-magento")])})),_:1})):"roundcube"===r.app?((0,n.uX)(),(0,n.Wv)(s,{key:6},{default:(0,n.k6)((function(){return t[6]||(t[6]=[(0,n.eW)("fas fa-envelope")])})),_:1})):"shiftlib"===r.app?((0,n.uX)(),(0,n.Wv)(s,{key:7},{default:(0,n.k6)((function(){return t[7]||(t[7]=[(0,n.eW)("fas fa-user-edit")])})),_:1})):((0,n.uX)(),(0,n.Wv)(s,{key:8},{default:(0,n.k6)((function(){return t[8]||(t[8]=[(0,n.eW)("fas fa-sitemap")])})),_:1}))}var u={props:{app:null,to:null},methods:{openLink:function(){this.to&&window.open(this.to)}}},o=r(66262);const s=(0,o.A)(u,[["render",i]]);var l=s},88363:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});r(44114);var n=r(20641),a=r(90033),i={key:0},u={key:0};function o(e,t,r,o,s,l){var f=(0,n.g2)("v-alert"),d=(0,n.g2)("Loading"),c=(0,n.g2)("v-select"),p=(0,n.g2)("v-card-text"),v=(0,n.g2)("v-card"),h=(0,n.g2)("SiteIcon"),m=(0,n.g2)("v-list-item"),g=(0,n.g2)("v-data-table"),k=(0,n.g2)("v-col"),y=(0,n.g2)("v-row"),b=(0,n.g2)("v-layout");return(0,n.uX)(),(0,n.Wv)(b,{row:""},{default:(0,n.k6)((function(){return[(0,n.bF)(y,null,{default:(0,n.k6)((function(){return[(0,n.bF)(k,{cols:"12"},{default:(0,n.k6)((function(){return[s.error?((0,n.uX)(),(0,n.Wv)(f,{key:0,type:"error",text:s.error},null,8,["text"])):(0,n.Q3)("",!0),(0,n.bF)(d,{value:s.loading},null,8,["value"]),(0,n.bF)(v,{flat:"",loading:s.fetching},{default:(0,n.k6)((function(){return[(0,n.bF)(v,{flat:""},{default:(0,n.k6)((function(){return[(0,n.bF)(p,null,{default:(0,n.k6)((function(){return[(0,n.bF)(c,{modelValue:s.server,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.server=e}),items:s.server_opts,label:"Server","hide-details":"",clearable:""},null,8,["modelValue","items"])]})),_:1})]})),_:1}),(0,n.bF)(g,{headers:l.headers,items:s.filtered,"items-per-page":100,hover:"","onClick:row":t[1]||(t[1]=function(t,r){e.$router.push("/sites/"+r.item.id+"/summary")})},{"item.domain":(0,n.k6)((function(e){var t=e.item;return[(0,n.bF)(m,{title:t.domain,subtitle:s.servers[t.server],class:"px-0"},(0,n.eX)({_:2},[s.display.smAndUp?{name:"prepend",fn:(0,n.k6)((function(){return[(0,n.bF)(h,{app:t.app},null,8,["app"])]})),key:"0"}:void 0]),1032,["title","subtitle"])]})),"item.usage":(0,n.k6)((function(e){var t=e.item;return[t.usage>0?((0,n.uX)(),(0,n.CE)("div",i,(0,a.v_)(l.prettyBytes(1024*t.usage)),1)):(0,n.Q3)("",!0)]})),"item.transfer":(0,n.k6)((function(e){var t=e.item;return[t.transfer>0?((0,n.uX)(),(0,n.CE)("div",u,(0,a.v_)(l.prettyBytes(1024*t.transfer)),1)):(0,n.Q3)("",!0)]})),_:1},8,["headers","items"])]})),_:1},8,["loading"])]})),_:1})]})),_:1})]})),_:1})}r(62010),r(26099),r(98992),r(3949),r(23500);var s=r(74300),l=r(27274),f=r(81815),d=r(50246),c={components:{Loading:f.A,SiteIcon:d.A},data:function(){return{fetching:!1,loading:!1,error:"",filtered:[],items:[],servers:{},server:null,server_opts:[],searchPanel:[!1],search:"",selected:[],display:{}}},computed:{headers:function(){var e=[{title:"Site",key:"domain"}];return this.display.smAndUp&&e.push({title:"IP",key:"ip"}),this.display.mdAndUp&&e.push({title:"MX",key:"mx"},{title:"MX",key:"mx"}),this.display.lgAndUp&&e.push({title:"Size",key:"usage"},{title:"Transfer",key:"transfer"}),e}},created:function(){this.display=this.$vuetify.display,document.title="Sites",this.fetchData()},watch:{server:function(){var e=this;this.filtered=[],this.items.forEach((function(t){e.server&&t.server!=e.server||e.filtered.push(t)})),this.server?localStorage.server=this.server:delete localStorage.server}},methods:{fetchData:function(){var e=this;this.error="",this.fetching=!0,s.A.get("sites/").then((function(t){if(console.log(t),t.data.error)return e.error=t.data.error,!1;e.items=t.data.items,t.data.items.forEach((function(t){e.filtered.push(t)})),s.A.get("servers/").then((function(t){t.data.items.forEach((function(t){e.server_opts.push({title:t.name,value:t.id}),e.servers[t.id]=t.name}))}))})).catch((function(e){console.log(e)})).finally((function(){e.fetching=!1,localStorage.server&&(e.server=localStorage.server)}))},prettyBytes:function(e){return l.A.prettyBytes(e)}}},p=r(66262);const v=(0,p.A)(c,[["render",o]]);var h=v}}]);
//# sourceMappingURL=8363-legacy.2b7561e2.js.map