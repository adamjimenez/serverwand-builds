"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[4094],{11297:function(e,t,a){a.d(t,{Z:function(){return d}});var l=a(66252);function o(e,t,a,o,r,n){const s=(0,l.up)("v-icon"),d=(0,l.up)("v-alert"),i=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.j4)(i,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",width:"600"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{title:a.message,color:"primary"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(s,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1},8,["title"])])),_:1},8,["modelValue"])}var r={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},n=a(83744);const s=(0,n.Z)(r,[["render",o]]);var d=s},24094:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var l=a(66252),o=a(3577);const r={class:"text-start"},n={class:"text-start"},s=["onClick"],d={class:"text-start"},i={class:"text-start"},u={class:"text-start"};function c(e,t,a,c,p,m){const h=(0,l.up)("v-alert"),g=(0,l.up)("Loading"),f=(0,l.up)("v-checkbox"),v=(0,l.up)("v-list-item"),w=(0,l.up)("v-switch"),_=(0,l.up)("v-data-table"),k=(0,l.up)("v-card-text"),y=(0,l.up)("v-card"),W=(0,l.up)("v-btn"),V=(0,l.up)("v-card-title"),x=(0,l.up)("v-textarea"),b=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[p.error?((0,l.wg)(),(0,l.j4)(h,{key:0,type:"error",text:p.error},null,8,["text"])):(0,l.kq)("",!0),(0,l.Wm)(g,{value:p.loading},null,8,["value"]),(0,l.Wm)(y,{loading:p.fetching},{default:(0,l.w5)((()=>[p.items.length?((0,l.wg)(),(0,l.j4)(_,{key:0,headers:p.headers,items:p.items,class:"results"},{body:(0,l.w5)((e=>[(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.items,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",r,[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)]),(0,l._)("td",n,[(0,l.Wm)(w,{modelValue:e.online,"onUpdate:modelValue":t=>e.online=t,label:"Online",onChange:t=>m.toggle(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),(0,l._)("td",{class:"text-start",onClick:t=>m.view(e)},(0,o.zw)(e.pid),9,s),(0,l._)("td",d,(0,o.zw)(e.name),1),(0,l._)("td",i,(0,o.zw)(e.status),1),(0,l._)("td",u,(0,o.zw)(e.port),1)])))),128))])])),_:1},8,["headers","items"])):((0,l.wg)(),(0,l.j4)(k,{key:1},{default:(0,l.w5)((()=>[(0,l.Uk)(" No apps ")])),_:1}))])),_:1},8,["loading"]),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(V,{"primary-title":""},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{onClick:t[0]||(t[0]=e=>m.deleteApps()),disabled:!p.selected},{default:(0,l.w5)((()=>[(0,l.Uk)(" Delete ")])),_:1},8,["disabled"])])),_:1})])])),_:1}),(0,l.Wm)(b,{app:"",modelValue:p.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>p.dialog=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Output Log: ")])),_:1}),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x,{readonly:"",value:p.output_log,"auto-grow":""},null,8,["value"])])),_:1})])),_:1}),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Error Log: ")])),_:1}),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x,{readonly:"",value:p.error_log,"auto-grow":""},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}a(57658);var p=a(1006),m=a(11297),h={components:{Loading:m.Z},data(){return{error:"",items:[],data:{},loading:!1,fetching:!1,dialog:!1,serverId:0,selected:!1,headers:[{title:"",key:""},{title:"",key:""},{title:"PID",key:"id"},{title:"Name",key:"name"},{title:"Status",key:"status"},{title:"Ports",key:"port"}],error_log:"",output_log:""}},watch:{items:{handler:function(e){for(var t=0;t<e.length;t++)if(e[t].selected)return void(this.selected=!0);this.selected=!1},deep:!0}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){var e=this;this.error="",this.fetching=!0,p.Z.get("servers/"+this.serverId+"/apps").then((function(t){if(console.log(t),t.data.error)return e.error=t.data.error,!1;e.data=t.data.item,e.items=t.data.apps,document.title="Apps | "+e.data.name})).catch((function(e){console.log(e)})).finally((function(){e.fetching=!1}))},toggle(e){var t=this;this.loading=!0,this.error="";var a=e.active?"start":"stop";p.Z.post("servers/"+this.serverId+"/apps",{name:e.name,action:a}).then((function(e){console.log(e),e.data.success?t.fetchData():t.error=e.data.error})).catch((function(e){console.log(e)})).finally((function(){t.loading=!1}))},deleteApps(){var e=this;e.fetching=!0;var t=[];this.items.forEach((e=>{e.selected&&t.push(e)})),p.Z.post("servers/"+this.serverId+"/apps",{ids:t}).then((function(){e.fetchData()})).catch((function(e){console.log(e)})).finally((function(){e.fetching=!1}))},view(e){this.dialog=!0,this.output_log=e.output_log,this.error_log=e.error_log}}},g=a(83744);const f=(0,g.Z)(h,[["render",c]]);var v=f}}]);
//# sourceMappingURL=4094.8205d5bd.js.map