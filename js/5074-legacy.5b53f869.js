"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[5074],{11912:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(66252),l=n(3577),r=(0,a._)("i",{class:"fas fa-magic fa-2x faa-horizontal animated"},null,-1),u={class:"ml-2"};function i(e,t,n,i,s,o){var d=(0,a.up)("v-layout"),c=(0,a.up)("v-card-text"),f=(0,a.up)("v-card"),m=(0,a.up)("v-container"),h=(0,a.up)("v-dialog");return(0,a.wg)(),(0,a.j4)(h,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.show=t}),persistent:"",content:"","content-class":"centered-dialog"},{default:(0,a.w5)((function(){return[(0,a.Wm)(m,{"fill-height":""},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{color:"primary"},{default:(0,a.w5)((function(){return[(0,a.Wm)(c,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{row:""},{default:(0,a.w5)((function(){return[r,(0,a._)("h2",u,(0,l.zw)(n.message),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])}var s={name:"Loading",data:function(){return{show:!1}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},o=n(48118);const d=(0,o.Z)(s,[["render",i]]);var c=d},95074:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var a=n(66252),l=n(3577),r=["src"];function u(e,t,n,u,i,s){var o=(0,a.up)("v-alert"),d=(0,a.up)("Loading"),c=(0,a.up)("v-card-text"),f=(0,a.up)("v-card"),m=(0,a.up)("v-row"),h=(0,a.up)("v-container"),g=(0,a.up)("v-data-table"),w=(0,a.up)("v-btn"),p=(0,a.up)("v-card-title"),v=(0,a.up)("v-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[i.error?((0,a.wg)(),(0,a.j4)(o,{key:0,type:"error",text:i.error},null,8,["text"])):(0,a.kq)("",!0),(0,a.Wm)(d,{value:i.loading},null,8,["value"]),(0,a.Wm)(f,{loading:i.fetching},{default:(0,a.w5)((function(){return[(0,a.Wm)(h,{fluid:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(m,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(f,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(c,null,{default:(0,a.w5)((function(){return[(0,a.Uk)(" Mail queue: "+(0,l.zw)(i.data.queue),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),i.items.length?((0,a.wg)(),(0,a.j4)(g,{key:0,modelValue:i.selected,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.selected=e}),headers:i.headers,items:i.items,"show-select":"",class:"results","mobile-breakpoint":"0","onClick:row":s.view},{"item.size":(0,a.w5)((function(e){var t=e.item;return[(0,a._)("span",null,(0,l.zw)(s.prettyBytes(t.raw.size)),1)]})),_:1},8,["modelValue","headers","items","onClick:row"])):((0,a.wg)(),(0,a.j4)(c,{key:1},{default:(0,a.w5)((function(){return[(0,a.Uk)(" Queue empty ")]})),_:1}))]})),_:1},8,["loading"]),(0,a.Wm)(f,null,{default:(0,a.w5)((function(){return[(0,a._)("div",null,[(0,a.Wm)(p,{"primary-title":""},{default:(0,a.w5)((function(){return[(0,a.Wm)(w,{onClick:t[1]||(t[1]=function(e){return s.deleteMail()}),disabled:0===i.selected.length,loading:i.fetching},{default:(0,a.w5)((function(){return[(0,a.Uk)(" Delete ")]})),_:1},8,["disabled","loading"])]})),_:1})])]})),_:1}),(0,a.Wm)(v,{app:"",modelValue:i.emailDrawer,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.emailDrawer=e})},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(p,null,{default:(0,a.w5)((function(){return[(0,a.Uk)(" Message: "+(0,l.zw)(i.messageId),1)]})),_:1}),(0,a.Wm)(c,null,{default:(0,a.w5)((function(){return[(0,a._)("iframe",{width:"100%",height:"315",src:i.messageUrl,frameborder:"0"},null,8,r)]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])}n(41539),n(54747),n(57658),n(68309);var i=n(1006),s=n(72564),o=n(11912),d={components:{Loading:o.Z},data:function(){return{error:"",items:[],data:{},details:"",message:"",messageId:"",messageUrl:"",loading:!1,fetching:!1,emailDrawer:!1,serverId:0,selected:[],headers:[{title:"",key:""},{title:"ID ",key:"id"},{title:"Size ",key:"size",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"From ",key:"sender",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"To ",key:"recipient",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Date ",key:"date",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"}]}},created:function(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData:function(){var e=this;this.error="",this.fetching=!0,i.Z.get("servers/"+this.serverId+"/messages").then((function(t){console.log(t),e.data=t.data.item,e.items=t.data.messages,e.items=[],t.data.messages.forEach((function(t){e.items.push({id:t.id,size:t.size,sender:t.sender,recipient:t.recipient,date:t.date})})),document.title="Mail | "+e.data.name})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))},deleteMail:function(){var e=this,t=[];this.selected.forEach((function(e){t.push(e)})),e.fetching=!0,i.Z.post("servers/"+this.serverId+"/messages",{ids:t}).then((function(){return e.fetchData()})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))},view:function(e,t){this.messageId=t.item.raw.id,this.messageUrl="https://serverwand.com/api/servers/"+this.serverId+"/messages/"+this.messageId,this.emailDrawer=!0},prettyBytes:function(e){return s.Z.prettyBytes(e)}}},c=n(48118);const f=(0,c.Z)(d,[["render",u]]);var m=f}}]);
//# sourceMappingURL=5074-legacy.5b53f869.js.map