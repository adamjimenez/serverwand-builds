"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[762],{30762:function(e,a,s){s.r(a),s.d(a,{default:function(){return n}});var l=s(20641);function o(e,a,s,o,r,t){const d=(0,l.g2)("v-alert"),i=(0,l.g2)("v-text-field"),u=(0,l.g2)("v-card-text"),n=(0,l.g2)("v-btn"),m=(0,l.g2)("v-card-actions"),p=(0,l.g2)("v-card"),w=(0,l.g2)("v-expansion-panel-text"),c=(0,l.g2)("v-expansion-panel"),h=(0,l.g2)("v-expansion-panels"),g=(0,l.g2)("v-checkbox"),b=(0,l.g2)("v-spacer"),f=(0,l.g2)("v-dialog"),v=(0,l.g2)("v-card-title");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(p,{"max-width":"600"},{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[e.error?((0,l.uX)(),(0,l.Wv)(d,{key:0,type:"error",text:e.error},null,8,["text"])):(0,l.Q3)("",!0),(0,l.bF)(i,{modelValue:e.data.edition,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.edition=a),label:"Edition",disabled:"",readonly:""},null,8,["modelValue"]),(0,l.bF)(i,{modelValue:e.data.email,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.email=a),rules:e.usernameRules,label:"Email",disabled:"",required:""},null,8,["modelValue","rules"]),(0,l.bF)(h,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:e.passwordPanel,"onUpdate:modelValue":a[3]||(a[3]=a=>e.passwordPanel=a),expand:"",title:"Change password"},{default:(0,l.k6)((()=>[(0,l.bF)(w,null,{default:(0,l.k6)((()=>[(0,l.bF)(p,{tile:"",flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(i,{type:"password",modelValue:e.data.password,"onUpdate:modelValue":a[2]||(a[2]=a=>e.data.password=a),rules:e.passwordRules,label:"Password",required:""},null,8,["modelValue","rules"])])),_:1}),(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(n,{color:"primary",onClick:t.validate},{default:(0,l.k6)((()=>a[20]||(a[20]=[(0,l.eW)("Submit")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(g,{modelValue:e.data.emails,"onUpdate:modelValue":a[4]||(a[4]=a=>e.data.emails=a),label:"Receive email updates",onChange:a[5]||(a[5]=e=>t.toggleEmails())},null,8,["modelValue"]),(0,l.bF)(g,{modelValue:e.useMasterPassword,"onUpdate:modelValue":a[6]||(a[6]=a=>e.useMasterPassword=a),label:"Use a master password",onChange:a[7]||(a[7]=e=>t.toggleMasterPassword())},null,8,["modelValue"])])),_:1}),(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(n,{onClick:a[8]||(a[8]=e=>t.changeMasterPassword()),disabled:!e.useMasterPassword},{default:(0,l.k6)((()=>a[21]||(a[21]=[(0,l.eW)("Change master password")]))),_:1},8,["disabled"])])),_:1})])),_:1}),(0,l.bF)(f,{modelValue:e.masterPasswordDialog,"onUpdate:modelValue":a[14]||(a[14]=a=>e.masterPasswordDialog=a),persistent:"","max-width":"600"},{default:(0,l.k6)((()=>[(0,l.bF)(p,{title:"Master password"},{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[a[22]||(a[22]=(0,l.Lk)("p",null,"A Master Password is used to protect your server keys",-1)),(0,l.bF)(i,{modelValue:e.mp.current,"onUpdate:modelValue":a[9]||(a[9]=a=>e.mp.current=a),type:"password",label:"Current password",required:"",autocomplete:"new-password",disabled:!e.data.prefs.useMasterPassword},null,8,["modelValue","disabled"]),(0,l.bF)(i,{modelValue:e.mp.password,"onUpdate:modelValue":a[10]||(a[10]=a=>e.mp.password=a),type:"password",label:"Enter new password",required:"",autocomplete:"new-password"},null,8,["modelValue"]),(0,l.bF)(i,{modelValue:e.mp.confirm,"onUpdate:modelValue":a[11]||(a[11]=a=>e.mp.confirm=a),type:"password",label:"Re-enter password",required:"",autocomplete:"new-password"},null,8,["modelValue"]),a[23]||(a[23]=(0,l.Lk)("p",null," Please make sure you remember the Master Password you have set. If you forget your Master Password you will be unable to access any of the information protected by it. ",-1))])),_:1}),(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(b),(0,l.bF)(n,{color:"blue darken-1",onClick:a[12]||(a[12]=a=>e.masterPasswordDialog=!1)},{default:(0,l.k6)((()=>a[24]||(a[24]=[(0,l.eW)("Close")]))),_:1}),(0,l.bF)(n,{color:"blue darken-1",onClick:a[13]||(a[13]=e=>t.saveMasterPassword()),disabled:!e.mp.password||e.mp.password!=e.mp.confirm||e.data.prefs.useMasterPassword&&!e.mp.current},{default:(0,l.k6)((()=>a[25]||(a[25]=[(0,l.eW)("Save")]))),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(f,{modelValue:e.removePasswordDialog,"onUpdate:modelValue":a[19]||(a[19]=a=>e.removePasswordDialog=a),persistent:"","max-width":"600px"},{default:(0,l.k6)((()=>[(0,l.bF)(p,null,{default:(0,l.k6)((()=>[(0,l.bF)(v,null,{default:(0,l.k6)((()=>a[26]||(a[26]=[(0,l.Lk)("span",{class:"headline"},"Remove master password",-1)]))),_:1}),(0,l.bF)(u,null,{default:(0,l.k6)((()=>[a[27]||(a[27]=(0,l.Lk)("p",null,"Once removed your passwords will no longer be protected",-1)),(0,l.bF)(i,{modelValue:e.mp.password,"onUpdate:modelValue":a[15]||(a[15]=a=>e.mp.password=a),type:"password",label:"Current password",required:"","browser-autocomplete":"new-password"},null,8,["modelValue"]),(0,l.bF)(g,{modelValue:e.mp.forceRemove,"onUpdate:modelValue":a[16]||(a[16]=a=>e.mp.forceRemove=a),label:"Force remove password (will lose existing passwords)"},null,8,["modelValue"])])),_:1}),(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(b),(0,l.bF)(n,{color:"blue darken-1",onClick:a[17]||(a[17]=a=>e.removePasswordDialog=!1)},{default:(0,l.k6)((()=>a[28]||(a[28]=[(0,l.eW)("Close")]))),_:1}),(0,l.bF)(n,{color:"blue darken-1",onClick:a[18]||(a[18]=e=>t.removeMasterPassword())},{default:(0,l.k6)((()=>a[29]||(a[29]=[(0,l.eW)("Save")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}s(44114);var r=s(74300),t=s(71312),d={data:()=>({valid:!0,mp:{current:"",password:"",confirm:""},data:{edition:"",email:"",password:"",prefs:{}},usernameRules:[e=>!!e||"Email is required"],passwordRules:[],loading:!1,error:"",useMasterPassword:!1,masterPasswordDialog:!1,removePasswordDialog:!1,passwordPanel:[!1]}),created(){document.title="Profile",this.fetchData()},methods:{fetchData(){this.error="",this.loading=!0,r.A.get("settings/profile").then((e=>{console.log(e),this.data=e.data.profile,this.useMasterPassword=this.data.prefs.useMasterPassword})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},validate(){this.$refs.form.validate()&&(this.dialog=!0,r.A.post("settings/profile",this.data).then((e=>{console.log(e),e.data.success?this.$router.push("/"):this.error=e.data.error})).catch((e=>{console.log(e)})).finally((()=>{this.dialog=!1,this.loading=!1})))},changeMasterPassword(){this.masterPasswordDialog=!0},toggleMasterPassword(){this.useMasterPassword=this.data.prefs.useMasterPassword,this.useMasterPassword?this.removePasswordDialog=!0:this.masterPasswordDialog=!0},saveMasterPassword(){this.masterPasswordDialog=!1,this.loading=!0;var e=(0,t.sha256)(this.mp.current),a=(0,t.sha256)(this.mp.password);r.A.post("settings/savemasterpassword",{useMasterPassword:1,masterPassword:e,newMasterPassword:a}).then((e=>{console.log(e),e.data.success?this.fetchData():this.error=e.data.error})).catch((e=>{console.log(e)})).finally((()=>{this.dialog=!1,this.loading=!1}))},removeMasterPassword(){this.removePasswordDialog=!1,this.loading=!0;let e="";this.mp.password&&(e=(0,t.sha256)(this.mp.password)),r.A.post("settings/removemasterpassword",{masterPassword:e,forceRemove:this.mp.forceRemove}).then((e=>{console.log(e),e.data.success?this.fetchData():this.error=e.data.error})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},toggleEmails(){this.loading=!0,r.A.post("settings/profile",{emails:this.data.emails}).then((e=>{console.log(e),e.data.success?this.fetchData():this.error=e.data.error})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))}}},i=s(66262);const u=(0,i.A)(d,[["render",o]]);var n=u}}]);
//# sourceMappingURL=762.7ee427c9.js.map