"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[4764],{84285:function(e,t,a){a.d(t,{Z:function(){return c}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("v-container",{attrs:{"fill-height":""}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[a("v-layout",{attrs:{row:""}},[a("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),a("h2",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.message))])])],1)],1)],1)],1)},l=[],r={name:"Loading",data:()=>({}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},i=r,n=a(1001),d=(0,n.Z)(i,s,l,!1,null,null,null),c=d.exports},64764:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.error?a("v-alert",{attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e(),a("Loading",{attrs:{value:e.loading}}),a("v-card",{attrs:{loading:e.fetching}},[a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-card",[a("v-card-text",[e._v(" Mail queue: "+e._s(e.data.queue)+" ")])],1)],1)],1),e.items.length?a("v-data-table",{staticClass:"results",attrs:{headers:e.headers,items:e.items,"show-select":"","mobile-breakpoint":"0"},on:{"click:row":e.view},scopedSlots:e._u([{key:"item.size",fn:function(t){var s=t.item;return[a("span",[e._v(e._s(e._f("prettyBytes")(s.size)))])]}}],null,!1,682806954),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}):a("v-card-text",[e._v(" Queue empty ")])],1),a("v-card",[a("div",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-btn",{attrs:{disabled:0===e.selected.length,loading:e.fetching},on:{click:function(t){return e.deleteMail()}}},[e._v(" Delete ")])],1)],1)]),a("v-dialog",{attrs:{app:""},model:{value:e.emailDrawer,callback:function(t){e.emailDrawer=t},expression:"emailDrawer"}},[a("v-card",[a("v-card-title",[e._v(" Message: "+e._s(e.message_id)+" ")]),a("v-card-text",[a("iframe",{attrs:{width:"100%",height:"315",src:e.message_url,frameborder:"0"}})])],1)],1)],1)},l=[],r=a(4296),i=a(84285),n={components:{Loading:i.Z},data(){return{error:"",items:[],data:{},details:"",message:"",message_url:"",message_id:"",loading:!1,fetching:!1,emailDrawer:!1,serverId:0,selected:[],headers:[{text:"",value:""},{text:"ID ",value:"id"},{text:"Size ",value:"size",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{text:"From ",value:"sender",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{text:"To ",value:"recipient",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{text:"Date ",value:"date",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"}]}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){var e=this;this.error="",this.fetching=!0,r.Z.get("servers/"+this.serverId+"/messages").then((t=>{console.log(t),e.data=t.data.item,e.items=t.data.messages,e.items=[],t.data.messages.forEach((t=>{e.items.push({id:t.id,size:t.size,sender:t.sender,recipient:t.recipient,date:t.date})})),document.title="Mail | "+e.data.name})).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},deleteMail(){var e=this,t=[];this.selected.forEach((e=>{t.push(e.id)})),e.fetching=!0,r.Z.post("servers/"+this.serverId+"/messages",{ids:t}).then((()=>e.fetchData())).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},view(e){this.message_id=e.id,this.message_url="https://serverwand.com/api/servers/"+this.serverId+"/messages/"+this.message_id,this.emailDrawer=!0}}},d=n,c=a(1001),o=(0,c.Z)(d,s,l,!1,null,null,null),u=o.exports}}]);
//# sourceMappingURL=4764.3e04ff4c.js.map