"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[9113],{11297:function(e,t,a){a.d(t,{Z:function(){return n}});var l=a(66252);function s(e,t,a,s,d,i){const r=(0,l.up)("v-icon"),n=(0,l.up)("v-alert"),o=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.j4)(o,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",width:"600"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{title:a.message,color:"primary"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(r,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1},8,["title"])])),_:1},8,["modelValue"])}var d={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},i=a(83744);const r=(0,i.Z)(d,[["render",s]]);var n=r},49113:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var l=a(66252),s=a(3577);const d=["src"];function i(e,t,a,i,r,n){const o=(0,l.up)("v-alert"),u=(0,l.up)("Loading"),m=(0,l.up)("v-card-text"),c=(0,l.up)("v-card"),h=(0,l.up)("v-row"),g=(0,l.up)("v-container"),f=(0,l.up)("v-data-table"),p=(0,l.up)("v-btn"),w=(0,l.up)("v-card-title"),v=(0,l.up)("v-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[r.error?((0,l.wg)(),(0,l.j4)(o,{key:0,type:"error",text:r.error},null,8,["text"])):(0,l.kq)("",!0),(0,l.Wm)(u,{value:r.loading},null,8,["value"]),(0,l.Wm)(c,{loading:r.fetching},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{fluid:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Mail queue: "+(0,s.zw)(r.data.queue),1)])),_:1})])),_:1})])),_:1})])),_:1}),r.items.length?((0,l.wg)(),(0,l.j4)(f,{key:0,modelValue:r.selected,"onUpdate:modelValue":t[0]||(t[0]=e=>r.selected=e),headers:r.headers,items:r.items,"show-select":"",class:"results","mobile-breakpoint":"0","onClick:row":n.view},{"item.size":(0,l.w5)((({item:e})=>[(0,l._)("span",null,(0,s.zw)(n.prettyBytes(e.size)),1)])),_:1},8,["modelValue","headers","items","onClick:row"])):((0,l.wg)(),(0,l.j4)(m,{key:1},{default:(0,l.w5)((()=>[(0,l.Uk)(" Queue empty ")])),_:1}))])),_:1},8,["loading"]),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(w,{"primary-title":""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{onClick:t[1]||(t[1]=e=>n.deleteMail()),disabled:0===r.selected.length,loading:r.fetching},{default:(0,l.w5)((()=>[(0,l.Uk)(" Delete ")])),_:1},8,["disabled","loading"])])),_:1})])])),_:1}),(0,l.Wm)(v,{app:"",modelValue:r.emailDrawer,"onUpdate:modelValue":t[2]||(t[2]=e=>r.emailDrawer=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" Message: "+(0,s.zw)(r.messageId),1)])),_:1}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l._)("iframe",{width:"100%",height:"315",src:r.messageUrl,frameborder:"0"},null,8,d)])),_:1})])),_:1})])),_:1},8,["modelValue"])])}a(70560);var r=a(1006),n=a(72564),o=a(11297),u={components:{Loading:o.Z},data(){return{error:"",items:[],data:{},details:"",message:"",messageId:"",messageUrl:"",loading:!1,fetching:!1,emailDrawer:!1,serverId:0,selected:[],headers:[{title:"",key:""},{title:"ID",key:"id"},{title:"Size",key:"size",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"From",key:"sender",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"To",key:"recipient",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Date",key:"date",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"}]}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){var e=this;this.error="",this.fetching=!0,r.Z.get("servers/"+this.serverId+"/messages").then((t=>{console.log(t),e.data=t.data.item,e.items=t.data.messages,e.items=[],t.data.messages.forEach((t=>{e.items.push({id:t.id,size:t.size,sender:t.sender,recipient:t.recipient,date:t.date})})),document.title="Mail | "+e.data.name})).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},deleteMail(){var e=this,t=[];this.selected.forEach((e=>{t.push(e)})),e.fetching=!0,r.Z.post("servers/"+this.serverId+"/messages",{ids:t}).then((()=>e.fetchData())).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},view(e,t){this.messageId=t.item.id,this.messageUrl="https://serverwand.com/api/servers/"+this.serverId+"/messages/"+this.messageId,this.emailDrawer=!0},prettyBytes(e){return n.Z.prettyBytes(e)}}},m=a(83744);const c=(0,m.Z)(u,[["render",i]]);var h=c}}]);
//# sourceMappingURL=9113.57759595.js.map