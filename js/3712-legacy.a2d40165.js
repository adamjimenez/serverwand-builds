"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[3712],{81815:function(e,t,r){r.d(t,{A:function(){return d}});var n=r(20641);function a(e,t,r,a,o,l){var i=(0,n.g2)("v-icon"),d=(0,n.g2)("v-alert"),u=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.Wv)(u,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.show=t}),persistent:"",width:"600"},{default:(0,n.k6)((function(){return[(0,n.bF)(d,{title:r.message,color:"primary"},{prepend:(0,n.k6)((function(){return[(0,n.bF)(i,{icon:"fas fa-magic fa-2x faa-horizontal animated"})]})),_:1},8,["title"])]})),_:1},8,["modelValue"])}var o={name:"Loading",data:function(){return{show:!1}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},l=r(66262);const i=(0,l.A)(o,[["render",a]]);var d=i},3712:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});r(62010);var n=r(20641),a={key:2},o={key:3},l={key:0},i=["innerHTML"];function d(e,t,r,d,u,s){var c=this,v=(0,n.g2)("v-alert"),p=(0,n.g2)("Loading"),f=(0,n.g2)("v-card-subtitle"),m=(0,n.g2)("v-list"),g=(0,n.g2)("v-select"),h=(0,n.g2)("v-text-field"),b=(0,n.g2)("v-checkbox"),k=(0,n.g2)("v-btn"),V=(0,n.g2)("v-form"),x=(0,n.g2)("v-card-text"),I=(0,n.g2)("v-card"),y=(0,n.g2)("v-icon"),_=(0,n.g2)("v-progress-linear"),w=(0,n.g2)("v-dialog"),U=(0,n.g2)("v-card-title"),A=(0,n.g2)("v-navigation-drawer");return(0,n.uX)(),(0,n.CE)("div",null,[e.error?((0,n.uX)(),(0,n.Wv)(v,{key:0,type:"error",text:e.error},null,8,["text"])):(0,n.Q3)("",!0),(0,n.bF)(p,{value:e.loading},null,8,["value"]),(0,n.bF)(I,{loading:e.fetching,class:"pb-5",title:"Server details"},{default:(0,n.k6)((function(){return[e.serverId?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(f,{key:0},{default:(0,n.k6)((function(){return t[19]||(t[19]=[(0,n.eW)(" Choose a VPS provider below or connect to a server freshly installed with Ubuntu ")])})),_:1})),(0,n.bF)(x,null,{default:(0,n.k6)((function(){return[e.serverId?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(m,{key:0,items:e.items,"onClick:select":s.getOptions},null,8,["items","onClick:select"])),e.data.provider||e.serverId?((0,n.uX)(),(0,n.Wv)(V,{key:1,ref:"form",modelValue:e.valid,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.valid=t}),class:"mt-5"},{default:(0,n.k6)((function(){return[e.unclaimed.length?((0,n.uX)(),(0,n.Wv)(g,{key:0,modelValue:e.data.unclaimed,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.data.unclaimed=t}),items:e.unclaimed,label:"Server"},null,8,["modelValue","items"])):(0,n.Q3)("",!0),(0,n.bF)(h,{modelValue:e.data.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.data.name=t}),label:"Name",rules:[e.rules.required,e.rules.alphanumeric],required:""},null,8,["modelValue","rules"]),c.serverId>0?((0,n.uX)(),(0,n.Wv)(h,{key:1,modelValue:e.data.ip,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.data.ip=t}),rules:[e.rules.required,e.rules.ip],label:"Server IP"},null,8,["modelValue","rules"])):(0,n.Q3)("",!0),"custom"===e.data.provider||"vultr"===e.data.provider||e.unclaimed.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",a,[e.serverId?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(g,{key:0,modelValue:e.data.region,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.data.region=t}),items:e.regions,label:"Region"},null,8,["modelValue","items"])),e.serverId?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(g,{key:1,modelValue:e.data.type,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.data.type=t}),items:e.types,label:"Type"},null,8,["modelValue","items"])),!e.serverId&&e.images.length?((0,n.uX)(),(0,n.Wv)(g,{key:2,modelValue:e.data.image,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.data.image=t}),items:e.images,label:"Image"},null,8,["modelValue","items"])):(0,n.Q3)("",!0)])),"custom"==e.data.provider||"vultr"==e.data.provider?((0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(h,{disabled:e.serverId>0,modelValue:e.data.hostname,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.data.hostname=t}),label:"Host name",rules:[e.rules.required],required:""},null,8,["disabled","modelValue","rules"]),"custom"==e.data.provider?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(h,{disabled:e.serverId>0,modelValue:e.data.user,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.data.user=t}),label:"Username",rules:[e.rules.required],required:""},null,8,["disabled","modelValue","rules"]),(0,n.bF)(h,{type:"password",disabled:e.serverId>0,modelValue:e.data.pass,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.data.pass=t}),label:"Password",required:""},null,8,["disabled","modelValue"])])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),e.serverId>0||"custom"==e.data.provider?((0,n.uX)(),(0,n.Wv)(h,{key:4,modelValue:e.data.port,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.data.port=t}),label:"Port",required:""},null,8,["modelValue"])):(0,n.Q3)("",!0),"custom"===e.data.provider||e.serverId>0?((0,n.uX)(),(0,n.Wv)(g,{key:5,modelValue:e.data.dns,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.data.dns=t}),items:e.dns,label:"DNS provider"},null,8,["modelValue","items"])):(0,n.Q3)("",!0),e.data.dns?((0,n.uX)(),(0,n.Wv)(g,{key:6,modelValue:e.data.provider_token,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.data.provider_token=t}),items:e.provider_tokens,label:"DNS provider API token (optional)"},null,8,["modelValue","items"])):(0,n.Q3)("",!0),(0,n.bF)(b,{modelValue:e.data.mailserver,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.data.mailserver=t}),label:"Mailserver"},null,8,["modelValue"]),(0,n.bF)(k,{disabled:!e.valid,loading:e.dialog,color:"success",onClick:s.validate},{default:(0,n.k6)((function(){return t[20]||(t[20]=[(0,n.eW)(" Save ")])})),_:1},8,["disabled","loading","onClick"])]})),_:1},8,["modelValue"])):(0,n.Q3)("",!0)]})),_:1})]})),_:1},8,["loading"]),(0,n.bF)(w,{modelValue:e.dialog,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.dialog=t}),persistent:"",width:"300"},{default:(0,n.k6)((function(){return[(0,n.bF)(I,{color:"primary"},{default:(0,n.k6)((function(){return[(0,n.bF)(x,null,{default:(0,n.k6)((function(){return[(0,n.bF)(v,{title:"Spellcasting...",color:"primary"},{prepend:(0,n.k6)((function(){return[(0,n.bF)(y,{icon:"fas fa-magic fa-2x faa-horizontal animated"})]})),_:1}),(0,n.bF)(_,{indeterminate:0==e.progress,modelValue:e.progress,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.progress=t}),color:"white"},null,8,["indeterminate","modelValue"]),(0,n.Lk)("div",{innerHTML:e.details},null,8,i)]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,n.bF)(A,{modelValue:e.drawer,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.drawer=t}),temporary:"",right:"",app:""},{default:(0,n.k6)((function(){return[(0,n.bF)(I,null,{default:(0,n.k6)((function(){return[(0,n.bF)(U,null,{default:(0,n.k6)((function(){return t[21]||(t[21]=[(0,n.eW)(" API token ")])})),_:1}),(0,n.bF)(x,null,{default:(0,n.k6)((function(){return[(0,n.bF)(h,{modelValue:e.provider_token.label,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.provider_token.label=t}),label:"Label",required:""},null,8,["modelValue"]),(0,n.bF)(h,{modelValue:e.provider_token.token,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.provider_token.token=t}),label:"Token",required:""},null,8,["modelValue"]),(0,n.bF)(k,{disabled:e.fetching,loading:e.fetching,color:"success",onClick:s.submitToken},{default:(0,n.k6)((function(){return t[22]||(t[22]=[(0,n.eW)(" Save ")])})),_:1},8,["disabled","loading","onClick"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])}var u=r(14048),s=r(30388),c=(r(44114),r(54554),r(26099),r(27495),r(90906),r(98992),r(3949),r(23500),r(74300)),v=r(81815),p={components:{Loading:v.A},data:function(){return{fetching:!1,loading:!1,valid:!0,data:{images:[],unclaimed:[],provider:"",name:"New-server",hostname:"",user:"root",pass:"",port:"22",webserver:!0,mailserver:!1},dns:[{title:"Linode",value:"linode"},{title:"Digital Ocean",value:"digitalocean"},{title:"Other",value:""}],provider_tokens:[{title:"Add new",value:"new"}],rules:{alphanumeric:function(e){return/^[a-zA-Z0-9_-]+$/g.test(e)||"Must contain alphanumeric characters only"},required:function(e){return!!e||"Required."},port:function(e){return!e||/^\d+(:\d+)?$/.test(e)||"1-65535"},ip:function(e){return!e||/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)||"Invalid IP address"}},provider_token:{},drawer:!1,dialog:!1,details:"",serverId:0,error:"",progress:0,regions:[],types:[],images:[],unclaimed:[],items:[{title:"Linode",value:"linode",props:{prependIcon:"fab fa-linode"}},{title:"DigitalOcean",value:"digitalocean",props:{prependIcon:"fab fa-digital-ocean"}},{title:"Vultr",value:"vultr",props:{prependIcon:"fas fa-server"}},{title:"Ubuntu server",value:"custom",props:{prependIcon:"fab fa-ubuntu"}}],isOpen:!1,provider:"Choose"}},created:function(){document.title="Server details",this.$route.params.id&&(this.serverId=this.$route.params.id),this.fetchData(),this.$route.query.ip&&(this.data.hostname=this.$route.query.ip,this.data.provider="vultr",this.provider="vultr")},watch:{"data.provider_token":function(){"new"===this.data.provider_token&&(this.drawer=!0,this.data.provider_token="",this.provider_token["provider"]=this.data.dns)}},methods:{fetchData:function(){var e=this;this.error="",this.loading=!0,c.A.get("servers/"+this.serverId).then((function(t){console.log(t),e.serverId&&(e.data=t.data.item)})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1})),c.A.get("providers/tokens").then((function(t){console.log(t),e.provider_tokens.splice(1),t.data.tokens&&t.data.tokens.forEach((function(t){e.provider_tokens.push({text:t.label,value:t.id})}))})).catch((function(t){e.error=t})).finally((function(){e.loading=!1}))},install:function(){var e=this;this.dialog=!0,this.details="";var t="servers/"+this.serverId+"/install?webserver=1";this.data.mailserver&&(t+="&mailserver=1"),c.A.event(t,(function(t){e.details=t.msg+"...",t.progress&&(e.progress=t.progress)}),(function(t){e.error=t}),(function(){e.dialog=!1,e.error||e.$router.push("/servers/"+e.serverId+"/summary")}))},validate:function(){var e=(0,s.A)((0,u.A)().mark((function e(){var t,r,n=this;return(0,u.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validate();case 2:if(t=e.sent,r=t.valid,r){e.next=6;break}return e.abrupt("return");case 6:this.details="",this.dialog=!0,this.error="",this.data.unclaimed>0&&(this.serverId=this.data.unclaimed),console.log("save server"),console.log(this.serverId),this.serverId?c.A.post("servers/"+this.serverId+"/update",this.data).then((function(){n.install()})).catch((function(e){console.log(e)})):c.A.post("servers/create",this.data).then((function(e){console.log(e),e.data.success?e.data.id&&(n.serverId=e.data.id,n.serverId&&n.install()):(n.error=e.data.error,n.dialog=!1)})).catch((function(e){console.log(e),n.dialog=!1}));case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getOptions:function(e,t){var r,n=this,a=e.id;(this.data.provider=a,this.provider=a,"custom"!==a&&"vultr"!==a)&&(t||(r=window.open("loading")),this.loading=!0,this.regions=[],this.images=[],this.types=[],this.unclaimed=[],c.A.post("providers/?cmd=options",{provider:a}).then((function(o){if(console.log(o),o.data.require_auth&&!t){r.location="https://serverwand.com/account/services/"+a;var l=setInterval((function(){if(r.closed)return clearInterval(l),void n.getOptions(e,!0)}),500)}else o.data.require_auth||(r&&r.close(),n.regions=o.data.options.regions,n.images=o.data.options.images,n.types=o.data.options.types,o.data.unclaimed.forEach((function(e){n.unclaimed.push({title:e.label,value:e.id})})))})).catch((function(e){r&&r.close(),console.log(e)})).finally((function(){n.loading=!1})))},submitToken:function(){var e=this;c.A.post("providers/tokens",this.provider_token).then((function(t){t.data.error?e.error=t.data.error:(e.drawer=!1,e.fetchData())})).catch((function(t){e.error=t}))}}},f=r(66262);const m=(0,f.A)(p,[["render",d]]);var g=m},84606:function(e,t,r){var n=r(16823),a=TypeError;e.exports=function(e,t){if(!delete e[t])throw new a("Cannot delete property "+n(t)+" of "+n(e))}},57323:function(e,t,r){var n=r(69565),a=r(79504),o=r(655),l=r(67979),i=r(58429),d=r(25745),u=r(2360),s=r(91181).get,c=r(83635),v=r(18814),p=d("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,m=f,g=a("".charAt),h=a("".indexOf),b=a("".replace),k=a("".slice),V=function(){var e=/a/,t=/b*/g;return n(f,e,"a"),n(f,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),x=i.BROKEN_CARET,I=void 0!==/()??/.exec("")[1],y=V||I||x||c||v;y&&(m=function(e){var t,r,a,i,d,c,v,y=this,_=s(y),w=o(e),U=_.raw;if(U)return U.lastIndex=y.lastIndex,t=n(m,U,w),y.lastIndex=U.lastIndex,t;var A=_.groups,F=x&&y.sticky,E=n(l,y),S=y.source,C=0,W=w;if(F&&(E=b(E,"y",""),-1===h(E,"g")&&(E+="g"),W=k(w,y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==g(w,y.lastIndex-1))&&(S="(?: "+S+")",W=" "+W,C++),r=new RegExp("^(?:"+S+")",E)),I&&(r=new RegExp("^"+S+"$(?!\\s)",E)),V&&(a=y.lastIndex),i=n(f,F?r:y,W),F?i?(i.input=k(i.input,C),i[0]=k(i[0],C),i.index=y.lastIndex,y.lastIndex+=i[0].length):y.lastIndex=0:V&&i&&(y.lastIndex=y.global?i.index+i[0].length:a),I&&i&&i.length>1&&n(p,i[0],r,(function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(i[d]=void 0)})),i&&A)for(i.groups=c=u(null),d=0;d<A.length;d++)v=A[d],c[v[0]]=i[v[1]];return i}),e.exports=m},67979:function(e,t,r){var n=r(28551);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},58429:function(e,t,r){var n=r(79039),a=r(44576),o=a.RegExp,l=n((function(){var e=o("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),i=l||n((function(){return!o("a","y").sticky})),d=l||n((function(){var e=o("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:d,MISSED_STICKY:i,UNSUPPORTED_Y:l}},83635:function(e,t,r){var n=r(79039),a=r(44576),o=a.RegExp;e.exports=n((function(){var e=o(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},18814:function(e,t,r){var n=r(79039),a=r(44576),o=a.RegExp;e.exports=n((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},54554:function(e,t,r){var n=r(46518),a=r(48981),o=r(35610),l=r(91291),i=r(26198),d=r(34527),u=r(96837),s=r(1469),c=r(97040),v=r(84606),p=r(70597),f=p("splice"),m=Math.max,g=Math.min;n({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var r,n,p,f,h,b,k=a(this),V=i(k),x=o(e,V),I=arguments.length;for(0===I?r=n=0:1===I?(r=0,n=V-x):(r=I-2,n=g(m(l(t),0),V-x)),u(V+r-n),p=s(k,n),f=0;f<n;f++)h=x+f,h in k&&c(p,f,k[h]);if(p.length=n,r<n){for(f=x;f<V-n;f++)h=f+n,b=f+r,h in k?k[b]=k[h]:v(k,b);for(f=V;f>V-n+r;f--)v(k,f-1)}else if(r>n)for(f=V-n;f>x;f--)h=f+n-1,b=f+r-1,h in k?k[b]=k[h]:v(k,b);for(f=0;f<r;f++)k[f+x]=arguments[f+2];return d(k,V-n+r),p}})},27495:function(e,t,r){var n=r(46518),a=r(57323);n({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},90906:function(e,t,r){r(27495);var n=r(46518),a=r(69565),o=r(94901),l=r(28551),i=r(655),d=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=/./.test;n({target:"RegExp",proto:!0,forced:!d},{test:function(e){var t=l(this),r=i(e),n=t.exec;if(!o(n))return a(u,t,r);var d=a(n,t,r);return null!==d&&(l(d),!0)}})}}]);
//# sourceMappingURL=3712-legacy.a2d40165.js.map