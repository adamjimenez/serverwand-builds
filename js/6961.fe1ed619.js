"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[6961],{81815:function(e,t,a){a.d(t,{A:function(){return d}});var l=a(20641);function i(e,t,a,i,r,n){const o=(0,l.g2)("v-icon"),d=(0,l.g2)("v-alert"),s=(0,l.g2)("v-dialog");return(0,l.uX)(),(0,l.Wv)(s,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",width:"600"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{title:a.message,color:"primary"},{prepend:(0,l.k6)((()=>[(0,l.bF)(o,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1},8,["title"])])),_:1},8,["modelValue"])}var r={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},n=a(66262);const o=(0,n.A)(r,[["render",i]]);var d=o},16961:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});a(44114);var l=a(20641),i=a(90033);const r={key:0},n={key:0},o={key:0},d={key:1},s={key:2};function u(e,t,a,u,c,h){const f=(0,l.g2)("v-alert"),v=(0,l.g2)("Loading"),m=(0,l.g2)("v-list-item"),p=(0,l.g2)("v-select"),g=(0,l.g2)("v-col"),k=(0,l.g2)("v-row"),b=(0,l.g2)("v-container"),y=(0,l.g2)("ServerIcon"),_=(0,l.g2)("v-icon"),F=(0,l.g2)("v-data-table"),w=(0,l.g2)("router-link"),W=(0,l.g2)("v-list-item-title"),X=(0,l.g2)("v-list"),A=(0,l.g2)("v-card"),V=(0,l.g2)("v-layout");return(0,l.uX)(),(0,l.Wv)(V,{row:""},{default:(0,l.k6)((()=>[(0,l.bF)(k,null,{default:(0,l.k6)((()=>[(0,l.bF)(g,{cols:"12"},{default:(0,l.k6)((()=>[c.error?((0,l.uX)(),(0,l.Wv)(f,{key:0,type:"error",text:c.error},null,8,["text"])):(0,l.Q3)("",!0),(0,l.bF)(v,{value:c.loading},null,8,["value"]),(0,l.bF)(A,{loading:c.fetching},{default:(0,l.k6)((()=>[c.items.length?((0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(b,{fluid:""},{default:(0,l.k6)((()=>[(0,l.bF)(k,null,{default:(0,l.k6)((()=>[(0,l.bF)(g,null,{default:(0,l.k6)((()=>[(0,l.bF)(p,{modelValue:c.provider,"onUpdate:modelValue":t[0]||(t[0]=e=>c.provider=e),items:c.provider_opts,label:"Provider","hide-details":"",clearable:""},{item:(0,l.k6)((({props:e,item:t})=>[(0,l.bF)(m,(0,l.v6)(e,{"prepend-icon":t?.raw?.icon,title:t?.raw?.title}),null,16,["prepend-icon","title"])])),_:1},8,["modelValue","items"])])),_:1}),(0,l.bF)(g,null,{default:(0,l.k6)((()=>[(0,l.bF)(p,{modelValue:c.team,"onUpdate:modelValue":t[1]||(t[1]=e=>c.team=e),items:c.teams,"item-title":"name","item-value":"id",label:"Team","hide-details":"",clearable:""},null,8,["modelValue","items"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(F,{headers:h.headers,items:h.filtered,"items-per-page":100,hover:"","fixed-header":"",style:{height:"calc(100vh - 200px)",overflow:"auto"},"hide-default-header":!c.display.smAndUp,"onClick:row":t[2]||(t[2]=function(t,a){e.$router.push("/servers/"+a.item.id+"/summary")})},{"item.name":(0,l.k6)((({item:e})=>[(0,l.bF)(m,{title:e.name,subtitle:e.hostname,class:"px-0"},(0,l.eX)({_:2},[c.display.mobile?void 0:{name:"prepend",fn:(0,l.k6)((()=>[(0,l.bF)(y,{provider:e.provider},null,8,["provider"])])),key:"0"}]),1032,["title","subtitle"])])),"item.connected":(0,l.k6)((({item:e})=>[(0,l.bF)(m,null,{prepend:(0,l.k6)((()=>[0==e.connected?((0,l.uX)(),(0,l.Wv)(_,{key:0,color:"error"},{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.eW)(" fa-solid fa-circle ")]))),_:1})):e.health?.length?((0,l.uX)(),(0,l.Wv)(_,{key:1,color:"warning"},{default:(0,l.k6)((()=>t[4]||(t[4]=[(0,l.eW)("fas fa-exclamation-triangle fa-beat")]))),_:1})):((0,l.uX)(),(0,l.Wv)(_,{key:2,color:"success"},{default:(0,l.k6)((()=>t[5]||(t[5]=[(0,l.eW)(" fa-solid fa-circle ")]))),_:1}))])),default:(0,l.k6)((()=>[c.display.mobile?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("span",n,[0==e.connected?((0,l.uX)(),(0,l.CE)("span",o," Unavailable ")):e.health?.length?((0,l.uX)(),(0,l.CE)("span",d,(0,i.v_)(e.health?.length)+" issue"+(0,i.v_)(1!==e.health?.length?"s":""),1)):((0,l.uX)(),(0,l.CE)("span",s," Connected "))]))])),_:2},1024)])),_:1},8,["headers","items","hide-default-header"])])):((0,l.uX)(),(0,l.Wv)(X,{key:1},{default:(0,l.k6)((()=>[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(W,null,{default:(0,l.k6)((()=>[(0,l.bF)(w,{to:"/servers/create"},{default:(0,l.k6)((()=>t[6]||(t[6]=[(0,l.eW)(" Add a server ")]))),_:1})])),_:1})])),_:1})])),_:1}))])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})}a(98992),a(3949);var c=a(74300),h=a(81815),f=a(56458),v={components:{Loading:h.A,ServerIcon:f.A},data(){return{loading:!1,fetching:!1,error:null,items:[],team:null,teams:[],provider:null,provider_opts:[{title:"Linode",value:"linode",icon:"fab fa-linode"},{title:"Digital Ocean",value:"digitalocean",icon:"fab fa-digital-ocean"},{title:"Vultr",value:"vultr",icon:"fas fa-server"}],display:{}}},computed:{headers:function(){let e=[{title:"Server ",key:"name"},{title:"Status ",key:"connected"}];return this.display.smAndUp&&e.push({title:"Region ",key:"region"},{title:"Image ",key:"image"},{title:"Type ",key:"type"}),e},filtered:function(){let e=[];return this.items.forEach((t=>{if(!this.provider||t.provider===this.provider){if(this.team){let e=!1;if(this.teams.forEach((a=>{a.id==this.team&&a.servers.forEach((a=>{a.server==t.id&&(e=!0)}))})),!e)return}e.push(t)}})),e}},created(){this.display=this.$vuetify.display,document.title="Servers",this.fetchData()},methods:{fetchData(){this.error="",this.fetching=!0,c.A.get("servers/").then((e=>{console.log(e),this.items=e.data.items})).catch((e=>console.log(e))).finally((()=>this.fetching=!1)),c.A.get("teams/").then((e=>{console.log(e),this.teams=e.data.items})).catch((e=>console.log(e))).finally((()=>this.fetching=!1))}}},m=a(66262);const p=(0,m.A)(v,[["render",u]]);var g=p}}]);
//# sourceMappingURL=6961.fe1ed619.js.map