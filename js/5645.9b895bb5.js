"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[5645],{81815:function(e,t,a){a.d(t,{A:function(){return d}});var l=a(20641);function o(e,t,a,o,s,r){const n=(0,l.g2)("v-icon"),d=(0,l.g2)("v-alert"),i=(0,l.g2)("v-dialog");return(0,l.uX)(),(0,l.Wv)(i,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",width:"600"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{title:a.message,color:"primary"},{prepend:(0,l.k6)((()=>[(0,l.bF)(n,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1},8,["title"])])),_:1},8,["modelValue"])}var s={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},r=a(66262);const n=(0,r.A)(s,[["render",o]]);var d=n},95645:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var l=a(20641),o=a(90033);const s={class:"text-start"},r={class:"text-start"},n=["onClick"],d={class:"text-start"},i={class:"text-start"},u={class:"text-start"};function c(e,t,a,c,h,g){const v=(0,l.g2)("v-alert"),p=(0,l.g2)("Loading"),f=(0,l.g2)("v-checkbox"),m=(0,l.g2)("v-list-item"),k=(0,l.g2)("v-switch"),b=(0,l.g2)("v-data-table"),_=(0,l.g2)("v-card-text"),y=(0,l.g2)("v-card"),F=(0,l.g2)("v-btn"),w=(0,l.g2)("v-card-title"),V=(0,l.g2)("v-textarea"),L=(0,l.g2)("v-dialog");return(0,l.uX)(),(0,l.CE)("div",null,[h.error?((0,l.uX)(),(0,l.Wv)(v,{key:0,type:"error",text:h.error},null,8,["text"])):(0,l.Q3)("",!0),(0,l.bF)(p,{value:h.loading},null,8,["value"]),(0,l.bF)(y,{loading:h.fetching},{default:(0,l.k6)((()=>[h.items.length?((0,l.uX)(),(0,l.Wv)(b,{key:0,headers:h.headers,items:h.items,class:"results"},{body:(0,l.k6)((e=>[(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.items,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",s,[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)]),(0,l.Lk)("td",r,[(0,l.bF)(k,{modelValue:e.online,"onUpdate:modelValue":t=>e.online=t,label:"Online",onChange:t=>g.toggle(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),(0,l.Lk)("td",{class:"text-start",onClick:t=>g.view(e)},(0,o.v_)(e.pid),9,n),(0,l.Lk)("td",d,(0,o.v_)(e.name),1),(0,l.Lk)("td",i,(0,o.v_)(e.status),1),(0,l.Lk)("td",u,(0,o.v_)(e.port),1)])))),128))])])),_:1},8,["headers","items"])):((0,l.uX)(),(0,l.Wv)(_,{key:1},{default:(0,l.k6)((()=>[(0,l.eW)(" No apps ")])),_:1}))])),_:1},8,["loading"]),(0,l.bF)(y,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.bF)(w,{"primary-title":""},{default:(0,l.k6)((()=>[(0,l.bF)(F,{onClick:t[0]||(t[0]=e=>g.deleteApps()),disabled:!h.selected},{default:(0,l.k6)((()=>[(0,l.eW)(" Delete ")])),_:1},8,["disabled"])])),_:1})])])),_:1}),(0,l.bF)(L,{app:"",modelValue:h.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>h.dialog=e)},{default:(0,l.k6)((()=>[(0,l.bF)(y,null,{default:(0,l.k6)((()=>[(0,l.bF)(w,null,{default:(0,l.k6)((()=>[(0,l.eW)(" Output Log: ")])),_:1}),(0,l.bF)(_,null,{default:(0,l.k6)((()=>[(0,l.bF)(V,{readonly:"",value:h.output_log,"auto-grow":""},null,8,["value"])])),_:1})])),_:1}),(0,l.bF)(y,null,{default:(0,l.k6)((()=>[(0,l.bF)(w,null,{default:(0,l.k6)((()=>[(0,l.eW)(" Error Log: ")])),_:1}),(0,l.bF)(_,null,{default:(0,l.k6)((()=>[(0,l.bF)(V,{readonly:"",value:h.error_log,"auto-grow":""},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}a(44114);var h=a(74300),g=a(81815),v={components:{Loading:g.A},data(){return{error:"",items:[],data:{},loading:!1,fetching:!1,dialog:!1,serverId:0,selected:!1,headers:[{title:"",key:""},{title:"",key:""},{title:"PID",key:"id"},{title:"Name",key:"name"},{title:"Status",key:"status"},{title:"Ports",key:"port"}],error_log:"",output_log:""}},watch:{items:{handler:function(e){for(var t=0;t<e.length;t++)if(e[t].selected)return void(this.selected=!0);this.selected=!1},deep:!0}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData(){this.error="",this.fetching=!0,h.A.get("servers/"+this.serverId+"/apps").then((e=>{if(console.log(e),e.data.error)return this.error=e.data.error,!1;this.data=e.data.item,this.items=e.data.apps,document.title="Apps | "+this.data.name})).catch((e=>{console.log(e)})).finally((()=>{this.fetching=!1}))},toggle(e){this.loading=!0,this.error="";var t=e.active?"start":"stop";h.A.post("servers/"+this.serverId+"/apps",{name:e.name,action:t}).then((e=>{console.log(e),e.data.success?this.fetchData():this.error=e.data.error})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},deleteApps(){this.fetching=!0;let e=[];this.items.forEach((t=>{t.selected&&e.push(t)})),h.A.post("servers/"+this.serverId+"/apps",{ids:e}).then((()=>{this.fetchData()})).catch((e=>{console.log(e)})).finally((()=>{this.fetching=!1}))},view(e){this.dialog=!0,this.output_log=e.output_log,this.error_log=e.error_log}}},p=a(66262);const f=(0,p.A)(v,[["render",c]]);var m=f}}]);
//# sourceMappingURL=5645.9b895bb5.js.map