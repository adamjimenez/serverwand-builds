"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[6076],{7865:function(e,t,n){n.r(t),n.d(t,{default:function(){return ge}});var r=n(20641),a=n(53751),l=n(90033),o={key:0};function i(e,t,n,i,d,u){var c=(0,r.g2)("v-alert"),s=(0,r.g2)("Loading"),f=(0,r.g2)("EditFile"),h=(0,r.g2)("NewFile"),p=(0,r.g2)("NewFolder"),m=(0,r.g2)("NewLink"),v=(0,r.g2)("Upload"),g=(0,r.g2)("Rename"),b=(0,r.g2)("DeleteFiles"),k=(0,r.g2)("Chmod"),w=(0,r.g2)("Chown"),F=(0,r.g2)("Extract"),C=(0,r.g2)("Tail"),E=(0,r.g2)("Download"),V=(0,r.g2)("Clipboard"),I=(0,r.g2)("v-row"),y=(0,r.g2)("v-container"),_=(0,r.g2)("v-icon"),x=(0,r.g2)("v-btn"),W=(0,r.g2)("v-text-field"),A=(0,r.g2)("v-data-table"),U=(0,r.g2)("v-card");return(0,r.uX)(),(0,r.CE)("div",null,[d.error?((0,r.uX)(),(0,r.Wv)(c,{key:0,type:"error",text:d.error},null,8,["text"])):(0,r.Q3)("",!0),(0,r.bF)(s,{value:d.loading},null,8,["value"]),(0,r.bF)(f,{ref:"editFile",serverId:d.serverId,action:"files",onComplete:t[0]||(t[0]=function(e){return u.fetchData()}),onError:u.handleError,onLoading:u.handleLoading},null,8,["serverId","onError","onLoading"]),(0,r.bF)(U,{loading:d.fetching},{default:(0,r.k6)((function(){return[(0,r.bF)(y,{fluid:""},{default:(0,r.k6)((function(){return[(0,r.bF)(I,null,{default:(0,r.k6)((function(){return[0===u.selected.length?((0,r.uX)(),(0,r.Wv)(h,{key:0,serverId:d.serverId,path:d.path,onComplete:t[1]||(t[1]=function(e){return u.fetchData()}),onError:u.handleError},null,8,["serverId","path","onError"])):(0,r.Q3)("",!0),0===u.selected.length?((0,r.uX)(),(0,r.Wv)(p,{key:1,serverId:d.serverId,path:d.path,onComplete:t[2]||(t[2]=function(e){return u.fetchData()}),onError:u.handleError},null,8,["serverId","path","onError"])):(0,r.Q3)("",!0),0===u.selected.length?((0,r.uX)(),(0,r.Wv)(m,{key:2,serverId:d.serverId,path:d.path,onComplete:t[3]||(t[3]=function(e){return u.fetchData()}),onError:u.handleError},null,8,["serverId","path","onError"])):(0,r.Q3)("",!0),0===u.selected.length?((0,r.uX)(),(0,r.Wv)(v,{key:3,serverId:d.serverId,path:d.path,dropZone:e.$refs.results,onComplete:t[4]||(t[4]=function(e){return u.fetchData()}),onError:u.handleError,folder:"folder"},null,8,["serverId","path","dropZone","onError"])):(0,r.Q3)("",!0),1===u.selected.length?((0,r.uX)(),(0,r.Wv)(g,{key:4,serverId:d.serverId,path:d.path,selected:u.selected,onComplete:t[5]||(t[5]=function(e){return u.fetchData()}),onError:u.handleError},null,8,["serverId","path","selected","onError"])):(0,r.Q3)("",!0),u.selected.length?((0,r.uX)(),(0,r.Wv)(b,{key:5,serverId:d.serverId,path:d.path,selected:u.selected,onComplete:t[6]||(t[6]=function(e){return u.fetchData()}),onError:u.handleError},null,8,["serverId","path","selected","onError"])):(0,r.Q3)("",!0),(0,r.bF)(k,{serverId:d.serverId,path:d.path,selected:u.selected,folderSelected:d.folderSelected,onComplete:t[7]||(t[7]=function(e){return u.fetchData()}),onError:u.handleError},null,8,["serverId","path","selected","folderSelected","onError"]),(0,r.bF)(w,{serverId:d.serverId,path:d.path,selected:u.selected,folderSelected:d.folderSelected,onComplete:t[8]||(t[8]=function(e){return u.fetchData()}),onError:u.handleError},null,8,["serverId","path","selected","folderSelected","onError"]),(0,r.bF)(F,{serverId:d.serverId,path:d.path,selected:u.selected,onComplete:t[9]||(t[9]=function(e){return u.fetchData()}),onError:u.handleError,onLoading:u.handleLoading},null,8,["serverId","path","selected","onError","onLoading"]),1===u.selected.length?((0,r.uX)(),(0,r.Wv)(C,{key:6,serverId:d.serverId,path:d.path,selected:u.selected,onComplete:t[10]||(t[10]=function(e){return u.fetchData()}),onError:u.handleError},null,8,["serverId","path","selected","onError"])):(0,r.Q3)("",!0),1===u.selected.length&&"file"===u.selected[0].type?((0,r.uX)(),(0,r.Wv)(E,{key:7,serverId:d.serverId,path:d.path,selected:u.selected},null,8,["serverId","path","selected"])):(0,r.Q3)("",!0),(0,r.bF)(V,{serverId:d.serverId,path:d.path,selected:u.selected,onComplete:t[11]||(t[11]=function(e){return u.fetchData()}),onError:u.handleError},null,8,["serverId","path","selected","onError"])]})),_:1})]})),_:1}),(0,r.bF)(y,{fluid:""},{default:(0,r.k6)((function(){return[(0,r.bF)(I,null,{default:(0,r.k6)((function(){return[(0,r.bF)(x,{icon:"",onClick:t[12]||(t[12]=function(e){return u.upLevel()}),disabled:"/"===d.path,title:"Up one level"},{default:(0,r.k6)((function(){return[(0,r.bF)(_,{size:"small"},{default:(0,r.k6)((function(){return t[16]||(t[16]=[(0,r.eW)("mdi:mdi-arrow-up")])})),_:1})]})),_:1},8,["disabled"]),(0,r.bF)(W,{modelValue:d.path,"onUpdate:modelValue":t[13]||(t[13]=function(e){return d.path=e}),class:"mx-2",onChange:u.fetchData,onKeydown:(0,a.jR)(u.fetchData,["enter"])},null,8,["modelValue","onChange","onKeydown"])]})),_:1})]})),_:1}),(0,r.bF)(A,{modelValue:d.selectedIds,"onUpdate:modelValue":t[14]||(t[14]=function(e){return d.selectedIds=e}),headers:d.headers,items:d.items,"items-per-page":100,ref:"results","show-select":"","mobile-breakpoint":"0","onClick:row":t[15]||(t[15]=function(e,t){u.open(t.item)}),loading:d.fetching,page:d.page,"onUpdate:page":u.updatePage,hover:"","row-props":u.rowProps},{"item.size":(0,r.k6)((function(e){var t=e.item;return["file"===t.type?((0,r.uX)(),(0,r.CE)("span",o,(0,l.v_)(u.prettyBytes(t.size)),1)):(0,r.Q3)("",!0)]})),"item.modified":(0,r.k6)((function(e){var t=e.item;return[(0,r.eW)((0,l.v_)(u.formatDate(t.modified)),1)]})),"item.owner":(0,r.k6)((function(e){var t=e.item;return[(0,r.eW)((0,l.v_)(t.owner)+" "+(0,l.v_)(t.group),1)]})),_:1},8,["modelValue","headers","items","loading","page","onUpdate:page","row-props"])]})),_:1},8,["loading"])])}var d=n(14048),u=n(30388),c=n(41034),s=(n(50113),n(44114),n(62010),n(26099),n(27495),n(99449),n(5746),n(90744),n(98992),n(72577),n(3949),n(23500),n(74300)),f=n(27274),h=n(81815);function p(e,t,n,a,l,o){var i=(0,r.g2)("v-icon"),d=(0,r.g2)("v-btn"),u=(0,r.g2)("v-card-title"),c=(0,r.g2)("v-text-field"),s=(0,r.g2)("v-card-text"),f=(0,r.g2)("v-card"),h=(0,r.g2)("v-dialog");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(d,{onClick:t[0]||(t[0]=function(e){return o.open()}),title:"New file",icon:""},{default:(0,r.k6)((function(){return[(0,r.bF)(i,null,{default:(0,r.k6)((function(){return t[3]||(t[3]=[(0,r.eW)("mdi:mdi-file-outline")])})),_:1})]})),_:1}),(0,r.bF)(h,{app:"",modelValue:l.dialog,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.dialog=e}),"max-width":"600"},{default:(0,r.k6)((function(){return[(0,r.bF)(f,{loading:l.fetching},{default:(0,r.k6)((function(){return[(0,r.bF)(u,null,{default:(0,r.k6)((function(){return t[4]||(t[4]=[(0,r.eW)(" New file ")])})),_:1}),(0,r.bF)(s,null,{default:(0,r.k6)((function(){return[(0,r.bF)(c,{modelValue:l.data.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.data.value=e}),label:"name",autofocus:""},null,8,["modelValue"]),(0,r.bF)(d,{color:"primary",onClick:o.save,disabled:""===l.data.value},{default:(0,r.k6)((function(){return t[5]||(t[5]=[(0,r.eW)(" Save ")])})),_:1},8,["onClick","disabled"])]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])}var m={props:{serverId:null,path:null},watch:{path:function(e){this.data.path=e}},data:function(){return{fetching:!1,dialog:!1,data:{value:""}}},created:function(){this.data.path=this.path},methods:{open:function(){this.data.value="",this.dialog=!0},save:function(){var e=this;this.error="",this.fetching=!0,this.loading=!0,s.A.post("servers/"+this.serverId+"/files",{cmd:"new_file",new_file:this.data.value,path:this.data.path}).then((function(t){if(console.log(t),t.data.success)e.dialog=!1,e.$emit("complete");else{var n=t.data.error?t.data.error:t.data;e.$emit("error",n)}})).catch((function(e){return console.log(e)})).finally((function(){e.fetching=!1,e.loading=!1}))}}},v=n(66262);const g=(0,v.A)(m,[["render",p]]);var b=g;function k(e,t,n,a,l,o){var i=(0,r.g2)("v-btn"),d=(0,r.g2)("v-text-field"),u=(0,r.g2)("v-card-text"),c=(0,r.g2)("v-card"),s=(0,r.g2)("v-dialog");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(i,{onClick:t[0]||(t[0]=function(e){return o.open()}),title:"New folder",icon:"mdi:mdi-folder-outline"}),(0,r.bF)(s,{app:"",modelValue:l.dialog,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.dialog=e}),"max-width":"600"},{default:(0,r.k6)((function(){return[(0,r.bF)(c,{loading:l.fetching,title:"New folder"},{default:(0,r.k6)((function(){return[(0,r.bF)(u,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:l.data.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.data.value=e}),label:"name",autofocus:""},null,8,["modelValue"]),(0,r.bF)(i,{color:"primary",onClick:o.save,disabled:""===l.data.value},{default:(0,r.k6)((function(){return t[3]||(t[3]=[(0,r.eW)(" Save ")])})),_:1},8,["onClick","disabled"])]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])}var w={props:{serverId:null,path:null},watch:{path:function(e){this.data.path=e}},data:function(){return{fetching:!1,dialog:!1,data:{value:""}}},created:function(){this.data.path=this.path},methods:{open:function(){this.data.value="",this.dialog=!0},save:function(){var e=this;this.error="",this.fetching=!0,this.loading=!0,s.A.post("servers/"+this.serverId+"/files",{cmd:"new_folder",new_folder:this.data.value,path:this.data.path}).then((function(t){if(console.log(t),t.data.success)e.dialog=!1,e.$emit("complete");else{var n=t.data.error?t.data.error:t.data;e.$emit("error",n)}})).catch((function(e){return console.log(e)})).finally((function(){e.fetching=!1,e.loading=!1}))}}};const F=(0,v.A)(w,[["render",k]]);var C=F;function E(e,t,n,a,l,o){var i=(0,r.g2)("v-btn"),d=(0,r.g2)("v-text-field"),u=(0,r.g2)("v-card-text"),c=(0,r.g2)("v-card"),s=(0,r.g2)("v-dialog");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(i,{onClick:t[0]||(t[0]=function(e){return o.open()}),title:"New folder",icon:"mdi:mdi-link"}),(0,r.bF)(s,{app:"",modelValue:l.dialog,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.dialog=e}),"max-width":"600"},{default:(0,r.k6)((function(){return[(0,r.bF)(c,{loading:l.fetching,title:"New link"},{default:(0,r.k6)((function(){return[(0,r.bF)(u,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:l.data.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.data.value=e}),label:"name",autofocus:""},null,8,["modelValue"]),(0,r.bF)(d,{modelValue:l.data.dest,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.data.dest=e}),label:"destination path"},null,8,["modelValue"]),(0,r.bF)(i,{color:"primary",onClick:o.save,disabled:""===l.data.value},{default:(0,r.k6)((function(){return t[4]||(t[4]=[(0,r.eW)(" Save ")])})),_:1},8,["onClick","disabled"])]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])}var V={props:{serverId:null,path:null},watch:{path:function(e){this.data.path=e}},data:function(){return{fetching:!1,dialog:!1,data:{value:"",dest:""}}},created:function(){this.data.path=this.path},methods:{open:function(){this.data.value="",this.dialog=!0},save:function(){var e=this;this.error="",this.fetching=!0,this.loading=!0,s.A.post("servers/"+this.serverId+"/files",{cmd:"new_link",new_link:this.data.value,dest:this.data.dest}).then((function(t){if(console.log(t),t.data.success)e.dialog=!1,e.$emit("complete");else{var n=t.data.error?t.data.error:t.data;e.$emit("error",n)}})).catch((function(e){return console.log(e)})).finally((function(){e.fetching=!1,e.loading=!1}))}}};const I=(0,v.A)(V,[["render",E]]);var y=I,_={key:0};function x(e,t,n,a,l,o){var i=(0,r.g2)("v-btn"),d=(0,r.g2)("v-checkbox"),u=(0,r.g2)("v-col"),c=(0,r.g2)("v-row"),s=(0,r.g2)("v-container"),f=(0,r.g2)("v-text-field"),h=(0,r.g2)("v-form"),p=(0,r.g2)("v-card-text"),m=(0,r.g2)("v-card"),v=(0,r.g2)("v-dialog");return n.selected.length?((0,r.uX)(),(0,r.CE)("div",_,[(0,r.bF)(i,{onClick:t[0]||(t[0]=function(e){return o.chmod()}),disabled:!n.selected,title:"Change permissions",icon:"mdi:mdi-file-key-outline"},null,8,["disabled"]),(0,r.bF)(v,{app:"",modelValue:l.dialog,"onUpdate:modelValue":t[24]||(t[24]=function(e){return l.dialog=e}),width:"600"},{default:(0,r.k6)((function(){return[(0,r.bF)(m,{loading:l.fetching,flat:"",title:"File permissions"},{default:(0,r.k6)((function(){return[(0,r.bF)(p,null,{default:(0,r.k6)((function(){return[(0,r.bF)(s,{fluid:""},{default:(0,r.k6)((function(){return[t[25]||(t[25]=(0,r.Lk)("div",null,"Owner",-1)),(0,r.bF)(c,null,{default:(0,r.k6)((function(){return[(0,r.bF)(u,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:l.ownerR,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.ownerR=e}),label:"Read",onChange:t[2]||(t[2]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.bF)(u,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:l.ownerW,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.ownerW=e}),label:"Write",onChange:t[4]||(t[4]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.bF)(u,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:l.ownerE,"onUpdate:modelValue":t[5]||(t[5]=function(e){return l.ownerE=e}),label:"Execute",onChange:t[6]||(t[6]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1})]})),_:1}),t[26]||(t[26]=(0,r.Lk)("div",{class:"mt-5"},"Group",-1)),(0,r.bF)(c,null,{default:(0,r.k6)((function(){return[(0,r.bF)(u,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:l.groupR,"onUpdate:modelValue":t[7]||(t[7]=function(e){return l.groupR=e}),label:"Read",onChange:t[8]||(t[8]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.bF)(u,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:l.groupW,"onUpdate:modelValue":t[9]||(t[9]=function(e){return l.groupW=e}),label:"Write",onChange:t[10]||(t[10]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.bF)(u,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:l.groupE,"onUpdate:modelValue":t[11]||(t[11]=function(e){return l.groupE=e}),label:"Execute",onChange:t[12]||(t[12]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1})]})),_:1}),t[27]||(t[27]=(0,r.Lk)("div",{class:"mt-5"},"Public",-1)),(0,r.bF)(c,null,{default:(0,r.k6)((function(){return[(0,r.bF)(u,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:l.publicR,"onUpdate:modelValue":t[13]||(t[13]=function(e){return l.publicR=e}),label:"Read",onChange:t[14]||(t[14]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.bF)(u,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:l.publicW,"onUpdate:modelValue":t[15]||(t[15]=function(e){return l.publicW=e}),label:"Write",onChange:t[16]||(t[16]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1}),(0,r.bF)(u,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:l.publicE,"onUpdate:modelValue":t[17]||(t[17]=function(e){return l.publicE=e}),label:"Execute",onChange:t[18]||(t[18]=function(e){return o.calcMode()})},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),(0,r.bF)(h,{modelValue:l.valid,"onUpdate:modelValue":t[23]||(t[23]=function(e){return l.valid=e})},{default:(0,r.k6)((function(){return[(0,r.bF)(f,{modelValue:l.data.mode,"onUpdate:modelValue":t[19]||(t[19]=function(e){return l.data.mode=e}),label:"mode",autofocus:"",onKeyup:t[20]||(t[20]=function(e){return o.modeToCheckboxes()}),rules:[l.rules.required,l.rules.perms]},null,8,["modelValue","rules"]),n.folderSelected?((0,r.uX)(),(0,r.Wv)(d,{key:0,modelValue:l.data.recursive,"onUpdate:modelValue":t[21]||(t[21]=function(e){return l.data.recursive=e}),label:"Replace child permissions"},null,8,["modelValue"])):(0,r.Q3)("",!0),(0,r.bF)(i,{color:"primary",onClick:t[22]||(t[22]=function(e){return o.doChmod()}),disabled:!l.valid},{default:(0,r.k6)((function(){return t[28]||(t[28]=[(0,r.eW)("Save")])})),_:1},8,["disabled"])]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])):(0,r.Q3)("",!0)}n(90906);var W={props:{serverId:null,path:null,selected:null,folderSelected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{fetching:!1,data:{recursive:!1},error:"",dialog:!1,ownerR:!1,ownerW:!1,ownerE:!1,groupR:!1,groupW:!1,groupE:!1,publicR:!1,publicW:!1,publicE:!1,rules:{required:function(e){return!!e||"Required."},perms:function(e){return!e||/^([0-7][0-7][0-7])$/.test(e)||"Invalid Permissions"}},valid:null}},methods:{calcMode:function(){var e=0,t=0,n=0;this.ownerR&&(e+=4),this.ownerW&&(e+=2),this.ownerE&&(e+=1),this.groupR&&(n+=4),this.groupW&&(n+=2),this.groupE&&(n+=1),this.publicR&&(t+=4),this.publicW&&(t+=2),this.publicE&&(t+=1),this.data.mode=""+e+n+t},modeToCheckboxes:function(){var e=this.data.mode,t=e.substr(0,1),n=e.substr(1,1),r=e.substr(2,1);this.ownerR=t>=4&&t<=7,this.ownerW=2==t||3==t||6==t||7==t,this.ownerE=1==t||3==t||5==t||7==t,this.groupR=n>=4&&n<=7,this.groupW=2==n||3==n||6==n||7==n,this.groupE=1==n||3==n||5==n||7==n,this.publicR=r>=4&&r<=7,this.publicW=2==r||3==r||6==r||7==r,this.publicE=1==r||3==r||5==r||7==r},chmod:function(){this.dialog=!0,1===this.selected.length?this.data.mode=this.selected[0].permsn:this.data.mode="000",this.modeToCheckboxes()},doChmod:function(){var e=this;this.fetching=!0;var t=[];this.selected.forEach((function(e){return t.push(e.id)})),s.A.post("servers/"+this.serverId+"/files",{cmd:"chmod",mode:this.data.mode,recursive:this.data.recursive,files:t}).then((function(t){if(console.log(t),t.data.success)e.dialog=!1,e.$emit("complete");else{var n=t.data.error?t.data.error:t.data;e.$emit("error",n)}})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))}}};const A=(0,v.A)(W,[["render",x]]);var U=A,R={key:0};function D(e,t,n,a,l,o){var i=(0,r.g2)("v-icon"),d=(0,r.g2)("v-btn"),u=(0,r.g2)("v-card-title"),c=(0,r.g2)("v-autocomplete"),s=(0,r.g2)("v-checkbox"),f=(0,r.g2)("v-card-text"),h=(0,r.g2)("v-card"),p=(0,r.g2)("v-dialog");return n.selected.length?((0,r.uX)(),(0,r.CE)("div",R,[(0,r.bF)(d,{onClick:t[0]||(t[0]=function(e){return o.chown()}),disabled:!n.selected,title:"Change owner",icon:""},{default:(0,r.k6)((function(){return[(0,r.bF)(i,null,{default:(0,r.k6)((function(){return t[6]||(t[6]=[(0,r.eW)("mdi:mdi-account")])})),_:1})]})),_:1},8,["disabled"]),(0,r.bF)(p,{app:"",modelValue:l.dialog,"onUpdate:modelValue":t[5]||(t[5]=function(e){return l.dialog=e}),"max-width":"600"},{default:(0,r.k6)((function(){return[(0,r.bF)(h,{loading:l.fetching,flat:""},{default:(0,r.k6)((function(){return[(0,r.bF)(u,null,{default:(0,r.k6)((function(){return t[7]||(t[7]=[(0,r.eW)(" File ownership ")])})),_:1}),(0,r.bF)(f,null,{default:(0,r.k6)((function(){return[(0,r.bF)(c,{modelValue:l.data.owner,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.data.owner=e}),label:"Owner",items:l.users,autofocus:"","hide-details":"",class:"mb-5"},null,8,["modelValue","items"]),(0,r.bF)(c,{modelValue:l.data.group,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.data.group=e}),label:"Group",items:l.groups,"hide-details":"",class:"mb-5"},null,8,["modelValue","items"]),n.folderSelected?((0,r.uX)(),(0,r.Wv)(s,{key:0,modelValue:l.data.recursive,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.data.recursive=e}),label:"Replace child permissions",class:"mb-5"},null,8,["modelValue"])):(0,r.Q3)("",!0),(0,r.bF)(d,{color:"primary",onClick:t[4]||(t[4]=function(e){return o.doChown()})},{default:(0,r.k6)((function(){return t[8]||(t[8]=[(0,r.eW)(" Save ")])})),_:1})]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])):(0,r.Q3)("",!0)}var X={props:{serverId:null,path:null,selected:null,folderSelected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{fetching:!1,data:{recursive:!1},groups:[],users:[],error:"",dialog:!1}},methods:{chown:function(){var e=this;this.dialog=!0,s.A.get("servers/"+this.serverId+"/usersAndGroups").then((function(t){e.groups=t.data.groups,e.users=t.data.users})),1===this.selected.length?(this.data.owner=this.selected[0].owner,this.data.group=this.selected[0].group):(this.data.owner="",this.data.group="")},doChown:function(){var e=this;this.fetching=!0;var t=[];this.selected.forEach((function(e){return t.push(e.id)})),s.A.post("servers/"+this.serverId+"/files",{cmd:"chown",owner:this.data.owner,group:this.data.group,recursive:this.data.recursive,files:t}).then((function(t){if(console.log(t),t.data.success)e.dialog=!1,e.$emit("complete");else{var n=t.data.error?t.data.error:t.data;e.$emit("error",n)}})).catch((function(e){console.log(e)})).finally((function(){e.fetching=!1}))}}};const $=(0,v.A)(X,[["render",D]]);var Q=$,S={key:0};function L(e,t,n,a,l,o){var i=(0,r.g2)("v-icon"),d=(0,r.g2)("v-btn"),u=(0,r.g2)("v-text-field"),c=(0,r.g2)("v-card-text"),s=(0,r.g2)("v-card"),f=(0,r.g2)("v-dialog");return 1===n.selected.length?((0,r.uX)(),(0,r.CE)("div",S,[(0,r.bF)(d,{onClick:t[0]||(t[0]=function(e){return o.rename()}),disabled:!n.selected,title:"Rename",icon:""},{default:(0,r.k6)((function(){return[(0,r.bF)(i,null,{default:(0,r.k6)((function(){return t[3]||(t[3]=[(0,r.eW)("mdi:mdi-rename-box")])})),_:1})]})),_:1},8,["disabled"]),(0,r.bF)(f,{app:"",modelValue:l.dialog,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.dialog=e}),"max-width":"600"},{default:(0,r.k6)((function(){return[(0,r.bF)(s,{loading:l.fetching,title:"Rename"},{default:(0,r.k6)((function(){return[(0,r.bF)(c,null,{default:(0,r.k6)((function(){return[(0,r.bF)(u,{modelValue:l.data.newName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.data.newName=e}),label:"name",autofocus:""},null,8,["modelValue"]),(0,r.bF)(d,{color:"primary",onClick:o.doRename},{default:(0,r.k6)((function(){return t[4]||(t[4]=[(0,r.eW)(" Save ")])})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])):(0,r.Q3)("",!0)}var N={props:{serverId:null,path:null,selected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{fetching:!1,data:{path:"",selected:[]},error:"",dialog:!1}},methods:{rename:function(){console.log(this.selected),this.dialog=!0,this.data.oldName=this.selected[0].name,this.data.newName=this.selected[0].name},doRename:function(){var e=this;this.fetching=!0,s.A.post("servers/"+this.serverId+"/files",{cmd:"rename",path:this.path,old_name:this.data.oldName,new_name:this.data.newName}).then((function(t){if(console.log(t),t.data.success)e.dialog=!1,e.$emit("complete");else{var n=t.data.error?t.data.error:t.data;e.$emit("error",n)}})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))}}};const O=(0,v.A)(N,[["render",L]]);var M=O,T=n(65229),z={key:0};function P(e,t,n,a,l,o){var i=(0,r.g2)("v-icon"),d=(0,r.g2)("v-btn"),u=(0,r.g2)("Confirm");return n.selected.length?((0,r.uX)(),(0,r.CE)("div",z,[(0,r.bF)(d,{onClick:t[0]||(t[0]=function(e){return o.deleteItem()}),title:"Delete",icon:"",loading:l.fetching},{default:(0,r.k6)((function(){return[(0,r.bF)(i,null,{default:(0,r.k6)((function(){return t[1]||(t[1]=[(0,r.eW)("mdi:mdi-delete")])})),_:1})]})),_:1},8,["loading"]),(0,r.bF)(u,{ref:"confirm"},null,512)])):(0,r.Q3)("",!0)}var H=n(26301),j={components:{Confirm:H.A},props:{serverId:null,path:null,selected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{fetching:!1,error:"",data:{}}},methods:{deleteItem:function(){var e=(0,u.A)((0,d.A)().mark((function e(){var t,n=this;return(0,d.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.confirm.open("Delete selected files?");case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:this.fetching=!0,t=[],this.selected.forEach((function(e){return t.push(e.id)})),s.A.post("servers/"+this.serverId+"/files",{cmd:"delete",files:t}).then((function(e){if(console.log(e),e.data.success)n.$emit("complete");else{var t=e.data.error?e.data.error:e.data;n.$emit("error",t)}})).catch((function(e){console.log(e)})).finally((function(){return n.fetching=!1}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}};const q=(0,v.A)(j,[["render",P]]);var B=q,G={key:0};function K(e,t,n,a,l,o){var i=(0,r.g2)("v-icon"),d=(0,r.g2)("v-btn");return 1===n.selected.length&&"file"===n.selected[0].type?((0,r.uX)(),(0,r.CE)("div",G,[(0,r.bF)(d,{onClick:t[0]||(t[0]=function(e){return o.download()}),title:"Download",icon:""},{default:(0,r.k6)((function(){return[(0,r.bF)(i,null,{default:(0,r.k6)((function(){return t[1]||(t[1]=[(0,r.eW)("mdi:mdi-download")])})),_:1})]})),_:1})])):(0,r.Q3)("",!0)}var Z={props:{serverId:null,path:null,selected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{fetching:!1,data:{},error:"",dialog:!1}},methods:{download:function(){window.open("https://serverwand.com/api/servers/"+this.serverId+"/files?d="+encodeURIComponent(this.selected[0].id))}}};const J=(0,v.A)(Z,[["render",K]]);var Y=J;function ee(e,t,n,a,l,o){var i=(0,r.g2)("v-btn"),d=(0,r.g2)("Confirm");return(0,r.uX)(),(0,r.CE)("div",null,[n.selected.length?((0,r.uX)(),(0,r.Wv)(i,{key:0,onClick:t[0]||(t[0]=function(e){return o.cut()}),title:"Cut",icon:"mdi:mdi-content-cut"})):(0,r.Q3)("",!0),n.selected.length?((0,r.uX)(),(0,r.Wv)(i,{key:1,onClick:t[1]||(t[1]=function(e){return o.copy()}),title:"Copy",icon:"mdi:mdi-content-copy"})):(0,r.Q3)("",!0),l.data.items.length&&n.path!=l.data.src?((0,r.uX)(),(0,r.Wv)(i,{key:2,onClick:t[2]||(t[2]=function(e){return o.paste()}),title:"Paste",icon:"mdi:mdi-content-paste"})):(0,r.Q3)("",!0),(0,r.bF)(d,{ref:"confirm"},null,512)])}var te={components:{Confirm:H.A},props:{serverId:null,path:null,selected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{fetching:!1,data:{items:[],cut:!1,src:""},error:"",dialog:!1}},methods:{cut:function(){this.copy(!0)},copy:function(e){var t=this;this.data.cut=!!e,this.data.src=this.path,this.data.items=[],this.selected.forEach((function(e){return t.data.items.push(e.name)}))},paste:function(){var e=(0,u.A)((0,d.A)().mark((function e(){var t,n=this;return(0,d.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(this.data),t=this.data.cut?"Move":"Copy",e.next=4,this.$refs.confirm.open(t+" "+this.data.items.length+" items?");case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:this.fetching=!0,s.A.post("servers/"+this.serverId+"/files",{cmd:t.toLowerCase(),path:this.path,src:this.data.src,files:this.data.items}).then((function(e){if(console.log(e),"move"===t.toLowerCase()&&(n.data.items=[]),e.data.success)n.$emit("complete");else{var r=e.data.error?e.data.error:e.data;n.$emit("error",r)}})).catch((function(e){return console.log(e)})).finally((function(){return n.fetching=!1}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}};const ne=(0,v.A)(te,[["render",ee]]);var re=ne,ae=n(30247);function le(e,t,n,a,o,i){var d,u=(0,r.g2)("v-alert"),c=(0,r.g2)("v-icon"),s=(0,r.g2)("v-btn");return(0,r.uX)(),(0,r.CE)("div",null,[o.msg?((0,r.uX)(),(0,r.Wv)(u,{key:0,dark:"",style:{position:"fixed",width:"100%","z-index":"10",left:"0",bottom:"0",margin:"0 auto"},type:"info"},{default:(0,r.k6)((function(){return[(0,r.eW)((0,l.v_)(o.msg),1)]})),_:1})):(0,r.Q3)("",!0),1===(null===(d=n.selected)||void 0===d?void 0:d.length)&&-1!==["zip","gz","tar"].indexOf(i.fileExtension(n.selected[0]))?((0,r.uX)(),(0,r.Wv)(s,{key:1,onClick:t[0]||(t[0]=function(e){return i.extract()}),disabled:!n.selected,title:"Extract",icon:""},{default:(0,r.k6)((function(){return[(0,r.bF)(c,null,{default:(0,r.k6)((function(){return t[1]||(t[1]=[(0,r.eW)("mdi:mdi-folder-zip-outline")])})),_:1})]})),_:1},8,["disabled"])):(0,r.Q3)("",!0)])}var oe={props:{serverId:null,path:null,selected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{data:{recursive:!1},error:"",dialog:!1,msg:""}},methods:{fileExtension:function(e){var t=e.name.lastIndexOf(".");return-1===t?"":e.name.substr(t+1,e.name.length)},extract:function(){var e=this;this.$emit("loading",!0),s.A.event("servers/"+this.serverId+"/files?cmd=extract&id="+encodeURIComponent(this.selected[0].id),(function(t){e.msg=t.msg}),(function(t){return e.$emit("error",t)}),(function(){e.msg="",e.$emit("complete")}))}}};const ie=(0,v.A)(oe,[["render",le]]);var de=ie,ue={key:0};function ce(e,t,n,a,l,o){var i,d=(0,r.g2)("v-icon"),u=(0,r.g2)("v-btn"),c=(0,r.g2)("v-alert"),s=(0,r.g2)("v-toolbar"),f=(0,r.g2)("MonacoEditor"),h=(0,r.g2)("v-card-text"),p=(0,r.g2)("v-card"),m=(0,r.g2)("v-dialog");return 1===n.selected.length?((0,r.uX)(),(0,r.CE)("div",ue,[1===(null===(i=n.selected)||void 0===i?void 0:i.length)&&"file"===n.selected[0].type?((0,r.uX)(),(0,r.Wv)(u,{key:0,onClick:t[0]||(t[0]=function(e){return o.tail()}),disabled:!n.selected,title:"Tail",icon:""},{default:(0,r.k6)((function(){return[(0,r.bF)(d,null,{default:(0,r.k6)((function(){return t[4]||(t[4]=[(0,r.eW)("mdi:mdi-format-align-bottom")])})),_:1})]})),_:1},8,["disabled"])):(0,r.Q3)("",!0),l.error?((0,r.uX)(),(0,r.Wv)(c,{key:1,type:"error",text:l.error},null,8,["text"])):(0,r.Q3)("",!0),(0,r.bF)(m,{modelValue:l.dialog,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.dialog=e}),fullscreen:""},{default:(0,r.k6)((function(){return[(0,r.bF)(p,{loading:l.fetching,style:{height:"95vh"}},{default:(0,r.k6)((function(){return[(0,r.bF)(s,{title:l.data.id},{append:(0,r.k6)((function(){return[(0,r.bF)(u,{onClick:t[1]||(t[1]=function(e){return l.dialog=!1}),icon:"mdi:mdi-close"})]})),_:1},8,["title"]),(0,r.bF)(h,null,{default:(0,r.k6)((function(){return[(0,r.bF)(f,{class:"editor",ref:"editor",language:l.language,value:l.data.content,"onUpdate:value":t[2]||(t[2]=function(e){return l.data.content=e}),theme:"vs-dark"},null,8,["language","value"])]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])):(0,r.Q3)("",!0)}var se=n(12547),fe={components:{MonacoEditor:se.A},props:{serverId:null,path:null,selected:null},watch:{path:function(e){this.data.path=e},selected:function(e){this.data.selected=e}},data:function(){return{fetching:!1,data:{path:"",selected:[]},error:"",dialog:!1,language:"javascript"}},methods:{basename:function(e){return e.split(/[\\/]/).pop()},tail:function(){var e=this;this.$emit("loading",!0);var t=this.selected[0];return s.A.post("servers/"+this.serverId+"/files",{cmd:"tail",id:t.id}).then((function(n){console.log(n),!1!==n.data.success?(e.data.id=t.id,e.data.file=e.basename(t.id),e.data.content=n.data.content,e.dialog=!0):e.$emit("error",n.data.error)})).catch((function(e){return console.log(e)})).finally((function(){e.fetching=!1,e.$emit("loading",!1)}))}}};const he=(0,v.A)(fe,[["render",ce]]);var pe=he,me={components:{Loading:h.A,NewFile:b,NewFolder:C,NewLink:y,Chmod:U,Chown:Q,Rename:M,EditFile:T.A,DeleteFiles:B,Download:Y,Clipboard:re,Upload:ae.A,Extract:de,Tail:pe},data:function(){return{path:"/",search:"",error:"",items:[],server:{},data:{},loading:!1,fetching:!1,userHashChange:!0,serverId:0,selectedIds:[],folderSelected:!1,headers:[{title:"",key:""},{title:"Name",key:"name"},{title:"Size",key:"size",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Date modified",key:"modified",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Permissions",key:"perms",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Owner",key:"owner",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"},{title:"Destination",key:"dest",class:"d-none d-sm-table-cell",cellClass:"d-none d-sm-table-cell"}],fileToOpen:"",page:1}},computed:{dir:function(){var e=this.path;if(!e.endsWith("/")){var t=e.lastIndexOf("/");-1!==t&&(e=e.substr(0,t))}return e},selected:function(){var e=this,t=[];return this.selectedIds.forEach((function(n){var r=e.items.find((function(e){return e.id===n}));r&&t.push(r)})),t}},watch:{path:{handler:function(e){window.ssh_path=e,this.selectedIds=[],this.userHashChange=!1,location.hash=e}},selected:function(e){var t=!1;e.forEach((function(e){"folder"===e.type&&(t=!0)})),this.folderSelected=t}},created:function(){var e=this;if(this.serverId=this.$route.params.id,window.onhashchange=function(){e.userHashChange?(e.path=location.hash.substr(1),e.fetchData()):e.userHashChange=!0},location.hash){this.path=location.hash.substr(1);var t=this.basename(this.path);-1!==t.indexOf(".")&&(this.fileToOpen=t)}this.fetchData()},methods:{basename:function(e){return e.split(/[\\/]/).pop()},fetchData:function(){var e=this;this.error="",this.fetching=!0,this.page=1,this.search?(this.items=[],s.A.event("servers/"+this.serverId+"/files?path="+encodeURIComponent(this.dir)+"&search="+encodeURIComponent(this.search),(function(t){var n=t.msg.split("\n");n.forEach((function(t){var n=!1;e.items.forEach((function(e){e.id===t&&(n=!0)})),n||e.items.push({id:t,name:e.basename(t),type:"file"})}))}),(function(t){return e.error=t}),(function(){return e.fetching=!1}))):s.A.post("servers/"+this.serverId+"/files",{path:this.dir}).then((function(t){console.log(t),t.data.error?e.error=t.data.error:(e.server=t.data.item,e.page=1,e.items=[],t.data.files.forEach((function(t){var n=(0,c.A)({},t);n.selected=!0,e.items.push(n)})),document.title="Files | "+e.server.name)})).catch((function(e){console.log(e)})).finally((function(){if(e.fetching=!1,e.selectedIds=[],e.fileToOpen){var t=e.fileToOpen,n=1;if(-1!==t.indexOf(":")){var r=t.split(":");t=r[0],n=r[1]}e.items.forEach(function(){var r=(0,u.A)((0,d.A)().mark((function r(a){return(0,d.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a.name!==t){r.next=5;break}return e.fileToOpen="",r.next=4,e.$refs.editFile.open(a);case 4:e.$refs.editFile.goToLine(n);case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}}))},open:function(e){this.error="","folder"===e.type||"link"===e.type?(this.path=e.id,this.fetchData()):"file"===e.type&&this.$refs.editFile.open(e)},upLevel:function(){this.search="";var e=this.path.substr(0,this.path.length-1).lastIndexOf("/");-1!==e&&(this.path=this.path.substr(0,e+1),this.dir||(this.path="/")),this.fetchData()},handleError:function(e){this.error=e},handleLoading:function(e){this.fetching=e},prettyBytes:function(e){return f.A.prettyBytes(e)},formatDate:function(e){return f.A.formatDate(e)},updatePage:function(e){this.page=e},rowProps:function(e){if(this.selected.find((function(t){return t.id===e.item.id})))return{class:"bg-primary"}}}};const ve=(0,v.A)(me,[["render",i]]);var ge=ve},3470:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}},90906:function(e,t,n){n(27495);var r=n(46518),a=n(69565),l=n(94901),o=n(28551),i=n(655),d=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=/./.test;r({target:"RegExp",proto:!0,forced:!d},{test:function(e){var t=o(this),n=i(e),r=t.exec;if(!l(r))return a(u,t,n);var d=a(r,t,n);return null!==d&&(o(d),!0)}})},99449:function(e,t,n){var r=n(46518),a=n(27476),l=n(77347).f,o=n(18014),i=n(655),d=n(60511),u=n(67750),c=n(41436),s=n(96395),f=a("".slice),h=Math.min,p=c("endsWith"),m=!s&&!p&&!!function(){var e=l(String.prototype,"endsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!m&&!p},{endsWith:function(e){var t=i(u(this));d(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,a=void 0===n?r:h(o(n),r),l=i(e);return f(t,a-l.length,a)===l}})},5746:function(e,t,n){var r=n(69565),a=n(89228),l=n(28551),o=n(64117),i=n(67750),d=n(3470),u=n(655),c=n(55966),s=n(56682);a("search",(function(e,t,n){return[function(t){var n=i(this),a=o(t)?void 0:c(t,e);return a?r(a,t,n):new RegExp(t)[e](u(n))},function(e){var r=l(this),a=u(e),o=n(t,r,a);if(o.done)return o.value;var i=r.lastIndex;d(i,0)||(r.lastIndex=0);var c=s(r,a);return d(r.lastIndex,i)||(r.lastIndex=i),null===c?-1:c.index}]}))}}]);
//# sourceMappingURL=6076-legacy.c6273c17.js.map