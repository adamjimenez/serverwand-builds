"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[5062],{45062:function(e,a,l){l.r(a),l.d(a,{default:function(){return n}});var t=l(20641);function r(e,a,l,r,i,s){const o=(0,t.g2)("v-alert"),d=(0,t.g2)("v-btn"),n=(0,t.g2)("v-card-actions"),c=(0,t.g2)("v-switch"),u=(0,t.g2)("v-list-item"),g=(0,t.g2)("v-list"),h=(0,t.g2)("v-card"),m=(0,t.g2)("v-icon"),v=(0,t.g2)("v-progress-linear"),f=(0,t.g2)("v-textarea"),b=(0,t.g2)("v-card-text"),p=(0,t.g2)("v-dialog");return(0,t.uX)(),(0,t.CE)("div",null,[i.error?((0,t.uX)(),(0,t.Wv)(o,{key:0,type:"error",text:i.error},null,8,["text"])):(0,t.Q3)("",!0),(0,t.bF)(h,{class:"pa-3",loading:i.fetching},{default:(0,t.k6)((()=>[(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.bF)(d,{onClick:a[0]||(a[0]=e=>s.fixProblems()),icon:"mdi:mdi-auto-fix",title:"Find and fix problems"})])),_:1}),(0,t.bF)(g,{group:"","max-width":"600"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.items,((e,a)=>((0,t.uX)(),(0,t.Wv)(u,{key:`item-${a}`,value:e},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:e.active,"onUpdate:modelValue":a=>e.active=a,label:e.name,onChange:a=>s.toggle(e),color:"primary","hide-details":"",loading:i.loading===e.name},null,8,["modelValue","onUpdate:modelValue","label","onChange","loading"])])),_:2},1032,["value"])))),128))])),_:1})])),_:1},8,["loading"]),(0,t.bF)(p,{modelValue:i.dialog,"onUpdate:modelValue":a[4]||(a[4]=e=>i.dialog=e),width:"300"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{color:"primary"},{default:(0,t.k6)((()=>[(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)(o,{title:"Spellcasting...",color:"primary"},{prepend:(0,t.k6)((()=>[(0,t.bF)(m,{icon:i.closable?"fas fa-magic fa-2x faa-horizontal":"fas fa-magic fa-2x faa-horizontal animated"},null,8,["icon"])])),_:1}),i.closable?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(v,{key:0,indeterminate:0==i.progress,modelValue:i.progress,"onUpdate:modelValue":a[1]||(a[1]=e=>i.progress=e),color:"white"},null,8,["indeterminate","modelValue"])),(0,t.bF)(f,{modelValue:i.details,"onUpdate:modelValue":a[2]||(a[2]=e=>i.details=e),readonly:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.bF)(d,{onClick:a[3]||(a[3]=e=>i.dialog=!1),disabled:!i.closable},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("Close")]))),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var i=l(74300),s={data(){return{error:"",items:{},fetching:!1,loading:null,serverId:0,dialog:!1,closable:!1,progress:0,details:""}},created(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fixProblems(){this.dialog=!0,this.closable=!1,this.details="";let e="servers/"+this.serverId+"/check";i.A.event(e,(e=>{this.details+=e.msg+"\n",e.progress&&(this.progress=e.progress)}),(e=>{this.error=e}),(()=>{this.closable=!0}))},fetchData(){this.error="",this.fetching=!0,i.A.get("servers/"+this.serverId+"/services").then((e=>{if(console.log(e),e.data.error)return this.error=e.data.error,!1;this.items=e.data.services,this.data=e.data.item,document.title="Services | "+this.data.name})).catch((e=>console.log(e))).finally((()=>this.fetching=!1))},async toggle(e){this.loading=e.name,this.error="";let a=await i.A.post("servers/"+this.serverId+"/services",{name:e.name,start:e.active});await this.fetchData(),a.data.success||(this.error=a.data.error),this.loading=null}}},o=l(66262);const d=(0,o.A)(s,[["render",r]]);var n=d}}]);
//# sourceMappingURL=5062.7fd272ea.js.map