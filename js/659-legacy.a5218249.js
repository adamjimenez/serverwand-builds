"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[659],{84285:function(t,e,a){a.d(e,{Z:function(){return c}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("v-container",{attrs:{"fill-height":""}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[a("v-layout",{attrs:{row:""}},[a("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),a("h2",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.message))])])],1)],1)],1)],1)},s=[],n={name:"Loading",data:function(){return{}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},o=n,i=a(1001),l=(0,i.Z)(o,r,s,!1,null,null,null),c=l.exports},60659:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.error?a("v-alert",{attrs:{type:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),a("Loading",{attrs:{value:t.loading}}),a("v-card",{attrs:{loading:t.fetching}},[t.items.length?a("v-data-table",{staticClass:"results",attrs:{headers:t.headers,items:t.items},scopedSlots:t._u([{key:"body",fn:function(e){return[a("tbody",t._l(e.items,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-start"},[a("v-list-item",[a("v-checkbox",{model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"item.selected"}})],1)],1),a("td",{staticClass:"text-start"},[a("v-switch",{attrs:{label:"Online"},on:{change:function(a){return t.toggle(e)}},model:{value:e.online,callback:function(a){t.$set(e,"online",a)},expression:"item.online"}})],1),a("td",{staticClass:"text-start",on:{click:function(a){return t.view(e)}}},[t._v(" "+t._s(e.pid)+" ")]),a("td",{staticClass:"text-start"},[t._v(" "+t._s(e.name)+" ")]),a("td",{staticClass:"text-start"},[t._v(" "+t._s(e.status)+" ")]),a("td",{staticClass:"text-start"},[t._v(" "+t._s(e.port)+" ")])])})),0)]}}],null,!1,253567502)}):a("v-card-text",[t._v(" No apps ")])],1),a("v-card",[a("div",[a("v-card-title",{attrs:{"primary-title":""}},[a("v-btn",{attrs:{disabled:!t.selected},on:{click:function(e){return t.deleteApps()}}},[t._v(" Delete ")])],1)],1)]),a("v-dialog",{attrs:{app:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v(" Output Log: ")]),a("v-card-text",[a("v-textarea",{attrs:{readonly:"",value:t.output_log,"auto-grow":""}})],1)],1),a("v-card",[a("v-card-title",[t._v(" Error Log: ")]),a("v-card-text",[a("v-textarea",{attrs:{readonly:"",value:t.error_log,"auto-grow":""}})],1)],1)],1)],1)},s=[],n=(a(41539),a(68309),a(54747),a(4296)),o=a(84285),i={components:{Loading:o.Z},data:function(){return{error:"",items:[],data:{},loading:!1,fetching:!1,dialog:!1,serverId:0,selected:!1,headers:[{text:"",value:""},{text:"",value:""},{text:"PID",value:"id"},{text:"Name",value:"name"},{text:"Status",value:"status"},{text:"Ports",value:"port"}],error_log:"",output_log:""}},watch:{items:{handler:function(t){for(var e=0;e<t.length;e++)if(t[e].selected)return void(this.selected=!0);this.selected=!1},deep:!0}},created:function(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData:function(){var t=this;this.error="",this.fetching=!0,n.Z.get("servers/"+this.serverId+"/apps").then((function(e){if(console.log(e),e.data.error)return t.error=e.data.error,!1;t.data=e.data.item,t.items=e.data.apps,document.title="Apps | "+t.data.name})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1}))},toggle:function(t){var e=this;this.loading=!0,this.error="";var a=t.active?"start":"stop";n.Z.post("servers/"+this.serverId+"/apps",{name:t.name,action:a}).then((function(t){console.log(t),t.data.success?e.fetchData():e.error=t.data.error})).catch((function(t){console.log(t)})).finally((function(){e.loading=!1}))},deleteApps:function(){var t=this;t.fetching=!0;var e=[];this.items.forEach((function(t){t.selected&&e.push(t.id)})),n.Z.post("servers/"+this.serverId+"/apps",{ids:e}).then((function(){t.fetchData()})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1}))},view:function(t){this.dialog=!0,this.output_log=t.output_log,this.error_log=t.error_log}}},l=i,c=a(1001),d=(0,c.Z)(l,r,s,!1,null,null,null),u=d.exports}}]);
//# sourceMappingURL=659-legacy.a5218249.js.map