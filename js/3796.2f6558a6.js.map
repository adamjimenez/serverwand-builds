{"version":3,"file":"js/3796.2f6558a6.js","mappings":"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","sources":["webpack://ServerWand/./src/views/sites/Create.vue","webpack://ServerWand/./src/views/sites/Create.vue?cddf"],"sourcesContent":["<template>\n  <div>\n    <v-alert v-if=\"error\" type=\"error\" :text=\"error\"></v-alert>\n\n    <Loading :value=\"loading\" />\n\n    <v-card v-if=\"!serverId\" title=\"Site details\">\n      <v-card-text>\n        <v-form v-if=\"!loading\" ref=\"form\" v-model=\"valid\" lazy-validation>\n          <v-text-field\n            :disabled=\"domainId > 0\"\n            v-model=\"data.domain\"\n            :rules=\"domainRules\"\n            label=\"Domain\"\n            required\n            autofocus\n          ></v-text-field>\n\n          <v-select\n            :disabled=\"domainId > 0\"\n            v-model=\"data.server\"\n            :items=\"servers\"\n            label=\"Server\"\n            :rules=\"[(v) => !!v || 'Server is required']\"\n            required\n          ></v-select>\n\n          <v-checkbox\n            v-model=\"data.dns\"\n            label=\"Configure DNS\"\n            :disabled=\"!data.server || dnsProviders[data.server] == ''\"\n          ></v-checkbox>\n\n          <v-btn\n            :disabled=\"!valid\"\n            :loading=\"loading\"\n            color=\"success\"\n            @click=\"save\"\n          >\n            Save\n          </v-btn>\n        </v-form>\n      </v-card-text>\n    </v-card>\n\n    <Site ref=\"Site\" \n      @error=\"err => error = err\"\n    />\n  </div>\n</template>\n\n<script>\nimport api from \"../../services/api\";\nimport Loading from \"../../components/Loading\";\nimport Site from \"../../components/Site\";\n\nexport default {\n  components: {\n    Loading,\n    Site,\n  },\n  data: () => ({\n    loading: false,\n    valid: true,\n    data: {\n      domain: \"\",\n      password: \"\",\n      server: \"\",\n      dns: false,\n    },\n    domainRules: [(v) => !!v || \"Domain is required\"],\n    passwordRules: [],\n    servers: [],\n    dnsProviders: {},\n    details: \"\",\n    serverId: 0,\n    error: \"\",\n    authRequired: false,\n  }),\n\n  created() {\n    document.title = \"Site details\";\n    this.domainId = this.$route.params.id;\n    this.fetchData();\n\n    if (localStorage.dns) {\n      this.data.dns = true;\n    }\n  },\n\n  methods: {\n    fetchData() {\n      this.error = \"\";\n      this.loading = false;\n\n      api\n        .get(\"sites/\" + this.domainId)\n        .then((response) => {\n          console.log(response);\n\n          if (this.domainId) {\n            this.data = response.data.items[0];\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n\n      api\n        .get(\"servers/\")\n        .then((response) => {\n          console.log(response);\n\n          response.data.items.forEach((element) => {\n            this.servers.push({\n              title: element.name,\n              value: element.id,\n            });\n\n            this.dnsProviders[element.id] = element.dns;\n          });\n        })\n        .catch((error) => {\n          console.log(error);\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n    save() {\n      this.error = \"\";\n      this.details = \"\";\n      this.loading = true;\n\n      if (this.data.dns) {\n        localStorage.dns = \"1\";\n      } else {\n        delete localStorage.dns;\n      }\n\n      console.log(arguments);\n\n      if (this.domainId) {\n        api\n          .post(\"sites/\" + this.domainId + \"/update\", this.data)\n          .then((response) => {\n            console.log(response);\n\n            if (response.data.error) {\n              this.error = response.data.error\n              return false\n            }\n\n            this.$router.push(\"/sites/\" + this.domainId + \"/summary\");\n          })\n          .catch((error) => {\n            console.log(error);\n            this.error = error;\n          });\n      } else {\n        this.loading = false;\n        this.$refs.Site.create(this.data);\n      }\n    },\n  },\n\n};\n</script>","import { render } from \"./Create.vue?vue&type=template&id=b46112b8\"\nimport script from \"./Create.vue?vue&type=script&lang=js\"\nexport * from \"./Create.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementBlock","_ctx","error","_createBlock","_component_v_alert","key","type","text","_createCommentVNode","_createVNode","_component_Loading","value","loading","serverId","_component_v_card","title","default","_withCtx","_component_v_card_text","_component_v_form","ref","modelValue","valid","_cache","$event","_component_v_text_field","disabled","domainId","data","domain","rules","domainRules","label","required","autofocus","_component_v_select","server","items","servers","v","_component_v_checkbox","dns","dnsProviders","_component_v_btn","color","onClick","$options","save","_createTextVNode","_","_component_Site","onError","err","components","Loading","Site","password","passwordRules","details","authRequired","created","document","this","$route","params","id","fetchData","localStorage","methods","api","get","then","response","console","log","catch","finally","forEach","element","push","name","arguments","post","$router","$refs","create","__exports__","render"],"sourceRoot":""}