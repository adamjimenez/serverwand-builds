"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[1625],{93992:function(e,r,s){s.d(r,{Z:function(){return d}});var t=s(66252);function a(e,r,s,a,o,n){const l=(0,t.up)("v-icon");return"linode"===s.provider?((0,t.wg)(),(0,t.j4)(l,{key:0},{default:(0,t.w5)((()=>[(0,t.Uk)("fab fa-linode")])),_:1})):"digitalocean"===s.provider?((0,t.wg)(),(0,t.j4)(l,{key:1},{default:(0,t.w5)((()=>[(0,t.Uk)("fab fa-digital-ocean")])),_:1})):((0,t.wg)(),(0,t.j4)(l,{key:2},{default:(0,t.w5)((()=>[(0,t.Uk)("fas fa-server")])),_:1}))}var o={props:{provider:null}},n=s(48118);const l=(0,n.Z)(o,[["render",a]]);var d=l},55386:function(e,r,s){s.d(r,{Z:function(){return v}});var t=s(66252);const a={class:"d-flex align-center justify-end h-100"},o=["innerHTML"],n={key:1},l={key:2};function d(e,r,s,d,i,u){const c=(0,t.up)("v-btn"),h=(0,t.up)("v-card-title"),v=(0,t.up)("v-alert"),f=(0,t.up)("v-select"),m=(0,t.up)("v-card-text"),p=(0,t.up)("v-card"),w=(0,t.up)("v-dialog");return(0,t.wg)(),(0,t.iD)("div",a,[(0,t.Wm)(c,(0,t.dG)({onClick:u.terminal},e.$attrs,{disabled:!e.serverId||i.fetching}),{default:(0,t.w5)((()=>[(0,t.WI)(e.$slots,"default")])),_:3},16,["onClick","disabled"]),(0,t.Wm)(w,{modelValue:i.chooseUser,"onUpdate:modelValue":r[1]||(r[1]=e=>i.chooseUser=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{loading:i.fetching},{default:(0,t.w5)((()=>[(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Open Secure Shell ")])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[i.error?((0,t.wg)(),(0,t.j4)(v,{key:0,color:"error",class:"mb-3"},{default:(0,t.w5)((()=>[(0,t._)("div",{innerHTML:i.error},null,8,o)])),_:1})):(0,t.kq)("",!0),i.users.length?((0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(f,{modelValue:i.ssh_username,"onUpdate:modelValue":r[0]||(r[0]=e=>i.ssh_username=e),items:i.users,label:"User"},null,8,["modelValue","items"]),(0,t.Wm)(c,{disabled:0===i.ssh_username.length,color:"success",onClick:u.saveKeyAndContinue,right:"",class:"ml-3"},{default:(0,t.w5)((()=>[(0,t.Uk)(" Save Key and Continue ")])),_:1},8,["disabled","onClick"])])):i.fetching?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",l," No system users, add one and try again. "))])),_:1})])),_:1},8,["loading"])])),_:1},8,["modelValue"])])}var i=s(1006),u={props:{cmd:null},data(){return{error:"",data:{users:{}},ssh_username:"",users:[],details:"",fetching:!1,chooseUser:!1}},created(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData(){var e=this;this.error="",this.fetching=!0,this.serverId=this.$route.params.id,i.Z.get("servers/"+this.serverId).then((r=>{console.log(r),r.data.error&&(e.error=r.data.error),r.data.item&&(e.data=r.data.item,window.server=e.data)})).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},fetchUsers(){var e=this;this.error="",this.fetching=!0,e.chooseUser=!0,i.Z.get("servers/"+this.serverId+"/systemusers").then((r=>{if(console.log(r),r.data.error)return e.error=r.data.error,!1;r.data.item.users.forEach((r=>{e.users.push({title:r.name,value:r.name})}))})).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},saveKey(e){var r=this;i.Z.post("servers/"+r.serverId+"/systemusers/"+r.ssh_username,{key:e}).then((e=>{console.log(e),e.data.success?r.saveSSHUser():(r.fetching=!1,r.error=e.data.error)})).catch((e=>{r.fetching=!1,console.log(e)}))},saveSSHUser(){var e=this;e.fetching=!0,i.Z.post("servers/"+this.serverId+"/savesshuser",{ssh_username:e.ssh_username}).then((r=>{console.log(r),r.data.success?(e.data.ssh_username=e.ssh_username,e.chooseUser=!1,e.terminal()):e.error=r.data.error})).catch((e=>console.log(e))).finally((()=>{e.fetching=!1}))},saveKeyAndContinue(){var e=this;e.fetching=!0,i.Z.post("https://shiftedit.net/api/prefs").then((r=>{console.log(r),r.data.error?e.error=r.data.error:(console.log(r.data.public_key),e.saveKey(r.data.public_key))})).catch((e=>console.log(e))).finally((()=>{e.fetching=!1}))},terminal(){if(this.data.ssh_username){console.log("open ssh "+this.data.ssh_username);var e="http://shiftedit.net/ssh/?host="+this.data.hostname+"&user="+this.data.ssh_username;this.cmd&&(e+="&cmd="+encodeURIComponent(this.cmd)),window.ssh_path&&(e+="&path="+window.ssh_path),window.open(e)}else this.fetchUsers()}}},c=s(48118);const h=(0,c.Z)(u,[["render",d]]);var v=h},91625:function(e,r,s){s.r(r),s.d(r,{default:function(){return h}});var t=s(66252);const a=["innerHTML"];function o(e,r,s,o,n,l){const d=(0,t.up)("v-alert"),i=(0,t.up)("ServerIcon"),u=(0,t.up)("v-list-item"),c=(0,t.up)("v-col"),h=(0,t.up)("v-icon"),v=(0,t.up)("Terminal"),f=(0,t.up)("v-row"),m=(0,t.up)("v-container"),p=(0,t.up)("v-tab"),w=(0,t.up)("v-tabs"),g=(0,t.up)("router-view");return(0,t.wg)(),(0,t.iD)("div",null,[n.error?((0,t.wg)(),(0,t.j4)(d,{key:0,type:"error"},{default:(0,t.w5)((()=>[(0,t._)("div",{innerHTML:n.error},null,8,a)])),_:1})):(0,t.kq)("",!0),n.fetching?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(m,{key:1,fluid:"",class:"py-1"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{title:n.data.name,subtitle:n.data.hostname},{prepend:(0,t.w5)((()=>[(0,t.Wm)(i,{provider:n.data.provider},null,8,["provider"])])),_:1},8,["title","subtitle"])])),_:1}),(0,t.Wm)(c,{class:"text-right"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{data:n.data,color:"success",icon:"",size:"small"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{icon:"fas fa-terminal"})])),_:1},8,["data"])])),_:1})])),_:1})])),_:1})),(0,t.Wm)(w,{"show-arrows":""},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/summary"},{default:(0,t.w5)((()=>[(0,t.Uk)("Summary")])),_:1},8,["to"]),(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/Files"},{default:(0,t.w5)((()=>[(0,t.Uk)("Files")])),_:1},8,["to"]),(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/services"},{default:(0,t.w5)((()=>[(0,t.Uk)("Services")])),_:1},8,["to"]),(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/cronjobs"},{default:(0,t.w5)((()=>[(0,t.Uk)("Cronjobs")])),_:1},8,["to"]),(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/database"},{default:(0,t.w5)((()=>[(0,t.Uk)("Database")])),_:1},8,["to"]),(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/systemusers"},{default:(0,t.w5)((()=>[(0,t.Uk)("System users")])),_:1},8,["to"]),(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/firewall"},{default:(0,t.w5)((()=>[(0,t.Uk)("Firewall")])),_:1},8,["to"]),(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/mail"},{default:(0,t.w5)((()=>[(0,t.Uk)("Mail")])),_:1},8,["to"]),(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/apps"},{default:(0,t.w5)((()=>[(0,t.Uk)("Apps")])),_:1},8,["to"]),(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/logs"},{default:(0,t.w5)((()=>[(0,t.Uk)("Logs")])),_:1},8,["to"]),(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/backups"},{default:(0,t.w5)((()=>[(0,t.Uk)("Cloud backups")])),_:1},8,["to"]),(0,t.Wm)(p,{to:"/servers/"+e.serverId+"/settings"},{default:(0,t.w5)((()=>[(0,t.Uk)("Settings")])),_:1},8,["to"])])),_:1}),(0,t.Wm)(g)])}var n=s(1006),l=s(93992),d=s(55386),i={components:{ServerIcon:l.Z,Terminal:d.Z},data(){return{error:"",data:{users:{}},users:[],details:"",fetching:!1}},created(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData(){var e=this;this.error="",this.serverId=this.$route.params.id,n.Z.get("servers/"+this.serverId).then((r=>{console.log(r),r.data.error&&(e.error=r.data.error),r.data.item&&(e.data=r.data.item,window.server=e.data)})).catch((e=>console.log(e))).finally((()=>e.fetching=!1))}}},u=s(48118);const c=(0,u.Z)(i,[["render",o]]);var h=c}}]);
//# sourceMappingURL=1625.282a8444.js.map