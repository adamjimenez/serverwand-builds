"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[3760],{93992:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(66252);function s(e,t,r,s,a,o){var u=(0,n.up)("v-icon");return"linode"===r.provider?((0,n.wg)(),(0,n.j4)(u,{key:0},{default:(0,n.w5)((function(){return[(0,n.Uk)("fab fa-linode")]})),_:1})):"digitalocean"===r.provider?((0,n.wg)(),(0,n.j4)(u,{key:1},{default:(0,n.w5)((function(){return[(0,n.Uk)("fab fa-digital-ocean")]})),_:1})):((0,n.wg)(),(0,n.j4)(u,{key:2},{default:(0,n.w5)((function(){return[(0,n.Uk)("fas fa-server")]})),_:1}))}var a={props:{provider:null}},o=r(48118);const u=(0,o.Z)(a,[["render",s]]);var i=u},57846:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(66252),s={style:{height:"100%",display:"flex","align-items":"center","justify-content":"end"}},a=["innerHTML"],o={key:1},u={key:2};function i(e,t,r,i,c,l){var d=(0,n.up)("v-btn"),f=(0,n.up)("v-card-title"),h=(0,n.up)("v-alert"),v=(0,n.up)("v-select"),m=(0,n.up)("v-card-text"),p=(0,n.up)("v-card"),w=(0,n.up)("v-dialog");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(d,(0,n.dG)({onClick:l.terminal},e.$attrs,{disabled:!e.serverId||c.fetching}),{default:(0,n.w5)((function(){return[(0,n.WI)(e.$slots,"default")]})),_:3},16,["onClick","disabled"]),(0,n.Wm)(w,{modelValue:c.chooseUser,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.chooseUser=e})},{default:(0,n.w5)((function(){return[(0,n.Wm)(p,{loading:c.fetching},{default:(0,n.w5)((function(){return[(0,n.Wm)(f,null,{default:(0,n.w5)((function(){return[(0,n.Uk)(" Open Secure Shell ")]})),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((function(){return[c.error?((0,n.wg)(),(0,n.j4)(h,{key:0,color:"error",class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n._)("div",{innerHTML:c.error},null,8,a)]})),_:1})):(0,n.kq)("",!0),c.users.length?((0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(v,{modelValue:c.ssh_username,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.ssh_username=e}),items:c.users,label:"User"},null,8,["modelValue","items"]),(0,n.Wm)(d,{disabled:0===c.ssh_username.length,color:"success",onClick:l.saveKeyAndContinue,right:"",class:"ml-3"},{default:(0,n.w5)((function(){return[(0,n.Uk)(" Save Key and Continue ")]})),_:1},8,["disabled","onClick"])])):c.fetching?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",u," No system users, add one and try again. "))]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])}r(41539),r(54747),r(68309);var c=r(1006),l={props:{cmd:null},data:function(){return{error:"",data:{users:{}},ssh_username:"",users:[],details:"",fetching:!1,chooseUser:!1}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var e=this;this.error="",this.fetching=!0,this.serverId=this.$route.params.id,c.Z.get("servers/"+this.serverId).then((function(t){console.log(t),t.data.error&&(e.error=t.data.error),t.data.item&&(e.data=t.data.item,window.server=e.data)})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))},fetchUsers:function(){var e=this;this.error="",this.fetching=!0,e.chooseUser=!0,c.Z.get("servers/"+this.serverId+"/systemusers").then((function(t){if(console.log(t),t.data.error)return e.error=t.data.error,!1;t.data.item.users.forEach((function(t){e.users.push({title:t.name,value:t.name})}))})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))},saveKey:function(e){var t=this;c.Z.post("servers/"+t.serverId+"/systemusers/"+t.ssh_username,{key:e}).then((function(e){console.log(e),e.data.success?t.saveSSHUser():(t.fetching=!1,t.error=e.data.error)})).catch((function(e){t.fetching=!1,console.log(e)}))},saveSSHUser:function(){var e=this;e.fetching=!0,c.Z.post("servers/"+this.serverId+"/savesshuser",{ssh_username:e.ssh_username}).then((function(t){console.log(t),t.data.success?(e.data.ssh_username=e.ssh_username,e.chooseUser=!1,e.terminal()):e.error=t.data.error})).catch((function(e){return console.log(e)})).finally((function(){e.fetching=!1}))},saveKeyAndContinue:function(){var e=this;e.fetching=!0,c.Z.post("https://shiftedit.net/api/prefs").then((function(t){console.log(t),t.data.error?e.error=t.data.error:(console.log(t.data.public_key),e.saveKey(t.data.public_key))})).catch((function(e){return console.log(e)})).finally((function(){e.fetching=!1}))},terminal:function(){if(this.data.ssh_username){console.log("open ssh "+this.data.ssh_username);var e="http://shiftedit.net/ssh/?host="+this.data.hostname+"&user="+this.data.ssh_username;this.cmd&&(e+="&cmd="+encodeURIComponent(this.cmd)),window.ssh_path&&(e+="&path="+window.ssh_path),window.open(e)}else this.fetchUsers()}}},d=r(48118);const f=(0,d.Z)(l,[["render",i]]);var h=f},53760:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});r(68309);var n=r(66252),s=["innerHTML"];function a(e,t,r,a,o,u){var i=(0,n.up)("v-alert"),c=(0,n.up)("ServerIcon"),l=(0,n.up)("v-list-item"),d=(0,n.up)("v-col"),f=(0,n.up)("v-icon"),h=(0,n.up)("Terminal"),v=(0,n.up)("v-row"),m=(0,n.up)("v-container"),p=(0,n.up)("v-tab"),w=(0,n.up)("v-tabs"),g=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",null,[o.error?((0,n.wg)(),(0,n.j4)(i,{key:0,type:"error"},{default:(0,n.w5)((function(){return[(0,n._)("div",{innerHTML:o.error},null,8,s)]})),_:1})):(0,n.kq)("",!0),o.fetching?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(m,{key:1,fluid:"",class:"py-1"},{default:(0,n.w5)((function(){return[(0,n.Wm)(v,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(d,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(l,{title:o.data.name,subtitle:o.data.hostname},{prepend:(0,n.w5)((function(){return[(0,n.Wm)(c,{provider:o.data.provider},null,8,["provider"])]})),_:1},8,["title","subtitle"])]})),_:1}),(0,n.Wm)(d,{class:"text-right"},{default:(0,n.w5)((function(){return[(0,n.Wm)(h,{data:o.data,color:"success"},{default:(0,n.w5)((function(){return[(0,n.Wm)(f,{small:""},{default:(0,n.w5)((function(){return[(0,n.Uk)("fas fa-terminal")]})),_:1})]})),_:1},8,["data"])]})),_:1})]})),_:1})]})),_:1})),(0,n.Wm)(w,{"show-arrows":""},{default:(0,n.w5)((function(){return[(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/summary"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Summary")]})),_:1},8,["to"]),(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/Files"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Files")]})),_:1},8,["to"]),(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/services"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Services")]})),_:1},8,["to"]),(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/cronjobs"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Cronjobs")]})),_:1},8,["to"]),(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/database"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Database")]})),_:1},8,["to"]),(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/systemusers"},{default:(0,n.w5)((function(){return[(0,n.Uk)("System users")]})),_:1},8,["to"]),(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/firewall"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Firewall")]})),_:1},8,["to"]),(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/mail"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Mail")]})),_:1},8,["to"]),(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/apps"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Apps")]})),_:1},8,["to"]),(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/logs"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Logs")]})),_:1},8,["to"]),(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/backups"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Cloud backups")]})),_:1},8,["to"]),(0,n.Wm)(p,{to:"/servers/"+e.serverId+"/settings"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Settings")]})),_:1},8,["to"])]})),_:1}),(0,n.Wm)(g)])}r(41539);var o=r(1006),u=r(93992),i=r(57846),c={components:{ServerIcon:u.Z,Terminal:i.Z},data:function(){return{error:"",data:{users:{}},users:[],details:"",fetching:!1}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var e=this;this.error="",this.serverId=this.$route.params.id,o.Z.get("servers/"+this.serverId).then((function(t){console.log(t),t.data.error&&(e.error=t.data.error),t.data.item&&(e.data=t.data.item,window.server=e.data)})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))}}},l=r(48118);const d=(0,l.Z)(c,[["render",a]]);var f=d}}]);
//# sourceMappingURL=3760-legacy.0ed1faa3.js.map