"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[446],{20446:function(t,e,r){r.r(e),r.d(e,{default:function(){return F}});var a=r(20641),o=r(53751),n=r(90033);function i(t,e,r,i,s,l){const u=(0,a.g2)("v-app-bar-nav-icon"),c=(0,a.g2)("v-icon"),d=(0,a.g2)("v-list-item"),f=(0,a.g2)("router-link"),p=(0,a.g2)("Search"),h=(0,a.g2)("UserMenu"),v=(0,a.g2)("v-app-bar"),m=(0,a.g2)("v-list"),g=(0,a.g2)("v-navigation-drawer"),b=(0,a.g2)("router-view"),k=(0,a.g2)("v-container"),y=(0,a.g2)("v-main"),w=(0,a.g2)("v-footer"),x=(0,a.g2)("v-card-title"),F=(0,a.g2)("v-text-field"),_=(0,a.g2)("v-card-text"),I=(0,a.g2)("v-spacer"),S=(0,a.g2)("v-btn"),O=(0,a.g2)("v-card-actions"),P=(0,a.g2)("v-card"),A=(0,a.g2)("v-dialog"),E=(0,a.g2)("v-app");return(0,a.uX)(),(0,a.Wv)(E,null,{default:(0,a.k6)((()=>[(0,a.bF)(v,{app:"",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(u,{onClick:e[0]||(e[0]=(0,o.D$)((t=>s.rail=!s.rail),["stop"])),size:"small"}),s.display.mobile?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(f,{key:0,to:"/servers",class:"text-decoration-none text-primary"},{default:(0,a.k6)((()=>[(0,a.bF)(d,null,{prepend:(0,a.k6)((()=>[(0,a.bF)(c,{class:"mr-0 pl-3",size:"large",color:"primary"},{default:(0,a.k6)((()=>e[10]||(e[10]=[(0,a.eW)("fas fa-magic")]))),_:1})])),title:(0,a.k6)((()=>e[11]||(e[11]=[(0,a.Lk)("h2",null,"ServerWand",-1)]))),_:1})])),_:1})),(0,a.bF)(p),(0,a.bF)(h)])),_:1}),(0,a.bF)(g,{"expand-on-hover":!s.display.mobile,"disable-route-watcher":"",rail:s.rail,permanent:""},{default:(0,a.k6)((()=>[(0,a.bF)(m,{nav:""},{default:(0,a.k6)((()=>[(0,a.bF)(d,{"base-color":"primary",variant:"flat",to:s.createLink},{prepend:(0,a.k6)((()=>[(0,a.bF)(c,{size:"small",style:{width:"24px","text-align":"center"}},{default:(0,a.k6)((()=>e[12]||(e[12]=[(0,a.eW)("mdi:mdi-plus")]))),_:1})])),default:(0,a.k6)((()=>[(0,a.eW)(" "+(0,n.v_)(s.createLabel),1)])),_:1},8,["to"]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.filtered,(t=>((0,a.uX)(),(0,a.Wv)(d,{key:t.title,to:t.to,active:l.isActive(t.to),title:t.title},{prepend:(0,a.k6)((()=>[(0,a.bF)(c,{size:"small",style:{width:"24px","text-align":"center"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(t.icon),1)])),_:2},1024)])),_:2},1032,["to","active","title"])))),128))])),_:1})])),_:1},8,["expand-on-hover","rail"]),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(k,{fluid:""},{default:(0,a.k6)((()=>[(0,a.bF)(b,{restricted:s.restricted},null,8,["restricted"])])),_:1})])),_:1}),(0,a.bF)(w,{app:""}),(0,a.bF)(A,{modelValue:s.masterPasswordDialog,"onUpdate:modelValue":e[4]||(e[4]=t=>s.masterPasswordDialog=t),persistent:"","max-width":"600px"},{default:(0,a.k6)((()=>[(0,a.bF)(P,null,{default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>e[13]||(e[13]=[(0,a.Lk)("span",{class:"headline"},"Master password required",-1)]))),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:s.masterPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>s.masterPassword=t),type:"password",label:"Master password",required:"","browser-autocomplete":"new-password"},null,8,["modelValue"])])),_:1}),(0,a.bF)(O,null,{default:(0,a.k6)((()=>[(0,a.bF)(I),(0,a.bF)(S,{color:"blue darken-1",flat:"",onClick:e[2]||(e[2]=t=>s.masterPasswordDialog=!1)},{default:(0,a.k6)((()=>e[14]||(e[14]=[(0,a.eW)("Close")]))),_:1}),(0,a.bF)(S,{color:"blue darken-1",flat:"",onClick:e[3]||(e[3]=t=>l.submitMasterPassword())},{default:(0,a.k6)((()=>e[15]||(e[15]=[(0,a.eW)("OK")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(A,{modelValue:s.resetKeyDialog,"onUpdate:modelValue":e[9]||(e[9]=t=>s.resetKeyDialog=t),persistent:"","max-width":"600px"},{default:(0,a.k6)((()=>[(0,a.bF)(P,null,{default:(0,a.k6)((()=>[(0,a.bF)(x,null,{default:(0,a.k6)((()=>e[16]||(e[16]=[(0,a.Lk)("span",{class:"headline"},"Reset key",-1)]))),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:s.data.user,"onUpdate:modelValue":e[5]||(e[5]=t=>s.data.user=t),label:"Username",required:""},null,8,["modelValue"]),(0,a.bF)(F,{type:"password",modelValue:s.data.pass,"onUpdate:modelValue":e[6]||(e[6]=t=>s.data.pass=t),label:"Password",required:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(O,null,{default:(0,a.k6)((()=>[(0,a.bF)(I),(0,a.bF)(S,{color:"blue darken-1",flat:"",onClick:e[7]||(e[7]=t=>s.resetKeyDialog=!1)},{default:(0,a.k6)((()=>e[17]||(e[17]=[(0,a.eW)("Close")]))),_:1}),(0,a.bF)(S,{color:"blue darken-1",flat:"",onClick:e[8]||(e[8]=e=>t.submitResetKey())},{default:(0,a.k6)((()=>e[18]||(e[18]=[(0,a.eW)("OK")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}r(98992),r(54520);const s={class:"flex-1-1 mx-2"};function l(t,e,r,o,n,i){const l=(0,a.g2)("v-list-item"),u=(0,a.g2)("v-autocomplete");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(u,{modelValue:t.model,"onUpdate:modelValue":[e[0]||(e[0]=e=>t.model=e),i.afterselection],items:t.items,label:"Search",placeholder:"Search",ref:"autocomplete","hide-details":"","prepend-inner-icon":"mdi:mdi-magnify","single-line":"",rounded:"",variant:"solo-filled"},{item:(0,a.k6)((({props:t,item:e})=>[(0,a.bF)(l,(0,a.v6)(t,{"prepend-icon":e?.raw?.avatar,title:e?.raw?.title,subtitle:e?.raw?.subtitle}),null,16,["prepend-icon","title","subtitle"])])),_:1},8,["modelValue","items","onUpdate:modelValue"])])}r(44114),r(3949);var u=r(74300),c={data:()=>({model:null,items:[],servers:[]}),created(){this.fetchData()},methods:{fetchData(){this.error=this.post=null,this.loading=!0,u.A.get("servers/").then((t=>{console.log(t),t.data.items.forEach((t=>{let e="fas fa-server";switch(t.provider){case"linode":e="fab fa-linode";break;case"digitalocean":e="fab fa-digital-ocean";break}this.items.push({title:t.name,subtitle:t.hostname,value:"/servers/"+t.id+"/summary",avatar:e}),this.servers[t.id]=t.name}))})).catch((t=>console.log(t))).finally((()=>{this.loading=!1})),u.A.get("sites/").then((t=>{console.log(t),t.data.items.forEach((t=>{let e="fas fa-sitemap";switch(t.app){case"wordpress":e="fab fa-wordpress";break;case"git":e="fab fa-git";break;case"node":e="fab fa-node-js";break;case"joomla":e="fab fa-joomla";break;case"drupal":e="fab fa-drupal";break;case"magento":e="fab fa-magento";break;case"roundcube":e="fas fa-envelope";break;case"shiftlib":e="fas fa-user-edit";break}this.items.push({title:t.domain,subtitle:this.servers[t.server],value:"/sites/"+t.id+"/summary",avatar:e})}))})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},afterselection(){this.$nextTick((()=>{this.$router.push(this.model),this.model=null,this.$refs.autocomplete.blur()}))}}},d=r(66262);const f=(0,d.A)(c,[["render",l]]);var p=f;function h(t,e,r,o,n,i){const s=(0,a.g2)("v-btn"),l=(0,a.g2)("v-list-item"),u=(0,a.g2)("v-list"),c=(0,a.g2)("v-menu");return(0,a.uX)(),(0,a.Wv)(c,{"offset-y":"",left:""},{activator:(0,a.k6)((({props:t})=>[(0,a.bF)(s,(0,a.v6)({icon:"mdi:mdi-account-circle"},t),null,16)])),default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.items,((t,e)=>((0,a.uX)(),(0,a.Wv)(l,{key:e,onClick:e=>i.goto(t.to),title:t.value,"prepend-icon":t.icon},null,8,["onClick","title","prepend-icon"])))),128))])),_:1})])),_:1})}var v={data:()=>({items:[{value:"Settings",to:"/settings/profile",icon:"fas fa-wrench"},{value:"Log out",to:"/auth/logout",icon:"fas fa-sign-out-alt"}]}),methods:{goto(t){this.$router.push(t)}}};const m=(0,d.A)(v,[["render",h]]);var g=m,b=r(72505),k=r.n(b),y=r(71312),w={components:{Search:p,UserMenu:g},data(){return{serverId:0,data:{},dark:!1,items:[{title:"Servers",to:"/servers",restricted:!0,icon:"fas fa-server"},{title:"Sites",to:"/sites",restricted:!1,icon:"fas fa-sitemap"},{title:"Domains",to:"/domains",restricted:!1,icon:"fas fa-globe"},{title:"Teams",to:"/teams",restricted:!0,icon:"fas fa-users"},{title:"Users",to:"/users",restricted:!0,icon:"fas fa-user"}],filtered:[],resetKeyDialog:!1,masterPasswordDialog:!1,masterPassword:"",restricted:!1,rail:!0,display:{},createLink:"",createLabel:""}},created(){this.display=this.$vuetify.display,k().interceptors.response.use((t=>!!t&&("master password"!=t.data.error?"missing key"==t.data.error?(this.resetKeyDialog=!0,this.serverId=t.data.server,t):t:void(this.masterPasswordDialog=!0))),(t=>{const e=t.config;return!(!t.response||401===t.response.status&&!e._retry)&&Promise.reject(t)})),this.fetchData()},mounted(){0!==parseInt(localStorage.dark)&&(this.dark=!0,this.$vuetify.theme.dark=!0),"false"===localStorage.rail&&(this.rail=!1),this.updateCreateButton()},watch:{dark(t){t?(localStorage.dark=1,this.$vuetify.theme.dark=!0):(localStorage.dark=0,this.$vuetify.theme.dark=!1)},data(){this.restricted="0"!==this.data.user,this.filtered=this.items.filter((t=>!this.restricted||!t.restricted))},rail(t){localStorage.rail=t},"$route.path":function(){this.updateCreateButton()}},methods:{fetchData(){this.error="",this.loading=!0,u.A.get("settings/profile").then((t=>{console.log(t),this.data=t.data.profile})).catch((t=>{console.log(t)})).finally((()=>{this.loading=!1}))},submitMasterPassword(){u.A.post("auth/masterpassword",{masterPassword:(0,y.sha256)(this.masterPassword)}).then((t=>{console.log(t),t.data.success?this.$router.go():this.error=t.data.error})).catch((t=>{console.log(t)})).finally((()=>{this.dialog=!1,this.loading=!1}))},resetKey(){u.A.post("servers/"+this.serverId+"/resetkey",{username:this.data.user,password:this.data.pass}).then((t=>{console.log(t),t.data.success?this.$router.go():this.error=t.data.error})).catch((t=>{console.log(t)})).finally((()=>{this.resetKeyDialog=!1,this.loading=!1}))},isActive(t){return location.pathname.startsWith(t)},updateCreateButton(){let t=this.$route.path.split("/");t.shift();let e=t[0];["servers","sites","domains","teams","users"].includes(t[0])||(e="servers"),this.createLink="/"+e+"/create";let r="New ";r+=e.substr(0,e.length-1),this.createLabel=r}}};const x=(0,d.A)(w,[["render",i]]);var F=x},90679:function(t,e,r){var a=r(1625),o=TypeError;t.exports=function(t,e){if(a(e,t))return t;throw new o("Incorrect invocation")}},96319:function(t,e,r){var a=r(28551),o=r(9539);t.exports=function(t,e,r,n){try{return n?e(a(r)[0],r[1]):e(r)}catch(i){o(t,"throw",i)}}},36955:function(t,e,r){var a=r(92140),o=r(94901),n=r(22195),i=r(78227),s=i("toStringTag"),l=Object,u="Arguments"===n(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(r){}};t.exports=a?n:function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=c(e=l(t),s))?r:u?n(e):"Object"===(a=n(e))&&o(e.callee)?"Arguments":a}},12211:function(t,e,r){var a=r(79039);t.exports=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},62529:function(t){t.exports=function(t,e){return{value:t,done:e}}},97040:function(t,e,r){var a=r(43724),o=r(24913),n=r(6980);t.exports=function(t,e,r){a?o.f(t,e,n(0,r)):t[e]=r}},62106:function(t,e,r){var a=r(50283),o=r(24913);t.exports=function(t,e,r){return r.get&&a(r.get,e,{getter:!0}),r.set&&a(r.set,e,{setter:!0}),o.f(t,e,r)}},56279:function(t,e,r){var a=r(36840);t.exports=function(t,e,r){for(var o in e)a(t,o,e[o],r);return t}},76080:function(t,e,r){var a=r(27476),o=r(79306),n=r(40616),i=a(a.bind);t.exports=function(t,e){return o(t),void 0===e?t:n?i(t,e):function(){return t.apply(e,arguments)}}},27476:function(t,e,r){var a=r(22195),o=r(79504);t.exports=function(t){if("Function"===a(t))return o(t)}},1767:function(t){t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},50851:function(t,e,r){var a=r(36955),o=r(55966),n=r(64117),i=r(26269),s=r(78227),l=s("iterator");t.exports=function(t){if(!n(t))return o(t,l)||o(t,"@@iterator")||i[a(t)]}},70081:function(t,e,r){var a=r(69565),o=r(79306),n=r(28551),i=r(16823),s=r(50851),l=TypeError;t.exports=function(t,e){var r=arguments.length<2?s(t):e;if(o(r))return n(a(r,t));throw new l(i(t)+" is not iterable")}},20397:function(t,e,r){var a=r(97751);t.exports=a("document","documentElement")},44209:function(t,e,r){var a=r(78227),o=r(26269),n=a("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||i[n]===t)}},72652:function(t,e,r){var a=r(76080),o=r(69565),n=r(28551),i=r(16823),s=r(44209),l=r(26198),u=r(1625),c=r(70081),d=r(50851),f=r(9539),p=TypeError,h=function(t,e){this.stopped=t,this.result=e},v=h.prototype;t.exports=function(t,e,r){var m,g,b,k,y,w,x,F=r&&r.that,_=!(!r||!r.AS_ENTRIES),I=!(!r||!r.IS_RECORD),S=!(!r||!r.IS_ITERATOR),O=!(!r||!r.INTERRUPTED),P=a(e,F),A=function(t){return m&&f(m,"normal",t),new h(!0,t)},E=function(t){return _?(n(t),O?P(t[0],t[1],A):P(t[0],t[1])):O?P(t,A):P(t)};if(I)m=t.iterator;else if(S)m=t;else{if(g=d(t),!g)throw new p(i(t)+" is not iterable");if(s(g)){for(b=0,k=l(t);k>b;b++)if(y=E(t[b]),y&&u(v,y))return y;return new h(!1)}m=c(t,g)}w=I?t.next:m.next;while(!(x=o(w,m)).done){try{y=E(x.value)}catch(C){f(m,"throw",C)}if("object"==typeof y&&y&&u(v,y))return y}return new h(!1)}},9539:function(t,e,r){var a=r(69565),o=r(28551),n=r(55966);t.exports=function(t,e,r){var i,s;o(t);try{if(i=n(t,"return"),!i){if("throw"===e)throw r;return r}i=a(i,t)}catch(l){s=!0,i=l}if("throw"===e)throw r;if(s)throw i;return o(i),r}},19462:function(t,e,r){var a=r(69565),o=r(2360),n=r(66699),i=r(56279),s=r(78227),l=r(91181),u=r(55966),c=r(57657).IteratorPrototype,d=r(62529),f=r(9539),p=s("toStringTag"),h="IteratorHelper",v="WrapForValidIterator",m=l.set,g=function(t){var e=l.getterFor(t?v:h);return i(o(c),{next:function(){var r=e(this);if(t)return r.nextHandler();try{var a=r.done?void 0:r.nextHandler();return d(a,r.done)}catch(o){throw r.done=!0,o}},return:function(){var r=e(this),o=r.iterator;if(r.done=!0,t){var n=u(o,"return");return n?a(n,o):d(void 0,!0)}if(r.inner)try{f(r.inner.iterator,"normal")}catch(i){return f(o,"throw",i)}return o&&f(o,"normal"),d(void 0,!0)}})},b=g(!0),k=g(!1);n(k,p,"Iterator Helper"),t.exports=function(t,e){var r=function(r,a){a?(a.iterator=r.iterator,a.next=r.next):a=r,a.type=e?v:h,a.nextHandler=t,a.counter=0,a.done=!1,m(this,a)};return r.prototype=e?b:k,r}},57657:function(t,e,r){var a,o,n,i=r(79039),s=r(94901),l=r(20034),u=r(2360),c=r(42787),d=r(36840),f=r(78227),p=r(96395),h=f("iterator"),v=!1;[].keys&&(n=[].keys(),"next"in n?(o=c(c(n)),o!==Object.prototype&&(a=o)):v=!0);var m=!l(a)||i((function(){var t={};return a[h].call(t)!==t}));m?a={}:p&&(a=u(a)),s(a[h])||d(a,h,(function(){return this})),t.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:v}},26269:function(t){t.exports={}},2360:function(t,e,r){var a,o=r(28551),n=r(96801),i=r(88727),s=r(30421),l=r(20397),u=r(4055),c=r(66119),d=">",f="<",p="prototype",h="script",v=c("IE_PROTO"),m=function(){},g=function(t){return f+h+d+t+f+"/"+h+d},b=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},k=function(){var t,e=u("iframe"),r="java"+h+":";return e.style.display="none",l.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(g("document.F=Object")),t.close(),t.F},y=function(){try{a=new ActiveXObject("htmlfile")}catch(e){}y="undefined"!=typeof document?document.domain&&a?b(a):k():b(a);var t=i.length;while(t--)delete y[p][i[t]];return y()};s[v]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(m[p]=o(t),r=new m,m[p]=null,r[v]=t):r=y(),void 0===e?r:n.f(r,e)}},96801:function(t,e,r){var a=r(43724),o=r(48686),n=r(24913),i=r(28551),s=r(25397),l=r(71072);e.f=a&&!o?Object.defineProperties:function(t,e){i(t);var r,a=s(e),o=l(e),u=o.length,c=0;while(u>c)n.f(t,r=o[c++],a[r]);return t}},42787:function(t,e,r){var a=r(39297),o=r(94901),n=r(48981),i=r(66119),s=r(12211),l=i("IE_PROTO"),u=Object,c=u.prototype;t.exports=s?u.getPrototypeOf:function(t){var e=n(t);if(a(e,l))return e[l];var r=e.constructor;return o(r)&&e instanceof r?r.prototype:e instanceof u?c:null}},71072:function(t,e,r){var a=r(61828),o=r(88727);t.exports=Object.keys||function(t){return a(t,o)}},92140:function(t,e,r){var a=r(78227),o=a("toStringTag"),n={};n[o]="z",t.exports="[object z]"===String(n)},18111:function(t,e,r){var a=r(46518),o=r(44576),n=r(90679),i=r(28551),s=r(94901),l=r(42787),u=r(62106),c=r(97040),d=r(79039),f=r(39297),p=r(78227),h=r(57657).IteratorPrototype,v=r(43724),m=r(96395),g="constructor",b="Iterator",k=p("toStringTag"),y=TypeError,w=o[b],x=m||!s(w)||w.prototype!==h||!d((function(){w({})})),F=function(){if(n(this,h),l(this)===h)throw new y("Abstract class Iterator not directly constructable")},_=function(t,e){v?u(h,t,{configurable:!0,get:function(){return e},set:function(e){if(i(this),this===h)throw new y("You can't redefine this property");f(this,t)?this[t]=e:c(this,t,e)}}):h[t]=e};f(h,k)||_(k,b),!x&&f(h,g)&&h[g]!==Object||_(g,F),F.prototype=h,a({global:!0,constructor:!0,forced:x},{Iterator:F})},22489:function(t,e,r){var a=r(46518),o=r(69565),n=r(79306),i=r(28551),s=r(1767),l=r(19462),u=r(96319),c=r(96395),d=l((function(){var t,e,r,a=this.iterator,n=this.predicate,s=this.next;while(1){if(t=i(o(s,a)),e=this.done=!!t.done,e)return;if(r=t.value,u(a,n,[r,this.counter++],!0))return r}}));a({target:"Iterator",proto:!0,real:!0,forced:c},{filter:function(t){return i(this),n(t),new d(s(this),{predicate:t})}})},7588:function(t,e,r){var a=r(46518),o=r(72652),n=r(79306),i=r(28551),s=r(1767);a({target:"Iterator",proto:!0,real:!0},{forEach:function(t){i(this),n(t);var e=s(this),r=0;o(e,(function(e){t(e,r++)}),{IS_RECORD:!0})}})},98992:function(t,e,r){r(18111)},54520:function(t,e,r){r(22489)},3949:function(t,e,r){r(7588)}}]);
//# sourceMappingURL=446.2a75e1a5.js.map