"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[7075],{27075:function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var r=n(20641),i=n(90033);function a(e,t,n,a,o,l){var u=(0,r.g2)("v-alert"),c=(0,r.g2)("v-btn"),s=(0,r.g2)("v-tooltip"),d=(0,r.g2)("v-data-table"),f=(0,r.g2)("v-card-text"),v=(0,r.g2)("v-card"),h=(0,r.g2)("v-spacer"),g=(0,r.g2)("v-switch"),p=(0,r.g2)("v-card-actions");return(0,r.uX)(),(0,r.CE)("div",null,[o.error?((0,r.uX)(),(0,r.Wv)(u,{key:0,type:"error",text:o.error},null,8,["text"])):(0,r.Q3)("",!0),(0,r.bF)(v,{loading:o.fetching},{default:(0,r.k6)((function(){return[o.items.length?((0,r.uX)(),(0,r.Wv)(d,{key:0,modelValue:o.selected,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.selected=e}),headers:o.headers,items:o.items,"items-per-page":100,"item-value":"ip","show-select":"","mobile-breakpoint":"0",hover:"","row-props":l.rowProps,"items-per-page-text":"","fixed-header":"",style:{height:"calc(100vh - 260px)",overflow:"auto"}},{"item.ip":(0,r.k6)((function(e){var t,n,a,o=e.item;return[(0,r.Lk)("span",null,[(0,r.bF)(s,{text:(null===(t=o.ip_data)||void 0===t?void 0:t.org)+", "+(null===(n=o.ip_data)||void 0===n?void 0:n.city)+", "+(null===(a=o.ip_data)||void 0===a?void 0:a.country)},{activator:(0,r.k6)((function(e){var t,n=e.props;return[(0,r.bF)(c,(0,r.v6)(n,{class:"fi fi-"+(null===o||void 0===o||null===(t=o.ip_data)||void 0===t||null===(t=t.country)||void 0===t?void 0:t.toLowerCase())+" fis",size:"x-small"}),null,16,["class"])]})),_:2},1032,["text"]),(0,r.eW)(" "+(0,i.v_)(o.ip),1)])]})),_:1},8,["modelValue","headers","items","row-props"])):((0,r.uX)(),(0,r.Wv)(f,{key:1},{default:(0,r.k6)((function(){return t[4]||(t[4]=[(0,r.eW)(" Empty ")])})),_:1}))]})),_:1},8,["loading"]),(0,r.bF)(v,null,{default:(0,r.k6)((function(){return[(0,r.bF)(p,null,{default:(0,r.k6)((function(){return[(0,r.bF)(c,{onClick:t[1]||(t[1]=function(e){return l.unban()}),disabled:0===o.selected.length,loading:"unban"===o.loading},{default:(0,r.k6)((function(){return t[5]||(t[5]=[(0,r.eW)(" Unban ")])})),_:1},8,["disabled","loading"]),(0,r.bF)(h),(0,r.bF)(g,{modelValue:o.active,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.active=e}),label:"Active",onChange:t[3]||(t[3]=function(e){return l.toggle()}),"hide-details":"",color:"primary",loading:"toggle"===o.loading},null,8,["modelValue","loading"])]})),_:1})]})),_:1})])}n(50113),n(44114),n(62010),n(26099),n(98992),n(72577),n(3949),n(23500);var o=n(74300),l={data:function(){return{error:"",items:[],data:{},loading:null,fetching:!1,serverId:0,selected:[],headers:[{title:"",key:""},{title:"IP",key:"ip"},{title:"Jail",key:"jail"}],active:!1}},created:function(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData:function(){var e=this;this.error="",this.fetching=!0,o.A.get("servers/"+this.serverId+"/banned").then((function(t){console.log(t),e.active=t.data.active,e.items=t.data.items,document.title="Banned | "+t.data.item.name})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))},toggle:function(){var e=this;this.loading="toggle",this.error="",o.A.post("servers/"+this.serverId+"/services",{name:"fail2ban",start:this.active}).then((function(t){console.log(t),t.data.success?e.fetchData():e.error=t.data.error})).catch((function(e){console.log(e)})).finally((function(){e.loading=null}))},unban:function(){var e=this,t=[];this.selected.forEach((function(e){t.push(e)})),this.loading="unban",o.A.post("servers/"+this.serverId+"/banned",{items:t}).then((function(){return e.fetchData()})).catch((function(e){return console.log(e)})).finally((function(){return e.loading=null}))},handleComplete:function(e){this.error=e,this.fetchData()},rowProps:function(e){if(this.selected.find((function(t){return t===e.item.ip})))return{class:"bg-primary"}}}},u=n(66262);const c=(0,u.A)(l,[["render",a]]);var s=c},50113:function(e,t,n){var r=n(46518),i=n(59213).find,a=n(6469),o="find",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},20116:function(e,t,n){var r=n(46518),i=n(72652),a=n(79306),o=n(28551),l=n(1767);r({target:"Iterator",proto:!0,real:!0},{find:function(e){o(this),a(e);var t=l(this),n=0;return i(t,(function(t,r){if(e(t,n++))return r(t)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},72577:function(e,t,n){n(20116)}}]);
//# sourceMappingURL=7075-legacy.2fccb777.js.map