"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[3264],{90947:function(t,e,n){n.d(e,{Z:function(){return s}});var a=n(66252),r=n(3577),i=n(49963);function o(t,e,n,o,u,l){var d=(0,a.up)("v-toolbar-title"),s=(0,a.up)("v-toolbar"),c=(0,a.up)("v-card-text"),f=(0,a.up)("v-spacer"),m=(0,a.up)("v-btn"),h=(0,a.up)("v-card-actions"),w=(0,a.up)("v-card"),g=(0,a.up)("v-dialog");return(0,a.wg)(),(0,a.j4)(g,{modelValue:t.dialog,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.dialog=e}),"max-width":t.options.width,style:(0,r.j5)({zIndex:t.options.zIndex}),onKeydown:(0,i.D2)(l.cancel,["esc"]),persistent:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(w,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{dark:"",color:t.options.color,dense:"",flat:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{class:"text-body-2 font-weight-bold grey--text"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,r.zw)(t.title),1)]})),_:1})]})),_:1},8,["color"]),(0,a.wy)((0,a.Wm)(c,{class:"pa-4 black--text",innerHTML:t.message},null,8,["innerHTML"]),[[i.F8,!!t.message]]),(0,a.Wm)(h,{class:"pt-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(f),t.options.noconfirm?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(m,{key:0,color:"grey",text:"",class:"body-2 font-weight-bold",onClick:l.cancel},{default:(0,a.w5)((function(){return[(0,a.Uk)("Cancel")]})),_:1},8,["onClick"])),(0,a.Wm)(m,{color:"primary",class:"body-2 font-weight-bold",outlined:"",onClick:l.agree},{default:(0,a.w5)((function(){return[(0,a.Uk)("OK")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue","max-width","style","onKeydown"])}n(41539);var u={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"grey lighten-3",width:400,zIndex:1008,noconfirm:!1}}},methods:{open:function(t,e,n){var a=this;return this.dialog=!0,this.title=t,this.message=e,this.options=Object.assign(this.options,n),new Promise((function(t,e){a.resolve=t,a.reject=e}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.resolve(!1),this.dialog=!1}}},l=n(48118);const d=(0,l.Z)(u,[["render",o]]);var s=d},48236:function(t,e,n){n.d(e,{Z:function(){return c}});var a=n(66252),r=n(3577),i=(0,a._)("i",{class:"fas fa-magic fa-2x faa-horizontal animated"},null,-1),o={style:{"margin-left":"10px"}};function u(t,e,n,u,l,d){var s=(0,a.up)("v-layout"),c=(0,a.up)("v-card-text"),f=(0,a.up)("v-card"),m=(0,a.up)("v-container"),h=(0,a.up)("v-dialog");return(0,a.wg)(),(0,a.j4)(h,{modelValue:t.show,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.show=e}),persistent:"",content:"","content-class":"centered-dialog"},{default:(0,a.w5)((function(){return[(0,a.Wm)(m,{"fill-height":""},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{color:"primary",dark:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(c,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{row:""},{default:(0,a.w5)((function(){return[i,(0,a._)("h2",o,(0,r.zw)(n.message),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])}var l={name:"Loading",data:function(){return{show:!1}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(t){this.show=t}}},d=n(48118);const s=(0,d.Z)(l,[["render",u]]);var c=s},23264:function(t,e,n){n.r(e),n.d(e,{default:function(){return y}});n(68309);var a=n(66252),r=n(3577),i=n(49963),o=(0,a._)("strong",null,"DNS auth required: ",-1),u=(0,a._)("strong",null,"Missing DKIM",-1),l=(0,a._)("strong",null,"Missing SPF",-1),d={key:1},s={key:0};function c(t,e,n,c,f,m){var h=(0,a.up)("v-alert"),w=(0,a.up)("Loading"),g=(0,a.up)("v-btn"),p=(0,a.up)("v-card-text"),v=(0,a.up)("v-card"),k=(0,a.up)("v-col"),_=(0,a.up)("v-row"),y=(0,a.up)("v-layout"),W=(0,a.up)("v-switch"),x=(0,a.up)("v-card-title"),q=(0,a.up)("v-icon"),b=(0,a.up)("v-list-item-title"),D=(0,a.up)("v-list-item-subtitle"),U=(0,a.up)("v-list-item"),C=(0,a.up)("v-list"),V=(0,a.up)("v-text-field"),Z=(0,a.up)("v-dialog"),j=(0,a.up)("Confirm");return(0,a.wg)(),(0,a.iD)("div",null,[f.error?((0,a.wg)(),(0,a.j4)(h,{key:0,type:"error"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,r.zw)(f.error),1)]})),_:1})):(0,a.kq)("",!0),(0,a.Wm)(w,{value:f.loading},null,8,["value"]),(0,a.Wm)(v,{class:"pa-3",loading:f.fetching},{default:(0,a.w5)((function(){return[f.authRequired?((0,a.wg)(),(0,a.j4)(y,{key:0,row:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(k,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{tile:"",flat:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,null,{default:(0,a.w5)((function(){return[o,(0,a.Wm)(g,{onClick:e[0]||(e[0]=function(t){return m.authPrompt()})},{default:(0,a.w5)((function(){return[(0,a.Uk)("Fix")]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})):(0,a.kq)("",!0),!f.authRequired&&f.data.server&&f.data.dns&&f.data.dns.MX!=f.data.server.hostname?((0,a.wg)(),(0,a.j4)(y,{key:1,row:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{tile:"",flat:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,null,{default:(0,a.w5)((function(){return[(0,a._)("strong",null,"MX mismatch: "+(0,r.zw)(f.data.dns.MX)+" != "+(0,r.zw)(f.data.server.hostname),1),f.data.dns.not_set?((0,a.wg)(),(0,a.j4)(g,{key:0,onClick:e[1]||(e[1]=function(t){return m.fixDomainDns(f.data.domain)})},{default:(0,a.w5)((function(){return[(0,a.Uk)("Fix")]})),_:1})):(0,a.kq)("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})):(0,a.kq)("",!0),!f.authRequired&&f.data.server&&f.data.dkim&&f.data.dkim.not_set?((0,a.wg)(),(0,a.j4)(y,{key:2,row:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{tile:"",flat:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,null,{default:(0,a.w5)((function(){return[u,f.data.dkim.not_set?((0,a.wg)(),(0,a.j4)(g,{key:0,onClick:e[2]||(e[2]=function(t){return m.fixDkim(f.data.domain)})},{default:(0,a.w5)((function(){return[(0,a.Uk)("Fix")]})),_:1})):(0,a.kq)("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})):(0,a.kq)("",!0),!f.authRequired&&f.data.server&&f.data.spf&&f.data.spf.not_set&&!f.data.spf.SPF?((0,a.wg)(),(0,a.j4)(y,{key:3,row:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{tile:"",flat:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,null,{default:(0,a.w5)((function(){return[l,f.data.spf.not_set?((0,a.wg)(),(0,a.j4)(g,{key:0,onClick:e[3]||(e[3]=function(t){return m.fixSpf(f.data.domain)})},{default:(0,a.w5)((function(){return[(0,a.Uk)("Fix")]})),_:1})):(0,a.kq)("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})):(0,a.kq)("",!0),f.data.server.mailserver?((0,a.wg)(),(0,a.j4)(x,{key:4,"primary-title":""},{default:(0,a.w5)((function(){return[(0,a.Wm)(W,{modelValue:f.data.email,"onUpdate:modelValue":e[4]||(e[4]=function(t){return f.data.email=t}),label:"Email",onChange:e[5]||(e[5]=function(t){return m.toggleEmail()}),"hide-details":""},null,8,["modelValue"])]})),_:1})):(0,a.kq)("",!0)]})),_:1},8,["loading"]),f.data.server.mailserver?((0,a.wg)(),(0,a.iD)("div",d,[(0,a.Wm)(v,{class:"mx-auto"},{default:(0,a.w5)((function(){return[(0,a.Wm)(C,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(C,{group:""},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.data.emails,(function(t,n){return(0,a.wg)(),(0,a.j4)(U,{key:"item-".concat(n),title:t.name,subtitle:t.value,onClick:function(e){return m.editItem(t)}},{append:(0,a.w5)((function(){return[(0,a.Wm)(g,{icon:"",disabled:f.fetching,loading:f.fetching,onClick:[function(e){return m.deleteItem(t.user)},e[6]||(e[6]=(0,i.iM)((function(){}),["stop"]))]},{default:(0,a.w5)((function(){return[(0,a.Wm)(q,{size:"small"},{default:(0,a.w5)((function(){return[(0,a.Uk)("mdi:mdi-delete")]})),_:1})]})),_:2},1032,["disabled","loading","onClick"])]})),default:(0,a.w5)((function(){return[(0,a.Wm)(b,null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,r.zw)(t.user)+" ",1),t.destination?((0,a.wg)(),(0,a.iD)("span",s,[(0,a.Wm)(q,null,{default:(0,a.w5)((function(){return[(0,a.Uk)("fas fa-long-arrow-alt-right")]})),_:1}),(0,a.Uk)(" "+(0,r.zw)(t.destination),1)])):(0,a.kq)("",!0)]})),_:2},1024),(0,a.Wm)(D,null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,r.zw)(m.prettyBytes(t.disk_usage)),1)]})),_:2},1024)]})),_:2},1032,["title","subtitle","onClick"])})),128))]})),_:1})]})),_:1})]})),_:1}),(0,a.Wm)(v,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(p,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{onClick:e[7]||(e[7]=function(t){return m.addEmail()})},{default:(0,a.w5)((function(){return[(0,a.Uk)(" Add email ")]})),_:1})]})),_:1})]})),_:1}),(0,a.Wm)(Z,{modelValue:f.drawer,"onUpdate:modelValue":e[12]||(e[12]=function(t){return f.drawer=t})},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(x,null,{default:(0,a.w5)((function(){return[(0,a.Uk)(" Email account ")]})),_:1}),(0,a.Wm)(p,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(V,{modelValue:f.email.user,"onUpdate:modelValue":e[8]||(e[8]=function(t){return f.email.user=t}),label:"Name",required:"",readonly:f.userReadonly},null,8,["modelValue","readonly"]),(0,a.Wm)(V,{type:"password",modelValue:f.email.password,"onUpdate:modelValue":e[9]||(e[9]=function(t){return f.email.password=t}),label:"Password",required:""},null,8,["modelValue"]),(0,a.Wm)(V,{modelValue:f.email.destination,"onUpdate:modelValue":e[10]||(e[10]=function(t){return f.email.destination=t}),label:"Forwarding",required:""},null,8,["modelValue"]),(0,a.Wm)(g,{disabled:!f.email.user,loading:f.fetching,color:"success",onClick:e[11]||(e[11]=function(t){return m.saveEmail()})},{default:(0,a.w5)((function(){return[(0,a.Uk)(" Save ")]})),_:1},8,["disabled","loading"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])):(0,a.kq)("",!0),(0,a.Wm)(j,{ref:"confirm"},null,512)])}var f=n(6835),m=n(48534),h=(n(41539),n(1006)),w=n(48236),g=n(72564),p=n(90947),v={components:{Loading:w.Z,Confirm:p.Z},data:function(){return{domainId:null,post:null,error:null,data:{email:!1,emails:[],server:{},records:{}},email:{},fetching:!1,loading:!1,rules:{required:function(t){return!!t||"Required."},min:function(t){return t.length>=8||"Min 8 characters"},emailMatch:function(){return"The email and password you entered don't match"}},copyText:"Copy",drawer:!1,userReadonly:!1,timer:null,authRequired:!1}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;this.error="",this.domainId=this.$route.params.id,clearTimeout(t.timer),this.fetching=!0,h.Z.get("sites/"+this.domainId+"/email?v="+Date.now()).then((function(e){console.log(e),t.data=e.data.item,document.title="Email | "+t.data.domain,t.data.dns.updating&&(console.log("checking dns"),t.timer=setTimeout(t.fetchData,6e4))})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1}))},toggleEmail:function(){var t=this;this.error="",this.loading=!0,h.Z.post("sites/"+this.domainId+"/email",{update:1,status:this.data.email}).then((function(e){console.log(e),e.data.error?t.error=e.data.error:e.data.success&&t.fetchData()})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1,t.loading=!1}))},addEmail:function(){this.drawer=!0,this.userReadonly=!1,this.email={}},editItem:function(t){this.drawer=!0,this.userReadonly=!0,this.email=t},saveEmail:function(){var t=this;this.email.user&&(this.loading=!0,this.error="",h.Z.post("sites/"+this.domainId+"/email",this.email).then((function(e){console.log(e),e.data.success?(t.drawer=!1,t.fetchData()):(t.error=e.data.error,t.loading=!1)})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1})))},deleteItem:function(){var t=(0,m.Z)((0,f.Z)().mark((function t(e){var n;return(0,f.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Confirm","Delete "+e);case 2:if(!t.sent){t.next=4;break}res&&(n=this,this.loading=!0,this.error="",h.Z.post("sites/"+this.domainId+"/email",{delete:1,user:e}).then((function(t){console.log(t),t.data.success?n.fetchData():(n.error=t.data.error,n.loading=!1)})).catch((function(t){console.log(t)})).finally((function(){n.loading=!1})));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),fixDomainDns:function(){var t=this;this.error="",this.loading=!0,h.Z.post("sites/"+t.domainId+"/fixmx",{}).then((function(e){console.log(e),t.loading=!1,e.data.success?t.fetchData():"auth"==e.data.error?t.authRequired=!0:t.error=e.data.error})).catch((function(t){console.log(t)}))},fixDkim:function(){var t=this;this.error="",this.loading=!0,h.Z.post("sites/"+t.domainId+"/fixdkim",{}).then((function(e){console.log(e),t.loading=!1,e.data.success?t.fetchData():"auth"==e.data.error?t.authRequired=!0:t.error=e.data.error})).catch((function(t){console.log(t)}))},fixSpf:function(){var t=this;this.error="",this.loading=!0,h.Z.post("sites/"+t.domainId+"/fixspf",{}).then((function(e){console.log(e),t.loading=!1,e.data.success?t.fetchData():"auth"==e.data.error?t.authRequired=!0:t.error=e.data.error})).catch((function(t){console.log(t)}))},authPrompt:function(){this.authRequired=!1,window.open("https://serverwand.com/account/services/"+this.data.server.dns)},prettyBytes:function(t){return g.Z.prettyBytes(t)}}},k=n(48118);const _=(0,k.Z)(v,[["render",c]]);var y=_}}]);
//# sourceMappingURL=3264-legacy.ad88f4a7.js.map