"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[7517],{84285:function(a,e,t){t.d(e,{Z:function(){return s}});var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:a.value,callback:function(e){a.value=e},expression:"value"}},[t("v-container",{attrs:{"fill-height":""}},[t("v-card",{attrs:{color:"primary",dark:""}},[t("v-card-text",[t("v-layout",{attrs:{row:""}},[t("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),t("h2",{staticStyle:{"margin-left":"10px"}},[a._v(a._s(a.message))])])],1)],1)],1)],1)},i=[],n={name:"Loading",data:()=>({}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},o=n,d=t(1001),l=(0,d.Z)(o,r,i,!1,null,null,null),s=l.exports},47517:function(a,e,t){t.r(e),t.d(e,{default:function(){return p}});var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[a.error?t("v-alert",{attrs:{type:"error"}},[a._v(" "+a._s(a.error)+" ")]):a._e(),t("Loading",{attrs:{value:a.loading}}),a.serverId?a._e():t("v-card",[t("v-card-title",[a._v("Domain details")]),t("v-card-text",[a.loading?a._e():t("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valid,callback:function(e){a.valid=e},expression:"valid"}},[t("v-text-field",{attrs:{disabled:a.domainId>0,rules:a.domainRules,label:"Domain",required:""},model:{value:a.data.domain,callback:function(e){a.$set(a.data,"domain",e)},expression:"data.domain"}}),t("v-btn",{attrs:{disabled:a.loading,loading:a.loading,color:"success"},on:{click:a.validate}},[a._v(" Save ")])],1)],1)],1),t("Domain",{ref:"Domain"})],1)},i=[],n=t(4296),o=t(84285),d=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("v-alert",{attrs:{value:a.error.length>0,type:"error"}},[a._v(" "+a._s(a.error)+" ")]),t("Loading",{attrs:{value:a.loading}}),t("v-dialog",{model:{value:a.authRequired,callback:function(e){a.authRequired=e},expression:"authRequired"}},[t("v-card",[t("v-card-title",[a._v(" Auth required ")]),t("v-card-text",[t("v-btn",{on:{click:function(e){return a.authPrompt()}}},[a._v(" Continue ")])],1)],1)],1)],1)},l=[],s={components:{Loading:o.Z},name:"Domain",data:()=>({loading:!1,error:"",newWindow:!1,provider:"linode",authRequired:!1}),methods:{create(a){var e=this;e.loading=!0,n.Z.post("domains/create",a).then((t=>{if(t.data.domain_id)e.$eventHub.emit("itemsChanged"),e.$router.push("/domains/"+t.data.domain_id+"/summary");else if(t.data.error)if("auth"===t.data.error){e.provider=t.data.provider,e.authRequired=!0;var r=setInterval((()=>{if(e.newWindow&&e.newWindow.closed)return clearInterval(r),void e.create(a)}),500)}else e.error=t.data.error})).catch((a=>{console.log(a)})).finally((()=>{e.loading=!1}))},authPrompt(){this.authRequired=!1,this.newWindow=window.open("https://serverwand.com/account/services/"+this.provider)}}},u=s,c=t(1001),v=(0,c.Z)(u,d,l,!1,null,null,null),m=v.exports,h={components:{Loading:o.Z,Domain:m},data:()=>({loading:!1,valid:!0,data:{domain:"",dns:!0},domainRules:[a=>!!a||"Domain is required"],passwordRules:[],servers:[],dnsProviders:{},details:"",error:"",authRequired:!1}),created(){document.title="Domain details",this.domainId=this.$route.params.id,this.fetchData()},methods:{fetchData(){var a=this;this.error="",this.loading=!1,n.Z.get("domains/"+this.domainId).then((e=>{console.log(e),a.domainId&&(a.data=e.data.item)})).catch((a=>console.log(a))).finally((()=>a.loading=!1))},save(){var a=this;this.error="",this.details="",this.loading=!0,console.log(arguments),a.domainId?n.Z.post("domains/"+this.domainId+"/update",this.data).then((e=>{console.log(e),a.$router.push("/domains/"+a.domainId+"/summary")})).catch((a=>console.log(a))):(a.loading=!1,this.$refs.Domain.create(this.data))},validate(){this.$refs.form.validate()&&this.save()}}},f=h,g=(0,c.Z)(f,r,i,!1,null,null,null),p=g.exports}}]);
//# sourceMappingURL=7517.6fb2283c.js.map