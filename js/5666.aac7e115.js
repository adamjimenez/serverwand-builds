"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[5666],{81815:function(e,t,l){l.d(t,{A:function(){return s}});var a=l(20641);function i(e,t,l,i,n,r){const o=(0,a.g2)("v-icon"),s=(0,a.g2)("v-alert"),d=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",width:"600"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{title:l.message,color:"primary"},{prepend:(0,a.k6)((()=>[(0,a.bF)(o,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1},8,["title"])])),_:1},8,["modelValue"])}var n={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},r=l(66262);const o=(0,r.A)(n,[["render",i]]);var s=o},25666:function(e,t,l){l.r(t),l.d(t,{default:function(){return g}});l(44114);var a=l(20641),i=l(90033);const n={key:0},r={key:0},o={key:0},s={key:1},d={key:2};function u(e,t,l,u,c,m){const v=(0,a.g2)("v-alert"),f=(0,a.g2)("Loading"),h=(0,a.g2)("v-list-item"),p=(0,a.g2)("v-select"),g=(0,a.g2)("v-col"),k=(0,a.g2)("v-row"),b=(0,a.g2)("v-container"),y=(0,a.g2)("ServerIcon"),_=(0,a.g2)("v-icon"),F=(0,a.g2)("v-data-table"),w=(0,a.g2)("router-link"),W=(0,a.g2)("v-list-item-title"),X=(0,a.g2)("v-list"),V=(0,a.g2)("v-card"),A=(0,a.g2)("v-layout");return(0,a.uX)(),(0,a.Wv)(A,{row:""},{default:(0,a.k6)((()=>[(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(g,{cols:"12"},{default:(0,a.k6)((()=>[c.error?((0,a.uX)(),(0,a.Wv)(v,{key:0,type:"error",text:c.error},null,8,["text"])):(0,a.Q3)("",!0),(0,a.bF)(f,{value:c.loading},null,8,["value"]),(0,a.bF)(V,{loading:c.fetching},{default:(0,a.k6)((()=>[c.items.length?((0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(b,{fluid:""},{default:(0,a.k6)((()=>[(0,a.bF)(k,null,{default:(0,a.k6)((()=>[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:c.provider,"onUpdate:modelValue":t[0]||(t[0]=e=>c.provider=e),items:c.provider_opts,label:"Provider","hide-details":"",clearable:""},{item:(0,a.k6)((({props:e,item:t})=>[(0,a.bF)(h,(0,a.v6)(e,{"prepend-icon":t?.raw?.icon,title:t?.raw?.title}),null,16,["prepend-icon","title"])])),_:1},8,["modelValue","items"])])),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.bF)(p,{modelValue:c.team,"onUpdate:modelValue":t[1]||(t[1]=e=>c.team=e),items:c.teams,"item-title":"name","item-value":"id",label:"Team","hide-details":"",clearable:""},null,8,["modelValue","items"])])),_:1})])),_:1})])),_:1}),(0,a.bF)(F,{headers:m.headers,items:m.filtered,"items-per-page":100,hover:"","onClick:row":t[2]||(t[2]=function(t,l){e.$router.push("/servers/"+l.item.id+"/summary")})},{"item.name":(0,a.k6)((({item:e})=>[(0,a.bF)(h,{title:e.name,subtitle:e.hostname,class:"px-0"},(0,a.eX)({_:2},[c.display.mobile?void 0:{name:"prepend",fn:(0,a.k6)((()=>[(0,a.bF)(y,{provider:e.provider},null,8,["provider"])])),key:"0"}]),1032,["title","subtitle"])])),"item.connected":(0,a.k6)((({item:e})=>[(0,a.bF)(h,null,{prepend:(0,a.k6)((()=>[0==e.connected?((0,a.uX)(),(0,a.Wv)(_,{key:0,color:"error"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.eW)(" fa-solid fa-circle ")]))),_:1})):e.health?.length?((0,a.uX)(),(0,a.Wv)(_,{key:1,color:"warning"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.eW)("fas fa-exclamation-triangle fa-beat")]))),_:1})):((0,a.uX)(),(0,a.Wv)(_,{key:2,color:"success"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)(" fa-solid fa-circle ")]))),_:1}))])),default:(0,a.k6)((()=>[c.display.mobile?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",r,[0==e.connected?((0,a.uX)(),(0,a.CE)("span",o," Unavailable ")):e.health?.length?((0,a.uX)(),(0,a.CE)("span",s,(0,i.v_)(e.health?.length)+" issue"+(0,i.v_)(1!==e.health?.length?"s":""),1)):((0,a.uX)(),(0,a.CE)("span",d," Connected "))]))])),_:2},1024)])),_:1},8,["headers","items"])])):((0,a.uX)(),(0,a.Wv)(X,{key:1},{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.bF)(W,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,{to:"/servers/create"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)(" Add a server ")]))),_:1})])),_:1})])),_:1})])),_:1}))])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})}l(98992),l(3949);var c=l(74300),m=l(81815),v=l(56458),f={components:{Loading:m.A,ServerIcon:v.A},data(){return{loading:!1,fetching:!1,error:null,items:[],team:null,teams:[],provider:null,provider_opts:[{title:"Linode",value:"linode",icon:"fab fa-linode"},{title:"Digital Ocean",value:"digitalocean",icon:"fab fa-digital-ocean"},{title:"Vultr",value:"vultr",icon:"fas fa-server"}],display:{}}},computed:{headers:function(){let e=[{title:"Server ",key:"name"},{title:"Status ",key:"connected"}];return this.display.smAndUp&&e.push({title:"Region ",key:"region"},{title:"Image ",key:"image"},{title:"Type ",key:"type"}),e},filtered:function(){let e=[];return this.items.forEach((t=>{if(!this.provider||t.provider!=this.provider){if(this.team){let e=!1;if(this.teams.forEach((l=>{l.id==this.team&&l.servers.forEach((l=>{l.server==t.id&&(e=!0)}))})),!e)return}e.push(t)}})),e}},created(){this.display=this.$vuetify.display,document.title="Servers",this.fetchData()},methods:{fetchData(){this.error="",this.fetching=!0,c.A.get("servers/").then((e=>{console.log(e),this.items=e.data.items})).catch((e=>console.log(e))).finally((()=>this.fetching=!1)),c.A.get("teams/").then((e=>{console.log(e),this.teams=e.data.items})).catch((e=>console.log(e))).finally((()=>this.fetching=!1))}}},h=l(66262);const p=(0,h.A)(f,[["render",u]]);var g=p}}]);
//# sourceMappingURL=5666.aac7e115.js.map