"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[5599],{61305:function(e,s,t){t.d(s,{Z:function(){return l}});var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return"linode"===e.provider?t("v-icon",[e._v("fab fa-linode")]):"digitalocean"===e.provider?t("v-icon",[e._v("fab fa-digital-ocean")]):t("v-icon",[e._v("fas fa-server")])},a=[],o={props:{provider:null}},n=o,i=t(1001),v=(0,i.Z)(n,r,a,!1,null,null,null),l=v.exports},85599:function(e,s,t){t.r(s),t.d(s,{default:function(){return h}});var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("v-layout",{attrs:{row:""}},[t("v-flex",[e.error?t("v-alert",{attrs:{type:"error"}},[t("div",{domProps:{innerHTML:e._s(e.error)}})]):e._e(),e.fetching?e._e():t("v-list",[t("v-list-item",[t("v-list-item-content",[t("v-container",{staticClass:"mx-0",staticStyle:{"max-width":"100%"}},[t("v-row",[t("v-col",[t("v-list-item",{staticClass:"px-0"},[t("v-list-item-icon",[t("ServerIcon",{attrs:{provider:e.data.provider}})],1),t("v-list-item-content",{staticClass:"py-0"},[t("v-list-item-title",[e._v(" "+e._s(e.data.name)+" ")]),t("v-list-item-subtitle",[e._v(" "+e._s(e.data.hostname)+" ")])],1)],1)],1),t("v-col",{attrs:{align:"right"}},[t("v-btn",{attrs:{color:"success"},on:{click:e.terminal}},[t("v-icon",{attrs:{small:""}},[e._v("fas fa-terminal")])],1)],1)],1)],1)],1)],1)],1),t("v-tabs",{attrs:{"show-arrows":""}},[t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/summary"}},[e._v("Summary")]),t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/Files"}},[e._v("Files")]),t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/services"}},[e._v("Services")]),t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/cronjobs"}},[e._v("Cronjobs")]),t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/database"}},[e._v("Database")]),t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/systemusers"}},[e._v("System users")]),t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/firewall"}},[e._v("Firewall")]),t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/mail"}},[e._v("Mail")]),t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/apps"}},[e._v("Apps")]),t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/logs"}},[e._v("Logs")]),t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/backups"}},[e._v("Cloud backups")]),t("v-tab",{attrs:{to:"/servers/"+e.serverId+"/settings"}},[e._v("Settings")])],1),t("router-view")],1)],1),t("v-dialog",{model:{value:e.chooseUser,callback:function(s){e.chooseUser=s},expression:"chooseUser"}},[t("v-card",{attrs:{loading:e.fetching}},[t("v-card-title",[e._v(" Open Secure Shell ")]),t("v-card-text",[e.users.length?t("div",[t("v-select",{attrs:{items:e.users,label:"User"},model:{value:e.ssh_username,callback:function(s){e.ssh_username=s},expression:"ssh_username"}}),t("v-btn",{staticClass:"ml-3",attrs:{disabled:0===e.ssh_username.length,color:"success",right:""},on:{click:e.saveKeyAndContinue}},[e._v(" Save Key and Continue ")])],1):e.fetching?e._e():t("div",[e._v(" No system users, add one and try again. ")])])],1)],1)],1)},a=[],o=t(4296),n=t(61305),i={components:{ServerIcon:n.Z},data(){return{error:"",data:{users:{}},ssh_username:"",users:[],details:"",fetching:!1,chooseUser:!1}},created(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData(){var e=this;this.error="",this.serverId=this.$route.params.id,o.Z.get("servers/"+this.serverId).then((s=>{console.log(s),s.data.error&&(e.error=s.data.error),s.data.item&&(e.data=s.data.item)})).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},fetchUsers(){var e=this;this.error="",this.fetching=!0,e.chooseUser=!0,o.Z.get("servers/"+this.serverId+"/systemusers").then((s=>{if(console.log(s),s.data.error)return e.error=s.data.error,!1;s.data.item.users.forEach((s=>{e.users.push({text:s.name,value:s.name})}))})).catch((e=>console.log(e))).finally((()=>e.fetching=!1))},saveKey(e){var s=this;o.Z.post("servers/"+s.serverId+"/systemusers/"+s.ssh_username,{key:e}).then((e=>{console.log(e),e.data.success?s.saveSSHUser():(s.fetching=!1,s.error=e.data.error)})).catch((e=>{s.fetching=!1,console.log(e)}))},saveSSHUser(){var e=this;e.fetching=!0,o.Z.post("servers/"+this.serverId+"/savesshuser",{ssh_username:e.ssh_username}).then((s=>{console.log(s),s.data.success?(e.data.ssh_username=e.ssh_username,e.terminal()):e.error=s.data.error})).catch((e=>console.log(e))).finally((()=>{e.fetching=!1,e.chooseUser=!1}))},saveKeyAndContinue(){var e=this;e.fetching=!0,o.Z.post("https://shiftedit.net/api/prefs").then((s=>{console.log(s),s.data.error?(e.error=s.data.error,e.chooseUser=!1):(console.log(s.data.public_key),e.saveKey(s.data.public_key))})).catch((e=>console.log(e)))},terminal(){if(this.data.ssh_username){console.log("open ssh "+this.data.ssh_username);var e="http://shiftedit.net/ssh/?host="+this.data.hostname+"&user="+this.data.ssh_username;window.ssh_path&&(e+="&path="+window.ssh_path),window.open(e)}else this.fetchUsers()}}},v=i,l=t(1001),c=(0,l.Z)(v,r,a,!1,null,null,null),h=c.exports}}]);
//# sourceMappingURL=5599.cbfa3dca.js.map