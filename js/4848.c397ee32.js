"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[4848,6260],{81815:function(e,t,a){a.d(t,{A:function(){return l}});var r=a(20641);function n(e,t,a,n,o,i){const d=(0,r.g2)("v-icon"),l=(0,r.g2)("v-alert"),s=(0,r.g2)("v-dialog");return(0,r.uX)(),(0,r.Wv)(s,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=t=>e.show=t),persistent:"",width:"600"},{default:(0,r.k6)((()=>[(0,r.bF)(l,{title:a.message,color:"primary"},{prepend:(0,r.k6)((()=>[(0,r.bF)(d,{icon:"fas fa-magic fa-2x faa-horizontal animated"})])),_:1},8,["title"])])),_:1},8,["modelValue"])}var o={name:"Loading",data:()=>({show:!1}),props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}},watch:{value:function(e){this.show=e}}},i=a(66262);const d=(0,i.A)(o,[["render",n]]);var l=d},44848:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var r=a(20641);function n(e,t,a,n,o,i){const d=(0,r.g2)("v-alert"),l=(0,r.g2)("Loading"),s=(0,r.g2)("v-card-title"),u=(0,r.g2)("v-text-field"),c=(0,r.g2)("v-btn"),h=(0,r.g2)("v-form"),m=(0,r.g2)("v-card-text"),f=(0,r.g2)("v-card"),v=(0,r.g2)("Domain");return(0,r.uX)(),(0,r.CE)("div",null,[e.error?((0,r.uX)(),(0,r.Wv)(d,{key:0,type:"error",text:e.error},null,8,["text"])):(0,r.Q3)("",!0),(0,r.bF)(l,{value:e.loading},null,8,["value"]),(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.bF)(s,null,{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)("Domain details")]))),_:1}),(0,r.bF)(m,null,{default:(0,r.k6)((()=>[e.loading?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(h,{key:0,ref:"form",modelValue:e.valid,"onUpdate:modelValue":t[1]||(t[1]=t=>e.valid=t),"lazy-validation":""},{default:(0,r.k6)((()=>[(0,r.bF)(u,{disabled:e.domainId>0,modelValue:e.data.domain,"onUpdate:modelValue":t[0]||(t[0]=t=>e.data.domain=t),rules:e.domainRules,label:"Domain",required:"",autofocus:""},null,8,["disabled","modelValue","rules"]),(0,r.bF)(c,{disabled:e.domainId>0||!e.data.domain,loading:e.loading,color:"success",onClick:i.validate},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)(" Save ")]))),_:1},8,["disabled","loading","onClick"])])),_:1},8,["modelValue"]))])),_:1})])),_:1}),(0,r.bF)(v,{ref:"Domain"},null,512)])}a(44114);var o=a(74300),i=a(81815);function d(e,t,a,n,o,i){const d=(0,r.g2)("v-alert"),l=(0,r.g2)("Loading"),s=(0,r.g2)("v-btn"),u=(0,r.g2)("v-card-text"),c=(0,r.g2)("v-card"),h=(0,r.g2)("v-dialog");return(0,r.uX)(),(0,r.CE)("div",null,[e.error?((0,r.uX)(),(0,r.Wv)(d,{key:0,type:"error",text:e.error},null,8,["text"])):(0,r.Q3)("",!0),(0,r.bF)(l,{value:e.loading},null,8,["value"]),(0,r.bF)(h,{modelValue:e.authRequired,"onUpdate:modelValue":t[1]||(t[1]=t=>e.authRequired=t)},{default:(0,r.k6)((()=>[(0,r.bF)(c,{title:"Auth required"},{default:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(s,{onClick:t[0]||(t[0]=e=>i.authPrompt())},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)(" Continue ")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var l={components:{Loading:i.A},name:"Domain",data:()=>({loading:!1,error:"",newWindow:!1,provider:"linode",authRequired:!1}),methods:{create(e){this.loading=!0,o.A.post("domains/create",e).then((t=>{if(t.data.domain_id)this.$router.push("/domains/"+t.data.domain_id+"/summary");else if(t.data.error)if("auth"===t.data.error){this.provider=t.data.provider,this.authRequired=!0;let a=setInterval((()=>{if(this.newWindow&&this.newWindow.closed)return clearInterval(a),void this.create(e)}),500)}else this.error=t.data.error})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},authPrompt(){this.authRequired=!1,this.newWindow=window.open("https://serverwand.com/account/services/"+this.provider)}}},s=a(66262);const u=(0,s.A)(l,[["render",d]]);var c=u,h={components:{Loading:i.A,Domain:c},data:()=>({loading:!1,valid:!0,data:{domain:"",dns:!0},domainRules:[e=>!!e||"Domain is required"],passwordRules:[],servers:[],dnsProviders:{},details:"",error:"",authRequired:!1}),created(){document.title="Domain details",this.domainId=parseInt(this.$route.params.id),this.fetchData()},methods:{fetchData(){this.error="",this.loading=!1,o.A.get("domains/"+this.domainId).then((e=>{console.log(e),this.domainId&&(this.data=e.data.item)})).catch((e=>console.log(e))).finally((()=>this.loading=!1))},save(){this.error="",this.details="",this.loading=!0,console.log(arguments),this.domainId?o.A.post("domains/"+this.domainId+"/update",this.data).then((e=>{console.log(e),this.$router.push("/domains/"+this.domainId+"/summary")})).catch((e=>console.log(e))):(this.loading=!1,this.$refs.Domain.create(this.data))},validate(){this.$refs.form.validate()&&this.save()}}};const m=(0,s.A)(h,[["render",n]]);var f=m},34527:function(e,t,a){var r=a(43724),n=a(34376),o=TypeError,i=Object.getOwnPropertyDescriptor,d=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=d?function(e,t){if(n(e)&&!i(e,"length").writable)throw new o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},96837:function(e){var t=TypeError,a=9007199254740991;e.exports=function(e){if(e>a)throw t("Maximum allowed index exceeded");return e}},34376:function(e,t,a){var r=a(22195);e.exports=Array.isArray||function(e){return"Array"===r(e)}},44114:function(e,t,a){var r=a(46518),n=a(48981),o=a(26198),i=a(34527),d=a(96837),l=a(79039),s=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},c=s||!u();r({target:"Array",proto:!0,arity:1,forced:c},{push:function(e){var t=n(this),a=o(t),r=arguments.length;d(a+r);for(var l=0;l<r;l++)t[a]=arguments[l],a++;return i(t,a),a}})}}]);
//# sourceMappingURL=4848.c397ee32.js.map