(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[5521],{84285:function(t,e,r){"use strict";r.d(e,{Z:function(){return l}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[r("v-container",{attrs:{"fill-height":""}},[r("v-card",{attrs:{color:"primary",dark:""}},[r("v-card-text",[r("v-layout",{attrs:{row:""}},[r("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),r("h2",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.message))])])],1)],1)],1)],1)},i=[],a={name:"Loading",data:function(){return{}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},o=a,s=r(1001),c=(0,s.Z)(o,n,i,!1,null,null,null),l=c.exports},25521:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return v}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.error?r("v-alert",{attrs:{type:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),r("Loading",{attrs:{value:t.loading}}),r("v-card",{staticClass:"pa-3",attrs:{loading:t.fetching}},[r("v-container",{attrs:{fluid:""}},[r("v-row",[r("v-card-title",{attrs:{"primary-title":""}},[r("v-switch",{attrs:{label:"Active"},on:{change:function(e){return t.toggle()}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}})],1)],1)],1),r("v-list",[r("v-list-item-group",[t._l(t.items,(function(e,n){return[r("v-list-item",{key:"item-"+n,attrs:{value:e},on:{click:function(r){return t.editItem(e)}},scopedSlots:t._u([{key:"default",fn:function(){return[r("v-list-item-content",[r("v-list-item-title",[t._v(" "+t._s(e.port)+"/"+t._s(e.protocol)+" "+t._s(e.action)+" from "+t._s(e.from)+" ")]),r("v-list-item-subtitle",[t._v(" "+t._s(e.comment)+" ")])],1),r("v-list-item-action",[r("v-btn",{attrs:{icon:"",disabled:t.fetching,loading:t.fetching},on:{click:[function(r){return t.deleteItem(e)},function(t){t.stopPropagation()}]}},[r("v-icon",{attrs:{small:""}},[t._v("delete")])],1)],1)]},proxy:!0}],null,!0)})]}))],2)],1)],1),r("v-card",[r("div",[r("v-card-title",{attrs:{"primary-title":""}},[r("v-btn",{on:{click:function(e){return t.addItem()}}},[t._v(" Add rule ")])],1)],1)]),r("v-navigation-drawer",{attrs:{app:"",temporary:"",right:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-card",[r("v-form",{ref:"form"},[r("v-card-title",[t._v(" Firewall rule ")]),r("v-card-text",[r("v-text-field",{attrs:{label:"Port range",placeholder:"80, 443, 5000:5010",required:"",rules:[t.rules.required,t.rules.port]},model:{value:t.item.port,callback:function(e){t.$set(t.item,"port",e)},expression:"item.port"}}),r("v-select",{attrs:{items:t.protocol,label:"Protocol"},model:{value:t.item.protocol,callback:function(e){t.$set(t.item,"protocol",e)},expression:"item.protocol"}}),r("v-select",{attrs:{items:t.action,label:"Action",required:""},model:{value:t.item.action,callback:function(e){t.$set(t.item,"action",e)},expression:"item.action"}}),r("v-text-field",{attrs:{label:"From",rules:[t.rules.ip],placeholder:"192.168.0.1"},model:{value:t.item.from,callback:function(e){t.$set(t.item,"from",e)},expression:"item.from"}}),r("v-text-field",{attrs:{label:"Comment"},model:{value:t.item.comment,callback:function(e){t.$set(t.item,"comment",e)},expression:"item.comment"}}),r("v-btn",{attrs:{disabled:t.fetching,loading:t.fetching,color:"success"},on:{click:t.saveItem}},[t._v(" Save ")])],1)],1)],1)],1)],1)},i=[],a=r(77673),o=r(16198),s=(r(74916),r(77601),r(41539),r(68309),r(38862),r(4296)),c=r(84285),l={components:{Loading:c.Z},data:function(){return{loading:!1,error:"",active:!1,items:{},item:{},details:"",fetching:!1,drawer:!1,serverId:0,protocol:[{text:"TCP",value:"tcp"},{text:"UDP",value:"udp"}],action:[{text:"Allow",value:"ALLOW"},{text:"Deny",value:"DENY"}],direction:["IN","OUT"],rules:{required:function(t){return!!t||"Required."},port:function(t){return!t||/^\d+(:\d+)?$/.test(t)||"1-65535"},ip:function(t){return!t||/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)||"Invalid IP address"}}}},created:function(){this.serverId=this.$route.params.id,this.fetchData()},methods:{fetchData:function(){var t=this;this.error="",this.fetching=!0,s.Z.get("servers/"+this.serverId+"/firewall").then((function(e){if(console.log(e),e.data.error)return t.error=e.data.error,!1;t.active=e.data.active,t.items=e.data.rules,t.data=e.data.item,document.title="Firewall | "+t.data.name})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1}))},toggle:function(){var t=this;this.fetching=!0,this.error="",s.Z.post("servers/"+this.serverId+"/firewall",{status:this.active}).then((function(e){console.log(e),e.data.success?t.fetchData():t.error=e.data.error})).catch((function(t){console.log(t)})).finally((function(){t.fetching=!1}))},addItem:function(){this.item={},this.drawer=!0},editItem:function(t){this.item=JSON.parse(JSON.stringify(t)),"Anywhere"===this.item.from.substr(0,8)&&(this.item.from=""),this.drawer=!0},deleteItem:function(t){var e=this,r=t.port+"/"+t.protocol+" "+t.action+" from "+t.from;this.$confirm("Delete "+r).then(function(){var r=(0,o.Z)((0,a.Z)().mark((function r(n){return(0,a.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!n){r.next=4;break}return r.next=3,e.doDelete(t.id);case 3:e.error||e.fetchData();case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())},doDelete:function(t){var e=this;return this.fetching=!0,this.error="",s.Z.post("servers/"+this.serverId+"/firewall",{id:t}).then((function(t){console.log(t),t.data.success||(e.error=t.data.error)})).catch((function(t){e.error=t})).finally((function(){e.fetching=!1}))},saveItem:function(){var t=(0,o.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs.form.validate()&&(e=this,this.error="",this.fetching=!0,s.Z.post("servers/"+this.serverId+"/firewall",this.item).then((function(t){console.log(t),t.data.success?(e.drawer=!1,e.fetchData()):e.error=t.data.error?t.data.error:t.data})).catch((function(t){e.error=t})).finally((function(){e.fetching=!1})));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},u=l,d=r(1001),f=(0,d.Z)(u,n,i,!1,null,null,null),v=f.exports},22261:function(t,e,r){"use strict";var n=r(46916),i=r(1702),a=r(41340),o=r(67066),s=r(52999),c=r(72309),l=r(70030),u=r(29909).get,d=r(9441),f=r(38173),v=c("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,h=m,p=i("".charAt),g=i("".indexOf),x=i("".replace),I=i("".slice),b=function(){var t=/a/,e=/b*/g;return n(m,t,"a"),n(m,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),w=s.BROKEN_CARET,y=void 0!==/()??/.exec("")[1],_=b||y||w||d||f;_&&(h=function(t){var e,r,i,s,c,d,f,_=this,k=u(_),E=a(t),R=k.raw;if(R)return R.lastIndex=_.lastIndex,e=n(h,R,E),_.lastIndex=R.lastIndex,e;var S=k.groups,Z=w&&_.sticky,$=n(o,_),D=_.source,A=0,C=E;if(Z&&($=x($,"y",""),-1===g($,"g")&&($+="g"),C=I(E,_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==p(E,_.lastIndex-1))&&(D="(?: "+D+")",C=" "+C,A++),r=new RegExp("^(?:"+D+")",$)),y&&(r=new RegExp("^"+D+"$(?!\\s)",$)),b&&(i=_.lastIndex),s=n(m,Z?r:_,C),Z?s?(s.input=I(s.input,A),s[0]=I(s[0],A),s.index=_.lastIndex,_.lastIndex+=s[0].length):_.lastIndex=0:b&&s&&(_.lastIndex=_.global?s.index+s[0].length:i),y&&s&&s.length>1&&n(v,s[0],r,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(s[c]=void 0)})),s&&S)for(s.groups=d=l(null),c=0;c<S.length;c++)f=S[c],d[f[0]]=s[f[1]];return s}),t.exports=h},67066:function(t,e,r){"use strict";var n=r(19670);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},52999:function(t,e,r){var n=r(47293),i=r(17854),a=i.RegExp,o=n((function(){var t=a("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),s=o||n((function(){return!a("a","y").sticky})),c=o||n((function(){var t=a("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:c,MISSED_STICKY:s,UNSUPPORTED_Y:o}},9441:function(t,e,r){var n=r(47293),i=r(17854),a=i.RegExp;t.exports=n((function(){var t=a(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},38173:function(t,e,r){var n=r(47293),i=r(17854),a=i.RegExp;t.exports=n((function(){var t=a("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},74916:function(t,e,r){"use strict";var n=r(82109),i=r(22261);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},77601:function(t,e,r){"use strict";r(74916);var n=r(82109),i=r(17854),a=r(46916),o=r(1702),s=r(60614),c=r(70111),l=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),u=i.Error,d=o(/./.test);n({target:"RegExp",proto:!0,forced:!l},{test:function(t){var e=this.exec;if(!s(e))return d(this,t);var r=a(e,this,t);if(null!==r&&!c(r))throw new u("RegExp exec method returned something other than an Object or null");return!!r}})}}]);
//# sourceMappingURL=5521-legacy.b6d6b982.js.map