"use strict";(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[3245],{93992:function(e,r,t){t.d(r,{Z:function(){return i}});var n=t(66252);function s(e,r,t,s,u,o){var a=(0,n.up)("v-icon");return"linode"===t.provider?((0,n.wg)(),(0,n.j4)(a,{key:0},{default:(0,n.w5)((function(){return[(0,n.Uk)("fab fa-linode")]})),_:1})):"digitalocean"===t.provider?((0,n.wg)(),(0,n.j4)(a,{key:1},{default:(0,n.w5)((function(){return[(0,n.Uk)("fab fa-digital-ocean")]})),_:1})):((0,n.wg)(),(0,n.j4)(a,{key:2},{default:(0,n.w5)((function(){return[(0,n.Uk)("fas fa-server")]})),_:1}))}var u={props:{provider:null}},o=t(48118);const a=(0,o.Z)(u,[["render",s]]);var i=a},3245:function(e,r,t){t.r(r),t.d(r,{default:function(){return v}});t(68309);var n=t(66252),s=t(3577),u=["innerHTML"],o={key:0},a={key:1};function i(e,r,t,i,l,c){var d=(0,n.up)("v-alert"),f=(0,n.up)("ServerIcon"),h=(0,n.up)("v-list-item-title"),v=(0,n.up)("v-list-item-subtitle"),m=(0,n.up)("v-list-item"),p=(0,n.up)("v-col"),w=(0,n.up)("v-icon"),g=(0,n.up)("v-btn"),_=(0,n.up)("v-row"),k=(0,n.up)("v-container"),U=(0,n.up)("v-tab"),W=(0,n.up)("v-tabs"),y=(0,n.up)("router-view"),b=(0,n.up)("v-card-title"),I=(0,n.up)("v-select"),S=(0,n.up)("v-card-text"),C=(0,n.up)("v-card"),Z=(0,n.up)("v-dialog");return(0,n.wg)(),(0,n.iD)("div",null,[l.error?((0,n.wg)(),(0,n.j4)(d,{key:0,type:"error"},{default:(0,n.w5)((function(){return[(0,n._)("div",{innerHTML:l.error},null,8,u)]})),_:1})):(0,n.kq)("",!0),l.fetching?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(k,{key:1,fluid:""},{default:(0,n.w5)((function(){return[(0,n.Wm)(_,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(p,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(m,null,{prepend:(0,n.w5)((function(){return[(0,n.Wm)(f,{provider:l.data.provider},null,8,["provider"])]})),default:(0,n.w5)((function(){return[(0,n.Wm)(h,null,{default:(0,n.w5)((function(){return[(0,n.Uk)((0,s.zw)(l.data.name),1)]})),_:1}),(0,n.Wm)(v,null,{default:(0,n.w5)((function(){return[(0,n.Uk)((0,s.zw)(l.data.hostname),1)]})),_:1})]})),_:1})]})),_:1}),(0,n.Wm)(p,{class:"text-right"},{default:(0,n.w5)((function(){return[(0,n.Wm)(g,{color:"success",onClick:c.terminal},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,{small:""},{default:(0,n.w5)((function(){return[(0,n.Uk)("fas fa-terminal")]})),_:1})]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})),(0,n.Wm)(W,{"show-arrows":""},{default:(0,n.w5)((function(){return[(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/summary"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Summary")]})),_:1},8,["to"]),(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/Files"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Files")]})),_:1},8,["to"]),(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/services"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Services")]})),_:1},8,["to"]),(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/cronjobs"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Cronjobs")]})),_:1},8,["to"]),(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/database"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Database")]})),_:1},8,["to"]),(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/systemusers"},{default:(0,n.w5)((function(){return[(0,n.Uk)("System users")]})),_:1},8,["to"]),(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/firewall"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Firewall")]})),_:1},8,["to"]),(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/mail"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Mail")]})),_:1},8,["to"]),(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/apps"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Apps")]})),_:1},8,["to"]),(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/logs"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Logs")]})),_:1},8,["to"]),(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/backups"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Cloud backups")]})),_:1},8,["to"]),(0,n.Wm)(U,{to:"/servers/"+e.serverId+"/settings"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Settings")]})),_:1},8,["to"])]})),_:1}),(0,n.Wm)(y),(0,n.Wm)(Z,{modelValue:l.chooseUser,"onUpdate:modelValue":r[1]||(r[1]=function(e){return l.chooseUser=e})},{default:(0,n.w5)((function(){return[(0,n.Wm)(C,{loading:l.fetching},{default:(0,n.w5)((function(){return[(0,n.Wm)(b,null,{default:(0,n.w5)((function(){return[(0,n.Uk)(" Open Secure Shell ")]})),_:1}),(0,n.Wm)(S,null,{default:(0,n.w5)((function(){return[l.users.length?((0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(I,{modelValue:l.ssh_username,"onUpdate:modelValue":r[0]||(r[0]=function(e){return l.ssh_username=e}),items:l.users,label:"User"},null,8,["modelValue","items"]),(0,n.Wm)(g,{disabled:0===l.ssh_username.length,color:"success",onClick:c.saveKeyAndContinue,right:"",class:"ml-3"},{default:(0,n.w5)((function(){return[(0,n.Uk)(" Save Key and Continue ")]})),_:1},8,["disabled","onClick"])])):l.fetching?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",a," No system users, add one and try again. "))]})),_:1})]})),_:1},8,["loading"])]})),_:1},8,["modelValue"])])}t(41539),t(54747);var l=t(1006),c=t(93992),d={components:{ServerIcon:c.Z},data:function(){return{error:"",data:{users:{}},ssh_username:"",users:[],details:"",fetching:!1,chooseUser:!1}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var e=this;this.error="",this.serverId=this.$route.params.id,l.Z.get("servers/"+this.serverId).then((function(r){console.log(r),r.data.error&&(e.error=r.data.error),r.data.item&&(e.data=r.data.item)})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))},fetchUsers:function(){var e=this;this.error="",this.fetching=!0,e.chooseUser=!0,l.Z.get("servers/"+this.serverId+"/systemusers").then((function(r){if(console.log(r),r.data.error)return e.error=r.data.error,!1;r.data.item.users.forEach((function(r){e.users.push({text:r.name,value:r.name})}))})).catch((function(e){return console.log(e)})).finally((function(){return e.fetching=!1}))},saveKey:function(e){var r=this;l.Z.post("servers/"+r.serverId+"/systemusers/"+r.ssh_username,{key:e}).then((function(e){console.log(e),e.data.success?r.saveSSHUser():(r.fetching=!1,r.error=e.data.error)})).catch((function(e){r.fetching=!1,console.log(e)}))},saveSSHUser:function(){var e=this;e.fetching=!0,l.Z.post("servers/"+this.serverId+"/savesshuser",{ssh_username:e.ssh_username}).then((function(r){console.log(r),r.data.success?(e.data.ssh_username=e.ssh_username,e.terminal()):e.error=r.data.error})).catch((function(e){return console.log(e)})).finally((function(){e.fetching=!1,e.chooseUser=!1}))},saveKeyAndContinue:function(){var e=this;e.fetching=!0,l.Z.post("https://shiftedit.net/api/prefs").then((function(r){console.log(r),r.data.error?(e.error=r.data.error,e.chooseUser=!1):(console.log(r.data.public_key),e.saveKey(r.data.public_key))})).catch((function(e){return console.log(e)}))},terminal:function(){if(this.data.ssh_username){console.log("open ssh "+this.data.ssh_username);var e="http://shiftedit.net/ssh/?host="+this.data.hostname+"&user="+this.data.ssh_username;window.ssh_path&&(e+="&path="+window.ssh_path),window.open(e)}else this.fetchUsers()}}},f=t(48118);const h=(0,f.Z)(d,[["render",i]]);var v=h}}]);
//# sourceMappingURL=3245-legacy.e0f0b60d.js.map