(self["webpackChunkServerWand"]=self["webpackChunkServerWand"]||[]).push([[2739],{84285:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"",content:"","content-class":"centered-dialog"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("v-container",{attrs:{"fill-height":""}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[a("v-layout",{attrs:{row:""}},[a("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),a("h2",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.message))])])],1)],1)],1)],1)},s=[],i={name:"Loading",data:function(){return{}},props:{value:{type:Boolean,default:!1},message:{type:String,default:"Summoning..."}}},n=i,o=a(1001),l=(0,o.Z)(n,r,s,!1,null,null,null),d=l.exports},82739:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.error?a("v-alert",{attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e(),a("Loading",{attrs:{value:e.loading}}),a("v-card",{staticClass:"pb-5",attrs:{loading:e.fetching}},[a("v-card-title",[e._v("Server details")]),e.serverId?e._e():a("v-card-subtitle",[e._v(" Choose a VPS provider below or add a custom server ")]),e.serverId?e._e():a("div",[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"mx-3",attrs:{slot:"activator","value:":"menu",color:"primary"},slot:"activator"},r),[e._v(" "+e._s(e.provider)+" "),a("v-icon",{attrs:{dark:""}},[e._v(e._s(e.isOpen?"expand_less":"expand_more"))])],1)]}}],null,!1,528249069),model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[a("v-list",e._l(e.items,(function(t,r){return a("v-list-item",{key:r,on:{click:function(a){return e.getOptions(t.value)}}},[a("v-list-item-avatar",[a("v-icon",[e._v(e._s(t.avatar))])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.title))])],1)],1)})),1)],1)],1),e.data.provider||e.serverId?a("v-form",{ref:"form",staticClass:"mx-3 my-5",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},["custom"!=e.data.provider||e.serverId?e._e():a("p",[e._v(" Connect a server which is freshly installed with Ubuntu. Once configured, root login will be disabled for increased security ")]),e.unclaimed.length?a("v-select",{attrs:{items:e.unclaimed,label:"Server"},model:{value:e.data.unclaimed,callback:function(t){e.$set(e.data,"unclaimed",t)},expression:"data.unclaimed"}}):e._e(),a("v-text-field",{attrs:{rules:e.nameRules,label:"Name",required:""},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}}),"custom"===e.data.provider||this.serverId>0?a("v-text-field",{attrs:{rules:e.hostRules,label:"IP"},model:{value:e.data.ip,callback:function(t){e.$set(e.data,"ip",t)},expression:"data.ip"}}):e._e(),"custom"===e.data.provider||"vultr"===e.data.provider||e.unclaimed.length?e._e():a("div",[e.serverId?e._e():a("v-select",{attrs:{items:e.regions,label:"Region"},model:{value:e.data.region,callback:function(t){e.$set(e.data,"region",t)},expression:"data.region"}}),e.serverId?e._e():a("v-select",{attrs:{items:e.types,label:"Type"},model:{value:e.data.type,callback:function(t){e.$set(e.data,"type",t)},expression:"data.type"}}),!e.serverId&&e.images.length?a("v-select",{attrs:{items:e.images,label:"Image"},model:{value:e.data.image,callback:function(t){e.$set(e.data,"image",t)},expression:"data.image"}}):e._e()],1),"custom"==e.data.provider||"vultr"==e.data.provider?a("div",[a("v-text-field",{attrs:{disabled:e.serverId>0,rules:e.hostRules,label:"Host name/ IP Address",required:""},model:{value:e.data.hostname,callback:function(t){e.$set(e.data,"hostname",t)},expression:"data.hostname"}}),"custom"==e.data.provider?a("div",[a("v-text-field",{attrs:{disabled:e.serverId>0,label:"Username",required:""},model:{value:e.data.user,callback:function(t){e.$set(e.data,"user",t)},expression:"data.user"}}),a("v-text-field",{attrs:{type:"password",disabled:e.serverId>0,label:"Password",required:""},model:{value:e.data.pass,callback:function(t){e.$set(e.data,"pass",t)},expression:"data.pass"}})],1):e._e()],1):e._e(),e.serverId>0||"custom"==e.data.provider?a("v-text-field",{attrs:{label:"Port",required:""},model:{value:e.data.port,callback:function(t){e.$set(e.data,"port",t)},expression:"data.port"}}):e._e(),"custom"===e.data.provider||e.serverId>0?a("v-select",{attrs:{items:e.dns,label:"DNS provider"},model:{value:e.data.dns,callback:function(t){e.$set(e.data,"dns",t)},expression:"data.dns"}}):e._e(),e.data.dns?a("v-select",{attrs:{items:e.provider_tokens,label:"DNS provider API token (optional)"},model:{value:e.data.provider_token,callback:function(t){e.$set(e.data,"provider_token",t)},expression:"data.provider_token"}}):e._e(),a("v-checkbox",{attrs:{label:"Mailserver"},model:{value:e.data.mailserver,callback:function(t){e.$set(e.data,"mailserver",t)},expression:"data.mailserver"}}),a("v-btn",{attrs:{disabled:e.dialog,loading:e.dialog,color:"success"},on:{click:e.validate}},[e._v(" Save ")])],1):e._e()],1),a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[a("v-layout",{staticClass:"pt-5"},[a("i",{staticClass:"fas fa-magic fa-2x faa-horizontal animated"}),a("h2",{staticStyle:{"margin-left":"10px"}},[e._v("Spellcasting...")])]),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:0==e.progress,color:"white"},model:{value:e.progress,callback:function(t){e.progress=t},expression:"progress"}}),a("div",{domProps:{innerHTML:e._s(e.details)}})],1)],1)],1),a("v-navigation-drawer",{attrs:{temporary:"",right:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-card",[a("v-card-title",[e._v(" API token ")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Label",required:""},model:{value:e.provider_token.label,callback:function(t){e.$set(e.provider_token,"label",t)},expression:"provider_token.label"}}),a("v-text-field",{attrs:{label:"Token",required:""},model:{value:e.provider_token.token,callback:function(t){e.$set(e.provider_token,"token",t)},expression:"provider_token.token"}}),a("v-btn",{attrs:{disabled:e.fetching,loading:e.fetching,color:"success"},on:{click:e.submitToken}},[e._v(" Save ")])],1)],1)],1)],1)},s=[],i=(a(74916),a(77601),a(41539),a(40561),a(54747),a(4296)),n=a(84285),o={components:{Loading:n.Z},data:function(){return{fetching:!1,loading:!1,valid:!0,data:{images:[],unclaimed:[],provider:"",name:"New-server",hostname:"",user:"root",pass:"",port:"22",webserver:!0,mailserver:!1},dns:[{text:"Linode",value:"linode"},{text:"Digital Ocean",value:"digitalocean"},{text:"Other",value:""}],provider_tokens:[{text:"Add new",value:"new"}],nameRules:[function(e){return!!e||"Name is required"},function(e){return/^[a-zA-Z0-9_-]+$/g.test(e)||"Must contain alphanumeric characters only"}],hostRules:[function(e){return!!e||"IP is required"}],provider_token:{},drawer:!1,dialog:!1,details:"",serverId:0,error:"",progress:0,regions:[],types:[],images:[],unclaimed:[],items:[{title:"Linode",value:"linode",avatar:"fab fa-linode"},{title:"DigitalOcean",value:"digitalocean",avatar:"fab fa-digital-ocean"},{title:"Vultr",value:"vultr",avatar:"fas fa-server"},{title:"Custom server",value:"custom",avatar:"fas fa-server"}],isOpen:!1,provider:"Choose"}},created:function(){document.title="Server details",this.$route.params.id&&(this.serverId=this.$route.params.id),this.fetchData(),this.$route.query.ip&&(this.data.hostname=this.$route.query.ip,this.data.provider="vultr",this.provider="vultr")},watch:{"data.provider_token":function(){"new"===this.data.provider_token&&(this.drawer=!0,this.data.provider_token="",this.provider_token["provider"]=this.data.dns)}},methods:{fetchData:function(){var e=this;this.error="",this.loading=!0,i.Z.get("servers/"+this.serverId).then((function(t){console.log(t),e.serverId&&(e.data=t.data.item)})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1})),i.Z.get("providers/tokens").then((function(t){console.log(t),e.provider_tokens.splice(1),t.data.tokens&&t.data.tokens.forEach((function(t){e.provider_tokens.push({text:t.label,value:t.id})}))})).catch((function(t){e.error=t})).finally((function(){e.loading=!1}))},install:function(){var e=this;e.dialog=!0,e.details="";var t="servers/"+e.serverId+"/install?webserver=1";e.data.mailserver&&(t+="&mailserver=1"),i.Z.event(t,(function(t){e.details=t.msg+"...",t.progress&&(e.progress=t.progress)}),(function(t){e.error=t}),(function(){e.dialog=!1,e.error||(e.$eventHub.$emit("itemsChanged"),e.$router.push("/servers/"+e.serverId+"/summary"))}))},validate:function(){var e=this;this.$refs.form.validate()&&(this.details="",this.dialog=!0,this.error="",e.data.unclaimed>0&&(e.serverId=e.data.unclaimed),console.log("save server"),console.log(e.serverId),e.serverId?i.Z.post("servers/"+e.serverId+"/update",this.data).then((function(){e.install()})).catch((function(e){console.log(e)})):i.Z.post("servers/create",this.data).then((function(t){console.log(t),t.data.success?t.data.id&&(e.serverId=t.data.id,e.serverId&&e.install()):(e.error=t.data.error,e.dialog=!1)})).catch((function(t){console.log(t),e.dialog=!1})))},getOptions:function(e,t){if(this.data.provider=e,this.provider=e,"custom"!==e&&"vultr"!==e){var a;t||(a=window.open("loading"));var r=this;this.loading=!0,r.regions=[],r.images=[],r.types=[],r.unclaimed=[],i.Z.post("providers/?cmd=options",{provider:e}).then((function(s){if(console.log(s),s.data.require_auth&&!t){a.location="https://serverwand.com/account/services/"+e;var i=setInterval((function(){if(a.closed)return clearInterval(i),void r.getOptions(e,!0)}),500)}else s.data.require_auth||(a&&a.close(),r.regions=s.data.options.regions,r.images=s.data.options.images,r.types=s.data.options.types,s.data.unclaimed.forEach((function(e){r.unclaimed.push({text:e.label,value:e.id})})))})).catch((function(e){a&&a.close(),console.log(e)})).finally((function(){r.loading=!1}))}},submitToken:function(){var e=this;i.Z.post("providers/tokens",this.provider_token).then((function(t){t.data.error?e.error=t.data.error:(e.drawer=!1,e.fetchData())})).catch((function(t){e.error=t}))}}},l=o,d=a(1001),c=(0,d.Z)(l,r,s,!1,null,null,null),u=c.exports},22261:function(e,t,a){"use strict";var r=a(46916),s=a(1702),i=a(41340),n=a(67066),o=a(52999),l=a(72309),d=a(70030),c=a(29909).get,u=a(9441),v=a(38173),p=l("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,m=f,g=s("".charAt),h=s("".indexOf),x=s("".replace),b=s("".slice),_=function(){var e=/a/,t=/b*/g;return r(f,e,"a"),r(f,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),k=o.BROKEN_CARET,I=void 0!==/()??/.exec("")[1],y=_||I||k||u||v;y&&(m=function(e){var t,a,s,o,l,u,v,y=this,w=c(y),$=i(e),E=w.raw;if(E)return E.lastIndex=y.lastIndex,t=r(m,E,$),y.lastIndex=E.lastIndex,t;var S=w.groups,R=k&&y.sticky,C=r(n,y),O=y.source,q=0,Z=$;if(R&&(C=x(C,"y",""),-1===h(C,"g")&&(C+="g"),Z=b($,y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==g($,y.lastIndex-1))&&(O="(?: "+O+")",Z=" "+Z,q++),a=new RegExp("^(?:"+O+")",C)),I&&(a=new RegExp("^"+O+"$(?!\\s)",C)),_&&(s=y.lastIndex),o=r(f,R?a:y,Z),R?o?(o.input=b(o.input,q),o[0]=b(o[0],q),o.index=y.lastIndex,y.lastIndex+=o[0].length):y.lastIndex=0:_&&o&&(y.lastIndex=y.global?o.index+o[0].length:s),I&&o&&o.length>1&&r(p,o[0],a,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(o[l]=void 0)})),o&&S)for(o.groups=u=d(null),l=0;l<S.length;l++)v=S[l],u[v[0]]=o[v[1]];return o}),e.exports=m},67066:function(e,t,a){"use strict";var r=a(19670);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},52999:function(e,t,a){var r=a(47293),s=a(17854),i=s.RegExp,n=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),o=n||r((function(){return!i("a","y").sticky})),l=n||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:l,MISSED_STICKY:o,UNSUPPORTED_Y:n}},9441:function(e,t,a){var r=a(47293),s=a(17854),i=s.RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},38173:function(e,t,a){var r=a(47293),s=a(17854),i=s.RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},40561:function(e,t,a){"use strict";var r=a(82109),s=a(17854),i=a(51400),n=a(19303),o=a(26244),l=a(47908),d=a(65417),c=a(86135),u=a(81194),v=u("splice"),p=s.TypeError,f=Math.max,m=Math.min,g=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!v},{splice:function(e,t){var a,r,s,u,v,x,b=l(this),_=o(b),k=i(e,_),I=arguments.length;if(0===I?a=r=0:1===I?(a=0,r=_-k):(a=I-2,r=m(f(n(t),0),_-k)),_+a-r>g)throw p(h);for(s=d(b,r),u=0;u<r;u++)v=k+u,v in b&&c(s,u,b[v]);if(s.length=r,a<r){for(u=k;u<_-r;u++)v=u+r,x=u+a,v in b?b[x]=b[v]:delete b[x];for(u=_;u>_-r+a;u--)delete b[u-1]}else if(a>r)for(u=_-r;u>k;u--)v=u+r-1,x=u+a-1,v in b?b[x]=b[v]:delete b[x];for(u=0;u<a;u++)b[u+k]=arguments[u+2];return b.length=_-r+a,s}})},74916:function(e,t,a){"use strict";var r=a(82109),s=a(22261);r({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},77601:function(e,t,a){"use strict";a(74916);var r=a(82109),s=a(17854),i=a(46916),n=a(1702),o=a(60614),l=a(70111),d=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),c=s.Error,u=n(/./.test);r({target:"RegExp",proto:!0,forced:!d},{test:function(e){var t=this.exec;if(!o(t))return u(this,e);var a=i(t,this,e);if(null!==a&&!l(a))throw new c("RegExp exec method returned something other than an Object or null");return!!a}})}}]);
//# sourceMappingURL=2739-legacy.8c107b23.js.map